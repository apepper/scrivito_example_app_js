!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("underscore"),require("react"),require("urijs"),require("tcomb-validation"),require("react-dom"),require("tcomb-react"),require("promise-polyfill"),require("speakingurl"),require("history")):"function"==typeof define&&define.amd?define(["underscore","react","urijs","tcomb-validation","react-dom","tcomb-react","promise-polyfill","speakingurl","history"],e):"object"==typeof exports?exports.scrivito=e(require("underscore"),require("react"),require("urijs"),require("tcomb-validation"),require("react-dom"),require("tcomb-react"),require("promise-polyfill"),require("speakingurl"),require("history")):t.scrivito=e(t.underscore,t.react,t.urijs,t["tcomb-validation"],t["react-dom"],t["tcomb-react"],t["promise-polyfill"],t.speakingurl,t.history)}(window,(function(t,e,n,r,i,o,a,u,c){return function(t){function e(e){for(var n,i,o=e[0],a=e[1],u=0,s=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&s.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);for(c&&c(e);s.length;)s.shift()()}var n={},r={1:0};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=o);var a,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=i.p+"scrivito_editing.js";var c=new Error;a=function(e){u.onerror=u.onload=null,clearTimeout(s);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,n[1](c)}r[t]=void 0}};var s=setTimeout((function(){a({type:"timeout",target:u})}),12e4);u.onerror=u.onload=a,document.head.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var o=window.webpackJsonpscrivito=window.webpackJsonpscrivito||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=a;return i(i.s=66)}([function(t,e,n){"use strict";function r(t,e){var n,r=!1;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];n=i,r||(t((function(){r=!1;var t=n;n=void 0,e.apply(void 0,t)})),r=!0)}}function i(t,e){var n=[],r=!1;return function(i){n.push(i),function i(){if(r)return;r=!0,t((function(){try{!function(){var t=[];try{for(;n.length>0;){var r=n;n=[],t.push.apply(t,e(r))}}finally{t.push.apply(t,n),n=t}}()}finally{r=!1,n.length>0&&i()}}))}()}}n.d(e,"x",(function(){return i})),n.d(e,"w",(function(){return r})),n.d(e,"u",(function(){return g})),n.d(e,"B",(function(){return m})),n.d(e,"e",(function(){return O})),n.d(e,"g",(function(){return w})),n.d(e,"a",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"m",(function(){return p})),n.d(e,"F",(function(){return _})),n.d(e,"cb",(function(){return y})),n.d(e,"R",(function(){return v})),n.d(e,"T",(function(){return a})),n.d(e,"ab",(function(){return h})),n.d(e,"l",(function(){return S})),n.d(e,"k",(function(){return C})),n.d(e,"X",(function(){return k})),n.d(e,"P",(function(){return I})),n.d(e,"G",(function(){return A})),n.d(e,"N",(function(){return E})),n.d(e,"O",(function(){return D})),n.d(e,"I",(function(){return M})),n.d(e,"t",(function(){return U})),n.d(e,"Y",(function(){return V})),n.d(e,"db",(function(){return q})),n.d(e,"H",(function(){return L})),n.d(e,"i",(function(){return H})),n.d(e,"d",(function(){return z})),n.d(e,"J",(function(){return Q})),n.d(e,"s",(function(){return G})),n.d(e,"Z",(function(){return Z})),n.d(e,"W",(function(){return X})),n.d(e,"V",(function(){return Y})),n.d(e,"bb",(function(){return $})),n.d(e,"S",(function(){return ot})),n.d(e,"z",(function(){return it})),n.d(e,"A",(function(){return et})),n.d(e,"L",(function(){return rt})),n.d(e,"E",(function(){return at})),n.d(e,"K",(function(){return ut})),n.d(e,"M",(function(){return nt})),n.d(e,"eb",(function(){return ft})),n.d(e,"fb",(function(){return pt})),n.d(e,"C",(function(){return lt})),n.d(e,"U",(function(){return bt})),n.d(e,"n",(function(){return vt})),n.d(e,"r",(function(){return mt})),n.d(e,"b",(function(){return Ot})),n.d(e,"y",(function(){return wt})),n.d(e,"v",(function(){return St})),n.d(e,"o",(function(){return kt})),n.d(e,"h",(function(){return Pt})),n.d(e,"q",(function(){return At})),n.d(e,"p",(function(){return Dt})),n.d(e,"c",(function(){return xt})),n.d(e,"D",(function(){return Mt})),n.d(e,"Q",(function(){return Tt})),n.d(e,"f",(function(){return Ft}));var o=n(1);function a(t){try{return Object(o.isFunction)(t)?function(t){if(function(t){return!!t._scrivitoPrivateSchema}(t)){return"[class "+t._scrivitoPrivateSchema.name+"]"}if(function(t){var e=t.prototype;return e&&e.isReactComponent}(t)){return'[class React.Component "'+(t.displayName||t.name)+'"]'}return c(t.toString())}(t):Object(o.isObject)(t)?function(t){var e=t._scrivitoPrivateContent;if(e&&Object(o.isFunction)(e.toPrettyPrint))return e.toPrettyPrint();if(Object(o.isElement)(t))return"[object HTMLElement "+u(t.outerHTML)+"]";return u(t)}(t):u(t)}catch(t){return""}}function u(t){var e=JSON.stringify(t);return e?c(e):e}function c(t){return t.length>100?t.slice(0,100)+"...":t}var s,f=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e,n){var r=this.constructor;void 0===n&&(n=!0);var i=t.call(this,e)||this,o=r.prototype;if(Object.setPrototypeOf?Object.setPrototypeOf(i,o):i.__proto__=o,i._captureStackTrace=n,n)if(Error.captureStackTrace)Error.captureStackTrace(i,i.constructor);else{var a=void 0;try{throw new Error}catch(t){a=t.stack}Object.defineProperty(i,"stack",{value:a})}return i}return f(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"captureStackTrace",{get:function(){return!!this._captureStackTrace},enumerable:!1,configurable:!0}),e}(Error),l=function(t){function e(e){return t.call(this,e)||this}return f(e,t),e}(p),d=function(t){function e(e){return t.call(this,e)||this}return f(e,t),e}(p),h=n(39);h.struct.strict=!0,h.interface.strict=!0,h.fail=function(t){throw new TypeError(t)};var b=function(t){setTimeout(t,0)};function v(t){b(t)}function y(t){v((function(){throw t}))}function g(t,e,n){var r=n.docPermalink;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];try{n=j(i,e)}catch(t){y(t)}if(n){var a="Visit "+m(r)+" for more information.";throw new l("Invalid arguments for '"+t+"': "+n+" "+a)}}}function m(t){return"https://scrivito.com/"+t}function j(t,e){var n=e.length,r=t.length;if(r>n)return"Expected "+n+" arguments, got "+r;var i=Object(o.flatten)(e.map((function(e,n){var r=e[0],i=e[1],o=t[n];return h.validate(o,i).errors.map((function(t){return function(t,e){var n=function(t,e){var n="argument '"+t+"'";if(0===e.path.length)return n;return"key '"+e.path.join("/")+"' in "+n}(t,e);if(void 0===e.actual)return"Missing required "+n+".";if(e.expected===h.Nil)return"Unexpected "+n+".";var r=h.getTypeName(e.expected),i="got "+a(e.actual)+", expected type "+r+".";return"Unexpected value for "+n+": "+i}(r,t)}))})));return i.length>0?i.join(" "):void 0}var O=function(){function t(){}return t.prototype.current=function(){return this.currentContext},t.prototype.runWith=function(t,e){var n=this.currentContext;try{return this.currentContext=t,e()}finally{this.currentContext=n}},t}(),w=function(){function t(){var t=this;this.promise=new vt((function(e,n){t.resolve=function(n){t.settled=!0,e(n)},t.reject=function(e){t.settled=!0,n(e)}}))}return t.prototype.isPending=function(){return!this.settled},t}();function _(t,e){return"/"===t?"/"+e:t+"/"+e}var S=h.refinement(h.Integer,(function(t){return t>0}),"PositiveInteger"),C=h.refinement(h.Integer,(function(t){return t>=0}),"NonNegativeInteger");function k(t){try{return{errorThrown:!1,result:t()}}catch(t){return{errorThrown:!0,error:t}}}var P=!1;function I(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];window&&window.console&&!P&&(t=window.console).error.apply(t,e)}function A(){var t="1.13.0-rc1-773-g8e1fde85a98d";return t}function E(t,e){void 0===e&&(e=window.document);var n=e.createElement("link");n.rel="stylesheet",n.href=t,x(e.head,n)}function D(t,e){void 0===e&&(e=window.document);var n=e.createElement("script");n.src=t,x(e.head,n)}function x(t,e){t.appendChild(e)}function M(t){return null!=t}var T=/(_+)(\w)/g,F=/([A-Z])/g,R=/[A-Z]+|\d+/g,W=/^_?(_+[A-Z0-9]|[^_])+$/,N=/[_\s]+/g,B=/[A-Z][a-z]+/g;function L(t){return W.test(t)}function q(t){return t.replace(F,(function(t,e){return"_"+e.toLowerCase()}))}function U(t){return t.replace(T,(function(t,e,n,r){return r?n.toUpperCase()===n?t:""+e.substr(1)+n.toUpperCase():t}))}function V(t){return t.replace(N," ").replace(B,(function(t){return" "+t.toLowerCase()})).replace(R,(function(t){return" "+t})).trim().replace(/./,(function(t){return t.toUpperCase()}))}n(50);var z=h.interface({size:h.Number,type:h.String},{name:"Blob",strict:!1}),H=z.extend({name:h.String},{name:"File",strict:!1});function Q(t){return"_"===t[0]}function G(t,e){return J(t.iterator(),e)}function J(t,e){for(var n=[];n.length!==e;){var r=t.next();if(r.done)return n;n.push(r.value)}return n}n(51);function Z(t,e,n){var r=void 0===e?t.iterator():t.iteratorFromContinuation(e);return{values:J(r,n),continuation:r.continuation()}}function Y(){for(var t=Math.floor(Math.random()*Math.pow(16,8)).toString(16);t.length<8;)t="0"+t;return t}function X(){return Y()+Y()}var K=!1;function $(t,e,n){return K?t:Object(o.throttle)(t,e,n)}var tt=/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)$/;function et(t){return"string"==typeof t&&t.match(/^-?\d+$/)||"number"==typeof t?st(t):null}function nt(t){return function(t){return rt(t)&&Math.floor(t)===t}(t)&&-9007199254740991<=t&&t<=9007199254740991}function rt(t){return"number"==typeof t&&Object(o.isFinite)(t)}function it(t){if("string"!=typeof t)return null;if(!ut(t))throw new d('The value is not a valid ISO date time: "'+t+'"');return ot(t)}function ot(t){if(!t)return null;var e=t.match(tt);if(!e)return null;var n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],u=e[6],c=parseInt(n,10),s=parseInt(r,10),f=parseInt(i,10),p=parseInt(o,10),l=parseInt(a,10),d=parseInt(u,10);return new Date(Date.UTC(c,s-1,f,p,l,d))}function at(t){return""+(""+t.getUTCFullYear()+ct(t.getUTCMonth()+1))+(""+ct(t.getUTCDate())+ct(t.getUTCHours()))+(""+ct(t.getUTCMinutes())+ct(t.getUTCSeconds()))}function ut(t){return"string"==typeof t&&!!t.match(/^\d{14}$/)}function ct(t){return t<10?"0"+t:t}function st(t){var e=parseInt(t.toString(),10);return 0===e?0:nt(e)?e:null}function ft(t){return pt(1e3*t)}function pt(t){return new vt((function(e){setTimeout(e,t)}))}function lt(t,e){return dt(t)&&dt(e)?t.equals(e):Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&Object(o.zip)(t,e).every((function(t){return lt(t[0],t[1])})):ht(t)&&ht(e)?t.valueOf()===e.valueOf():t===e}function dt(t){return!!t&&"function"==typeof t.equals}function ht(t){return!!t&&"function"==typeof t.valueOf}function bt(t,e){return t.then((function(t){return e(),t}),(function(t){throw e(),t}))}var vt,yt=n(62);vt="undefined"!=typeof Promise?Promise:n.n(yt).a;var gt=n(13);function mt(t){var e=new gt(t),n=e.segment(0);if(!jt(n))return null;for(;jt(n);)e.segment(0,""),n=e.segment(0);return e.toString()}function jt(t){return"scrivito"===(null==t?void 0:t.toLowerCase())}var Ot=function(){function t(t,e){var n=this,r=(void 0===e?{}:e).batchSize;this.scheduleItem=i(v,(function(t){var e=t.splice(0,n.batchSize),r=e.map((function(t){return t.key}));return n.mget(r).then((function(t){e.forEach((function(e,r){var i=e.key,o=e.deferred;if(r<t.length){var a=t[r];o.resolve(a)}else n.retrieve(i).then(o.resolve,o.reject)}))}),(function(t){e.forEach((function(e){return e.deferred.reject(t)}))})),t})),this.mget=t,this.batchSize=r||100}return t.prototype.retrieve=function(t){var e=new w;return this.scheduleItem({key:t,deferred:e}),e.promise},t}();function wt(t){var e=_t(t);return JSON.stringify(e)}function _t(t){return Array.isArray(t)?t.map(_t):function(t){return"object"==typeof t&&null!==t}(t)?Object.keys(t).sort().map((function(e){return[e,_t(t[e])]})):t}function St(t,e){var n=t.clientX,r=t.clientY,i=e.getBoundingClientRect();return{x:n-i.left,y:r-i.top}}var Ct=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kt=function(){function t(t){this.subscribeFunction=t}return t.prototype.subscribe=function(t){var e=new It("object"==typeof t?t:{next:t}),n=this.subscribeFunction(e);return e.setUnsubscribeCallback("object"==typeof n?function(){return n.unsubscribe()}:n),e},t.prototype.map=function(e){var n=this;return new t((function(t){return n.subscribe({next:function(n){return t.next(e(n))},complete:function(){return t.complete()}})}))},t.prototype.filter=function(e){var n=this;return new t((function(t){return n.subscribe({next:function(n){e(n)&&t.next(n)},complete:function(){return t.complete()}})}))},t.prototype.toPromise=function(){var t=this;return new vt((function(e){var n;t.subscribe({next:function(t){n=t},complete:function(){e(n)}})}))},t.prototype.takeOne=function(){var e=this;return new t((function(t){var n=e.subscribe({next:function(e){n&&n.unsubscribe(),t.next(e),t.complete()},complete:function(){t.complete()}});return t.isClosed()&&n.unsubscribe(),n}))},t.prototype.waitForFirst=function(){var t=this;return new vt((function(e,n){var r=!1;t.takeOne().subscribe({next:function(t){r=!0,e(t)},complete:function(){r||n(new Pt)}})}))},t.prototype.takeUntil=function(e){var n=this;return new t((function(t){var r,i;if((i=n.subscribe({next:function(e){t.next(e)},complete:function(){o()}})).isClosed())return function(){};function o(){t.complete(),a()}function a(){i&&i.unsubscribe(),r&&r.unsubscribe()}return r=e.subscribe({next:function(){o()},complete:function(){o()}}),a}))},t}(),Pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e}(p),It=function(){function t(t){this.subscriber=t}return t.prototype.next=function(t){this.subscriber&&this.subscriber.next&&this.subscriber.next(t)},t.prototype.complete=function(){this.subscriber&&this.subscriber.complete&&this.subscriber.complete(),this.subscriber=void 0},t.prototype.unsubscribe=function(){this.subscriber&&(this.subscriber=void 0,this.unsubscribeCallback&&this.unsubscribeCallback.apply(void 0))},t.prototype.isClosed=function(){return!this.subscriber},t.prototype.setUnsubscribeCallback=function(t){this.unsubscribeCallback=t},t}();function At(t){return new kt((function(e){var n;return t.then((function(t){e.isClosed()||(n=t.subscribe(e))})).catch((function(t){throw e.complete(),t})),function(){n&&n.unsubscribe()}}))}var Et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dt=function(t){function e(){var e=t.call(this,(function(t){if(e.isCompleted)return t.complete(),function(){};var n=(e.subscriberIdCounter++).toString();return e.subscribers[n]=t,e.onNewSubscriber(t),function(){delete e.subscribers[n]}}))||this;return e.subscribers={},e.subscriberIdCounter=1,e.isCompleted=!1,e}return Et(e,t),e.prototype.next=function(t){var e=this;Object.keys(this.subscribers).forEach((function(n){e.subscribers[n].next(t)}))},e.prototype.complete=function(){var t=this;Object.keys(this.subscribers).forEach((function(e){return t.subscribers[e].complete()})),this.subscribers={},this.isCompleted=!0},e.prototype.subscriberCount=function(){return Object.keys(this.subscribers).length},e.prototype.isClosed=function(){return this.isCompleted},e.prototype.onNewSubscriber=function(t){},e}(kt),xt=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return Et(e,t),e.prototype.next=function(e){this.value=e,t.prototype.next.call(this,e)},e.prototype.onNewSubscriber=function(t){t.next(this.value)},e}(Dt);function Mt(t){var e=/^([\s\S]+?[.!?])\s+([\s\S]+)/.exec(t);return e?[e[1],e[2]||void 0]:[t,void 0]}function Tt(){return new vt((function(){}))}var Ft="api.scrivito.com"},function(e,n){e.exports=t},function(t,e,n){"use strict";n.d(e,"a",(function(){return Ct})),n.d(e,"b",(function(){return Lt})),n.d(e,"d",(function(){return S})),n.d(e,"k",(function(){return O})),n.d(e,"c",(function(){return Rt})),n.d(e,"p",(function(){return vt})),n.d(e,"q",(function(){return bt})),n.d(e,"u",(function(){return _t})),n.d(e,"v",(function(){return wt})),n.d(e,"w",(function(){return jt})),n.d(e,"x",(function(){return Ot})),n.d(e,"z",(function(){return St})),n.d(e,"t",(function(){return xt})),n.d(e,"A",(function(){return At})),n.d(e,"n",(function(){return Pt})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return K})),n.d(e,"h",(function(){return q})),n.d(e,"C",(function(){return L})),n.d(e,"j",(function(){return Q})),n.d(e,"l",(function(){return F})),n.d(e,"i",(function(){return T})),n.d(e,"m",(function(){return x})),n.d(e,"o",(function(){return M})),n.d(e,"g",(function(){return R})),n.d(e,"r",(function(){return f})),n.d(e,"s",(function(){return p})),n.d(e,"B",(function(){return d})),n.d(e,"D",(function(){return l})),n.d(e,"y",(function(){return $t}));var r={};n.r(r),n.d(r,"deserialize",(function(){return qt}));n(29),n(30);var i=n(1),o=n(0),a=n(63);var u,c=n(5),s=n(7);function f(){return["workspace",p()]}function p(){return u||"published"}function l(t){u=t}function d(){u=void 0}var h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},b=function(){function t(t,e,n,r){if(this._id=t,this._obj=e,this.preserializedAttributes=r,!e){if(!n||!(i=n._objClass)||"string"!=typeof i[0])throw new o.a('Please provide a widget class as the "_objClass" property.');this.attributesToBeSaved=n}var i}return t.build=function(e,n){return new t(e,n)},t.newWithSerializedAttributes=function(e){var n={},r={};return Object.keys(e).forEach((function(i){var a=e[i];if("_obj_class"!==i){if(Array.isArray(a)){var u=a[0],c=a[1];if("widgetlist"===u){var s=c.map((function(e){return t.newWithSerializedAttributes(e)})),f=Object(o.t)(i);return void(n[f]=[s,["widgetlist"]])}}r[i]=a}else n._objClass=[a]})),new t(void 0,void 0,n,r)},t.create=function(e){return new t(void 0,void 0,Kt(e))},t.createWithUnknownValues=function(e){return new t(void 0,void 0,e)},t.prototype.id=function(){return this.failIfNotPersisted(),this._id},t.prototype.objClass=function(){return this.isPersisted()?this.getAttributeData("_obj_class"):this.attributesToBeSaved._objClass[0]},t.prototype.obj=function(){return this.failIfNotPersisted(),this._obj},t.prototype.objSpaceId=function(){return this.obj().objSpaceId()},t.prototype.widget=function(t){return this.obj().widget(t)},t.prototype.workspaceId=function(){return this.obj().workspaceId()},t.prototype.modification=function(t){return Object(s.o)(t,f(),this.obj().id(),this.id())},t.prototype.get=function(t,e){return Gt(this,t,e)},t.prototype.container=function(){return Object(s.i)("for performance reasons, avoid this method when rendering"),this.containingField().getContainer()},t.prototype.update=function(t){var e=Kt(t);this.updateWithUnknownValues(e)},t.prototype.updateWithUnknownValues=function(t){var e=this;Object(c.j)((function(){Yt(e.obj(),t);var n=it(t);e.updateSelf(n)}))},t.prototype.insertBefore=function(t){t.obj().insertWidget(this,{before:t})},t.prototype.insertAfter=function(t){t.obj().insertWidget(this,{after:t})},t.prototype.remove=function(){this.obj().removeWidget(this)},t.prototype.copy=function(){return this.isPersisted()?this.copyPersisted():this.copyUnpersisted()},t.prototype.persistInObjIfNecessary=function(t){this.isPersisted()||this.persistInObj(t)},t.prototype.persistInObj=function(t){var e=this.attributesToBeSaved;Yt(t,e);var n=h(h({},it(e)),this.preserializedAttributes);this._obj=t,this._id=t.generateWidgetId(),this.updateSelf(n),this.executeDidPersistCallback()},t.prototype.isPersisted=function(){return!!this._obj},t.prototype.onDidPersist=function(t){if(this.isPersisted())throw new o.m('Cannot call "onDidPersist" of an already persisted widget');this.onDidPersistCallback=t},t.prototype.hasOnDidPersistCallback=function(){return!!this.onDidPersistCallback},t.prototype.finishSaving=function(){return this.obj().finishSaving()},t.prototype.equals=function(e){return e instanceof t&&(this.id()===e.id()&&this.obj().id()===e.obj().id())},t.prototype.containingField=function(){return this.obj().fieldContainingWidget(this)},t.prototype.toPrettyPrint=function(){return"[object "+this.objClass()+' id="'+this.id()+'" objId="'+this.obj().id()+'"]'},t.prototype.getAttributeData=function(t){return this.obj().getWidgetAttribute(this.id(),t)},t.prototype.getData=function(){return this.obj().getWidgetData(this.id())},t.prototype.failIfNotPersisted=function(){if(!this.isPersisted())throw new o.m("Can not access a new widget before it has been saved.")},t.prototype.updateSelf=function(t){var e,n={_widgetPool:[(e={},e[this.id()]=t,e)]};this.obj().update(n)},t.prototype.executeDidPersistCallback=function(){this.onDidPersistCallback&&(this.onDidPersistCallback(this),delete this.onDidPersistCallback)},t.prototype.copyPersisted=function(){var e=Zt(this);return t.newWithSerializedAttributes(e)},t.prototype.copyUnpersisted=function(){var e=new t(void 0,void 0,Object(i.mapObject)(this.attributesToBeSaved,v));return this.onDidPersistCallback&&e.onDidPersist(this.onDidPersistCallback),e},t}();function v(t){if(Xt(t)){var e=t[0],n=t[1];return[(Array.isArray(e)?e:[e]).map((function(t){return t.copy()})),n]}return t.slice(0)}var y=n(13),g=function(){function t(t,e){this.workspaceId=t,this.facet=e}return t.prototype.name=function(){return this.facet.name},t.prototype.count=function(){return this.facet.count},t.prototype.includedObjs=function(){var t=At(["workspace",this.workspaceId]).and(xt);return Object(i.compact)(this.facet.includedObjIds.map((function(e){return jt(t,e)})))},t}(),m=function(){return(m=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},j=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},O=["contains","containsPrefix","equals","startsWith","isGreaterThan","isLessThan","linksTo","refersTo"],w=["equals","startsWith","isGreaterThan","isLessThan"],_=["contains","containsPrefix"],S=function(){function t(t,e){this._workspaceId=t,this._query=e?j(e.query):[],this._boost=(null==e?void 0:e.boost)||[],this._batchSize=null==e?void 0:e.batchSize,this._offset=null==e?void 0:e.offset,this._orderBy=null==e?void 0:e.orderBy,this._includeDeleted=null==e?void 0:e.includeDeleted}return t.fromParams=function(e,n){return new t(e,n)},t.prototype.and=function(e,n,r,a){if(e instanceof t)this._query=j(this._query,e._query);else{if(void 0===n)throw new o.a("Missing operator to search with");if(void 0===r)throw new o.a('Missing value to search (specify "null" for missing)');var u=k(e,n,r);a&&(!function(t){if(!Object(i.contains)(_,t))throw new o.a('Boosting operator "'+t+'" is invalid.')}(n),u.boost=function(t){var e={};return Object.keys(t).forEach((function(n){var r=t[n],i=I(n);e[i]=r})),e}(a)),this._query.push(u)}return this},t.prototype.andNot=function(t,e,n){var r=k(t,e,n);return function(t){if(!Object(i.contains)(w,t))throw new o.a('Negating operator "'+t+'" is invalid.')}(e),r.negate=!0,this._query.push(r),this},t.prototype.boost=function(t,e,n,r){var i=k(t,e,n);return this._boost.push({condition:[i],factor:r}),this},t.prototype.offset=function(t){return this._offset=t||void 0,this},t.prototype.order=function(t,e){var n=Array.isArray(t)?t:[[t,e]];return this._orderBy=n.map((function(t){return Array.isArray(t)?A(t[0],t[1]):A(t)})),this},t.prototype.batchSize=function(t){return this._batchSize=t,this},t.prototype.includeDeleted=function(){return this._includeDeleted=!0,this},t.prototype.excludeDeleted=function(){return this._includeDeleted=void 0,this},t.prototype.count=function(){return this.getObjDataQuery().count()},t.prototype.first=function(){return this.take(1)[0]||null},t.prototype.take=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];D.apply(void 0,j([t],e));var r=this._batchSize;try{return this._batchSize=void 0===t?1e3:t,Object(o.s)(this,t)}finally{this._batchSize=r}},t.prototype.iterator=function(){return C(this.getObjDataQuery().iterator())},t.prototype.iteratorFromContinuation=function(t){return C(this.getObjDataQuery().iteratorFromContinuation(t))},t.prototype.getObjDataQuery=function(){return Object(s.n)(this.workspaceId(),this.queryParams(),this.getBatchSize())},t.prototype.getBatchSize=function(){return this._batchSize||100},t.prototype.suggest=function(t,e){var n=m({attributes:["*"],limit:5},e),r=n.attributes,i=n.limit;return Object(s.x)(this.workspaceId(),t,{attributes:r,limit:i},this.queryParams())},t.prototype.facet=function(t,e){var n,r=this;return n=void 0===e?{}:function(t){var e=i.without.apply(void 0,j([Object.keys(t)],E));if(e.length)throw new o.a("Invalid facet options: "+Object(o.T)(e)+". Valid options: "+E);return t}(e),new s.a(this.workspaceId(),I(t),n,this._query).result().map((function(t){return new g(r.workspaceId(),t)}))},t.prototype.workspaceId=function(){return this._workspaceId},t.prototype.params=function(){return m(m({},this.queryParams()),{batchSize:this._batchSize})},t.prototype.queryParams=function(){var t={query:this._query};return void 0!==this._boost&&(t.boost=this._boost),void 0!==this._offset&&(t.offset=this._offset),void 0!==this._orderBy&&(t.orderBy=this._orderBy),void 0!==this._includeDeleted&&(t.includeDeleted=this._includeDeleted),t},t}();function C(t){return{next:function(){var e=t.next();return e.done?{done:!0}:{done:!1,value:new Rt(e.value)}},continuation:function(){return t.continuation()}}}function k(t,e,n){return{field:function(t){if(Array.isArray(t))return t.map((function(t){return I(t)}));return I(t)}(t),operator:function(t){if(!function(t){return Object(i.contains)(O,t)}(t))throw new o.a('Operator "'+t+'" is invalid.');return Object(o.db)(t)}(e),value:function(t){if(Array.isArray(t))return t.map((function(t){return P(t)}));return P(t)}(n)}}function P(t){return Object(i.isDate)(t)?Object(o.E)(t):t instanceof Rt?t.id():t}function I(t){if(!Object(o.H)(t))throw new o.a('Attribute name "'+t+'" is not camel case.');return Object(o.db)(t)}function A(t,e){return void 0===e&&(e="asc"),[I(t),e]}var E=["limit","includeObjs"];var D=Object(o.u)("objSearch.take",[["count",o.ab.maybe(o.k)]],{docPermalink:"js-sdk/ObjSearch-take"}),x=o.ab.irreducible("Obj",(function(t){return W(t,Rt)})),M=o.ab.irreducible("Widget",(function(t){return W(t,b)})),T=o.ab.irreducible("Link",(function(t){return W(t,Lt)})),F=o.ab.irreducible("ObjSearch",(function(t){return W(t,S)})),R=o.ab.irreducible("Binary",(function(t){return t instanceof K}));function W(t,e){return!!t&&t._scrivitoPrivateContent instanceof e}var N,B=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function L(t){N=t}var q=function(){function t(t,e){void 0===e&&(e={});var n=e.filename;if(this.contentType=e.contentType,t.idToCopy)this.idToCopy=t.idToCopy;else{var r=t.source;this.source=r,this.contentType||(this.contentType=r.type),n||(n=r.name)}n&&(this.filename=n.replace(/[^\w\-_\.$]/g,"-"))}return t.prototype.into=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return U.apply(void 0,B([t],e)),Object(c.e)("Changing CMS content"),this.intoId(t._scrivitoPrivateContent.id())},t.prototype.intoId=function(t){if(!N)throw new o.j("No binaryHandler defined!");var e;if(this.idToCopy)e=N.copyBinary(this.idToCopy,t,this.filename,this.contentType);else{if(!this.source)throw new o.j("Source is not defined!");e=N.uploadBinary(t,this.source,this.filename,this.contentType)}return e.then((function(t){var e=t.id;return new K(e,f())}))},t}(),U=Object(o.u)("FutureBinary#into",[["target",x]],{docPermalink:"js-sdk/FutureBinary-into"});var V,z=n(4),H=n(10);!function(t){t.Date="date",t.Number="number",t.String="string",t.Stringlist="stringlist"}(V||(V={}));var Q=function(){function t(t,e){void 0===e&&(e=s.e),this._binaryId=t,this.objSpaceId=e,this._binaryId&&(this.loadableData=G.get(this._binaryId,this.objSpaceId))}return t.prototype.get=function(t){Object(s.g)("MetadataCollection#get"),function(t){if(!Object(o.H)(t))throw new o.a('Metadata key "'+t+'" is not in camel case.')}(t);var e=this.getData();if(e){var n=Object(o.db)(t);return e.hasOwnProperty(n)?e[n]:null}return null},t.prototype.keys=function(){var t=this.getData();return t?Object.keys(t).map(o.t):[]},t.prototype.contentLength=function(){var t=this.get("contentLength");return"number"!=typeof t?0:t},t.prototype.contentType=function(){var t=this.get("contentType");return"string"!=typeof t?"":t},t.prototype.binaryId=function(){return this._binaryId},t.prototype.getData=function(){if(this.loadableData){var t=this.loadableData.get();if(t)return J(t)}},t}();var G=new z.a({recordedAs:"metadata",state:function(){return c.f.subState("metadataCollection")},loader:function(t,e,n){return H.c.retrieveBinaryMetadata(t,{accessVia:n})}});function J(t){for(var e=t.meta_data,n={},r=0,i=Object.keys(e);r<i.length;r++){var a=i[r],u=e[a],c=u[0],s=u[1];if(null==s)throw new o.j('Invalid backend value "null" or "undefined" for metadata "'+a+'"');var f=void 0;if(c===V.Date){if("string"!=typeof s)throw new o.j('Invalid non-string backend value for a date metadata "'+a+'"');f=Object(o.z)(s)}else f=s;n[a]=f}return n}var Z=function(){return(Z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Y=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},X=new z.a({recordedAs:"binary",state:function(){return c.f.subState("binary")},loader:function(t,e,n){var r=t[0],i=t[1];return H.c.retrieveBinaryUrls(r,i,{accessVia:n})}});var K=function(){function t(t,e,n){void 0===e&&(e=s.e),void 0===n&&(n={}),this._id=t,this._objSpaceId=e,this._transformation=n||void 0,this._loadableData=X.get([this._id,this._transformation],this._objSpaceId)}return t.upload=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(et.apply(void 0,Y([t,e],n)),!(o.i.is(t)||e&&e.filename))throw new o.a("Expected a filename to be passed with Blob as the source.");return new q({source:t},e)},t.prototype.id=function(){return this._id},t.prototype.copy=function(t){return new q({idToCopy:this._id},t)},t.prototype.isPrivate=function(){return!Object(s.s)(this._objSpaceId,s.e)},t.prototype.optimizeFor=function(e){return new t(this._id,this._objSpaceId,Z(Z({},this._transformation),e))},t.prototype.original=function(){return new t(this._id,this._objSpaceId,{})},t.prototype.raw=function(){return new t(this._id,this._objSpaceId,null)},t.prototype.isExplicitlyTransformed=function(){return this.isTransformed()&&!Object(i.isEmpty)(this._transformation)},t.prototype.isRaw=function(){return!this.isTransformed()},t.prototype.url=function(){return Object(s.g)("Binary#url"),this.urlWithoutPlaceholder()||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},t.prototype.urlWithoutPlaceholder=function(){var t=this._loadableData.get();if(t){var e=t[this.accessType()];if(!e)throw new o.j("Missing key "+this.accessType+" in binary data");return e.get.url}},t.prototype.filename=function(){var t=this.url();return!t||t.match(/^data:/)?"":y(t).path().split("/").pop()||""},t.prototype.metadata=function(){return this.assertNotTransformed("Metadata"),new Q(this._id,this._objSpaceId)},t.prototype.contentType=function(){return this.assertNotTransformed("Content type"),this.metadata().contentType()},t.prototype.contentLength=function(){return this.assertNotTransformed("Content length"),this.metadata().contentLength()},t.prototype.extname=function(){if(this.raw().filename().indexOf(".")>-1){var t=/[^.\\]*$/.exec(this.raw().filename());if(t)return t[0].toLowerCase()}return""},t.prototype.equals=function(t){return this.id()===t.id()&&Object(s.s)(this._objSpaceId,t.objSpaceId())&&Object(i.isEqual)(this.definition(),t.definition())},t.prototype.isImage=function(){var t=this.raw().contentType();return!!t&&"image"===t.split("/")[0]},t.prototype.definition=function(){return this._transformation||null},t.prototype.objSpaceId=function(){return this._objSpaceId},t.prototype.accessType=function(){return this.isPrivate()?"private_access":"public_access"},t.prototype.assertNotTransformed=function(t){if(this.isTransformed())throw new o.m('"'+t+'" is not available for transformed images. Use "Scrivito.Binary#raw" to access the untransformed version of the image.')},t.prototype.isTransformed=function(){return!!this._transformation},t}(),$=o.ab.struct({contentType:o.ab.maybe(o.ab.String),filename:o.ab.maybe(o.ab.String)}),tt=o.ab.refinement(o.ab.Object,(function(t){return o.d.is(t)||o.i.is(t)}),"Blob or File"),et=Object(o.u)("Binary.upload",[["source",tt],["options",o.ab.maybe($)]],{docPermalink:"js-sdk/Binary-static-upload"});function nt(t){if(t instanceof Lt)return!t.isEmpty();if(!Object(i.isObject)(t))return!1;if(Object(i.isEmpty)(Object(i.compact)(Object(i.values)(t))))return!1;var e=Object(i.without)(Object.keys(t),"hash","obj_id","query","rel","target","title","url");return Object(i.isEmpty)(e)}function rt(t){var e,n=t instanceof Lt?{rel:(e=t).rel()||void 0,query:e.query(),target:e.target(),title:e.title(),url:e.url(),obj_id:e.objId(),fragment:e.hash()}:function(t){return{obj_id:t.obj_id||null,query:t.query||null,rel:t.rel||void 0,target:t.target||null,title:t.title||null,url:t.url||null,fragment:t.hash||null}}(t);return n.rel||delete n.rel,n}function it(t){var e={};return Object.keys(t).forEach((function(n){var r=t[n],i=r[0],a=r[1],u=function(t){if(!Object(o.H)(t))throw new o.a("Attribute names have to be in camel case.");return Object(o.db)(t)}(n);if(Object(o.J)(u))e[u]=i;else{var c=a[0],s=a[1];e[u]=[ot(c,n),ut(at(c,s,i,n))]}})),e}function ot(t,e){switch(t){case"datetime":return"date";case"enum":return"string";case"float":case"integer":return"number";case"multienum":return"stringlist";case"binary":case"date":case"html":case"link":case"linklist":case"reference":case"referencelist":case"string":case"stringlist":case"widgetlist":return t;default:throw new o.a('Attribute "'+e+'" is of unsupported type "'+t+'".')}}function at(t,e,n,r){if(null===n)return n;switch(t){case"binary":return function(t,e){if(t instanceof K)return{id:t.id()};ct(t,e,"A Binary.")}(n,r);case"date":case"datetime":return st(n,r);case"enum":return function(t,e,n){var r=t.values;if(Object(i.contains)(r,e))return e;ct(e,n,'Valid attribute values are contained in its "values" array ['+r+"].")}(e,n,r);case"float":return function(t,e){if(Object(o.L)(t))return t;var n=t;Object(i.isNumber)(t)&&(n=String(t));ct(n,e,"A Number, that is #isFinite().")}(n,r);case"html":return function(t,e){if(Object(i.isString)(t))return t;ct(t,e,"A String.")}(n,r);case"integer":return function(t,e){if(Object(o.M)(t))return t;ct(t,e,"A Number, that is #isSafeInteger().")}(n,r);case"link":return function(t,e){if(nt(t))return rt(t);ct(t,e,"A Link instance with a destination.")}(n,r);case"linklist":return function(t,e){if(Array.isArray(t)&&t.every(nt))return t.map(rt);ct(t,e,"An array of Link instances with destinations set.")}(n,r);case"multienum":return function(t,e,n){var r=t.values,a="An array with values from "+Object(o.T)(r)+".";Array.isArray(e)&&e.every(i.isString)||ct(e,n,a);var u=Object(i.difference)(e,r);if(u.length){var c=a+" Forbidden values: "+Object(o.T)(u)+".";ct(e,n,c)}return e}(e,n,r);case"reference":return function(t,e){if(pt(t))return ft(t);ct(t,e,"An Obj.")}(n,r);case"referencelist":return function(t,e){if(function(t){return Array.isArray(t)&&t.every((function(t){return pt(t)}))}(t))return t.map(ft);ct(t,e,"An array with Objs.")}(n,r);case"string":return function(t,e){if(lt(t))return t.toString();ct(t,e,"A String.")}(n,r);case"stringlist":return function(t,e){if(Array.isArray(t)&&t.every((function(t){return lt(t)})))return t.map((function(t){return t.toString()}));ct(t,e,"An array of strings.")}(n,r);case"widgetlist":return function t(e,n){if(e instanceof b)return t([e],n);if(Array.isArray(e)&&e.every((function(t){return t instanceof b})))return e.map((function(t){return t.id()}));ct(e,n,"An array of BasicWidget instances.")}(n,r);default:throw new o.j('serializeAttributeValue is not implemented for "'+t+'".')}}function ut(t){return(Object(i.isString)(t)||Array.isArray(t))&&Object(i.isEmpty)(t)?null:t}function ct(t,e,n){throw new o.a("Unexpected value "+Object(o.T)(t)+' for attribute "'+e+'". Expected: '+n)}function st(t,e){return Object(i.isDate)(t)?Object(o.E)(t):Object(o.K)(t)?t:void ct(t,e,"A Date.")}function ft(t){return t instanceof Rt?t.id():"string"==typeof t?t:t.id}function pt(t){return Object(i.isString)(t)||t instanceof Rt||function(t){return!!Object(i.isObject)(t)&&"string"==typeof t.id}(t)}function lt(t){return Object(i.isString)(t)||Object(i.isNumber)(t)}var dt=function(){return(dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ht=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function bt(t,e){var n=e._id,r=e._objClass,i=ht(e,["_id","_objClass"]),o=mt(r);return gt(t,mt(n)||Rt.generateId(),{_obj_class:o},i)}function vt(t,e,n){var r=mt(n._id)||Rt.generateId();return K.upload(e).intoId(r).then((function(e){var i=bt(t,dt(dt({},n),{_id:[r],blob:[e,["binary"]]}));return i.finishSaving().then((function(){return i}))}))}function yt(t,e){var n=function(t){var e=dt({},t),n={};return Object.keys(t).forEach((function(r){var i,a=t[r];if(i=a,Array.isArray(i)&&"widgetlist"===i[0]){var u=a[1].map((function(t){return b.newWithSerializedAttributes(t)})),c=Object(o.t)(r);n[c]=[u,["widgetlist"]],delete e[r]}})),[e,n]}(e),r=n[0],i=n[1];return gt(t,r._id,r,i)}function gt(t,e,n,r){var i=t.create(e,n);return i.update(r),i}function mt(t){var e=Array.isArray(t)?t[0]:t;return"string"==typeof e?e:void 0}function jt(t,e){var n=t.get(e);return n instanceof Rt?n:null}function Ot(t,e){return t.get(e)}function wt(t,e,n){var r,i=t.search().and(e,"equals",n),o=i.first();return o&&o.isDeleted()&&null!==(r=i.excludeDeleted().first())&&void 0!==r?r:o}function _t(t,e,n){return t.search().and(e,"equals",n).take()}function St(t){return wt(t,"_path","/")}var Ct=function(){function t(t,e,n){this.container=t,this.attributeName=e,this.typeInfo=n,this.typeOptions=this.typeInfo[1]||{}}return t.prototype.get=function(){return Gt(this.container,this.attributeName,this.typeInfo)},t.prototype.update=function(t){var e;this.container.update(((e={})[this.attributeName]=[t,this.typeInfo],e))},t.prototype.getContainer=function(){return this.container},t.prototype.obj=function(){return this.container.obj()},t.prototype.name=function(){return this.attributeName},t.prototype.type=function(){return this.typeInfo[0]},t.prototype.workspaceId=function(){return this.obj().workspaceId()},t.prototype.equals=function(e){return e instanceof t&&(this.container.equals(e.getContainer())&&this.attributeName===e.name())},t.prototype.validClasses=function(){return this.typeOptions.validClasses},t.prototype.getDiff=function(t){var e=this.obj(),n=this.container===e?void 0:this.container.id();return Object(s.l)(t,e.objSpaceId(),this.attributeName,e.id(),n)},t.prototype.toString=function(){var t=this.obj(),e=this.attributeName;return this.container===t?"<BasicField name="+e+" objId="+t.id()+">":"<BasicField name="+e+" objId="+t.id()+" widgetId="+this.container.id()+">"},t.prototype.id=function(){var t=this.obj();return this.container===t?this.attributeName+"|"+t.id():this.attributeName+"|"+t.id()+"|"+this.container.id()},t}(),kt=n(28),Pt=function(){function t(t,e){this._id=t,this._reason=e}return t.prototype.id=function(){return this._id},t.prototype.isForbidden=function(){return"forbidden"===this._reason},t.prototype.isNonexistent=function(){return"nonexistent"===this._reason},t.prototype.isNotLoaded=function(){return"notLoaded"===this._reason},t.prototype.reason=function(){return this._reason},t}(),It=function(){return(It=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function At(t){return new Et(t)}var Et=function(){function t(t){this.objSpaceId=t}return t.prototype.get=function(t){var e=Object(s.m)(this.objSpaceId,t);return e?e.isUnavailable()?e.isForbidden()?new Pt(t,"forbidden"):new Pt(t,"nonexistent"):new Rt(e):new Pt(t,"notLoaded")},t.prototype.search=function(){var t=this.objSpaceId,e=t[0],n=t[1];if("workspace"!==e)throw new o.j;return new S(n).includeDeleted()},t.prototype.create=function(t,e){var n=e._obj_class;if(!n)throw new o.j;var r=It({_obj_class:n,_id:t},e);return new Rt(Object(s.h)(this.objSpaceId,t,r))},t.prototype.and=function(t){return new Dt(this,t)},t}(),Dt=function(){function t(t,e){this.originalScope=t,this.transformation=e}return t.prototype.get=function(t){var e=this.originalScope.get(t);return e instanceof Rt&&!this.transformation.isInScope(e)?new Pt(t,"nonexistent"):e},t.prototype.search=function(){var t=this.originalScope.search();return this.transformation.applyToSearch(t),t},t.prototype.create=function(t,e){return this.originalScope.create(t,this.transformation.applyToCreate(e))},t.prototype.and=function(e){return new t(this,e)},t}(),xt={isInScope:function(t){return!t.isDeleted()},applyToSearch:function(t){return t.excludeDeleted()},applyToCreate:function(t){return t}};var Mt=function(){return(Mt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Tt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Ft=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},Rt=function(){function t(t){this.objData=t}return t.get=function(t){return jt(Wt(),t)},t.getInObjSpace=function(t,e){return jt(Nt(t),e)},t.getIncludingDeleted=function(t){return jt(At(f()),t)},t.create=function(t){return bt(At(f()),t)},t.createInObjSpace=function(t,e){return bt(At(t),e)},t.addChildWithSerializedAttributes=function(e,n){var r=t.generateId();return yt(At(f()),Mt(Mt({},n),{_id:r,_path:Object(o.F)(e,r)}))},t.generateId=function(){return Object(o.W)()},t.all=function(){return new S(p()).batchSize(1e3)},t.where=function(t,e,n,r){return new S(p()).and(t,e,n,r)},t.getByPermalink=function(t){return wt(Wt(),"_permalink",t)},t.getAllByPermalink=function(t){return _t(Wt(),"_permalink",t)},t.generateWidgetId=function(){return Object(o.V)()},t.prototype.id=function(){return this.objData.id()},t.prototype.objClass=function(){return this.getAttributeData("_obj_class")},t.prototype.obj=function(){return this},t.prototype.createdAt=function(){return Object(o.S)(this.getAttributeData("_created_at"))},t.prototype.createdBy=function(){return this.getAttributeData("_created_by")||null},t.prototype.lastChanged=function(){var t=this.getAttributeData("_last_changed");return t?Object(o.S)(t):null},t.prototype.lastChangedBy=function(){return this.getAttributeData("_last_changed_by")||null},t.prototype.objSpaceId=function(){return this.objData.objSpaceId()},t.prototype.version=function(){return this.getAttributeData("_version")},t.prototype.workspaceId=function(){return this.objData.workspaceId()},t.prototype.path=function(){return this.getAttributeData("_path")||null},t.prototype.permalink=function(){return this.getAttributeData("_permalink")||null},t.prototype.siteId=function(){var t;return null!==(t=this.getAttributeData("_site_id"))&&void 0!==t?t:null},t.prototype.parentPath=function(){var t=this.path();return t&&"/"!==t?function(t){var e=t.split("/");return e.pop(),1===e.length?"/":e.join("/")}(t):null},t.prototype.parent=function(){var t=this.parentPath();return t?this.getObjByPath(t):null},t.prototype.hasConflicts=function(){return!!this.getAttributeData("_conflicts")},t.prototype.modification=function(){return this.objData.isUnavailable()||this.getAttributeData("_marked_deleted")?"deleted":this.getAttributeData("_modification")||null},t.prototype.get=function(t,e){return Gt(this,t,e)},t.prototype.isModified=function(){return!!this.modification()},t.prototype.isNew=function(){return"new"===this.modification()},t.prototype.isEdited=function(){return"edited"===this.modification()},t.prototype.isDeleted=function(){return"deleted"===this.modification()},t.prototype.contentLength=function(){return this.metadata().contentLength()},t.prototype.contentType=function(){return this.metadata().contentType()},t.prototype.contentUrl=function(){var t;return(null===(t=this.blob())||void 0===t?void 0:t.url())||""},t.prototype.metadata=function(){var t=this.blob();return t?new Q(t.id(),this.objSpaceId()):new Q},t.prototype.children=function(){var t=this.getChildrenSearch();return t?t.take():[]},t.prototype.hasChildren=function(){var t=this.getChildrenSearch();return!!t&&t.batchSize(0).count()>0},t.prototype.orderedChildren=function(){var e=this.children(),n=this.get("childOrder","referencelist");if(!Array.isArray(n))return e;var r=n.map((function(e){return e instanceof t&&e.id()}));return Object(i.sortBy)(e,(function(t){var e=r.indexOf(t.id());return-1===e?n.length:e}))},t.prototype.backlinks=function(){return this.objSpaceExcludingDeleted().search().and("*","linksTo",this).take()},t.prototype.ancestors=function(){var t=this,e=this.parentPath();return e?function(t){var e=["/"];if("/"===t)return e;var n=t.split("/").slice(1),r="";return n.forEach((function(t){r=r+"/"+t,e.push(r)})),e}(e).map((function(e){return t.getObjByPath(e)})):[]},t.prototype.restriction=function(){return function(t){return t?t[0]:"_public"}(this.getAttributeData("_restriction"))},t.prototype.restrict=function(t){void 0===t&&(t="_auth"),this.update({_restriction:"_public"===t?null:[[t]]})},t.prototype.unrestrict=function(){this.restrict("_public")},t.prototype.isRestricted=function(){return"_public"!==this.restriction()},t.prototype.update=function(t){var e=Kt(t);this.updateWithUnknownValues(e)},t.prototype.updateWithUnknownValues=function(t){var e=this;Object(c.j)((function(){Yt(e,t);var n=it(t);e.objData.update(n)})),this.startLinkResolution()},t.prototype.destroy=function(){this.update({_markedDeleted:[!0]})},t.prototype.insertWidget=function(t,e){var n,r=function(t){return function(t){return!!t.before}(t)?t.before.id():t.after.id()}(e),i=this.widgetPlacementFor(r);if(i){var o=i.attributeValue,a=i.attributeName,u=i.container,c=i.index,s=e.before?c:c+1,f=Ft(o.slice(0,s),[t],o.slice(s));u.update(((n={})[a]=[f,["widgetlist"]],n))}},t.prototype.removeWidget=function(t){var e=this.fieldContainingWidget(t);if(e){var n=e.get(),r=Object(i.reject)(n,(function(e){return e.equals(t)}));e.update(r)}},t.prototype.siblingWidget=function(t,e){var n=this.widgetPlacementFor(t.id());if(n)return n.attributeValue[n.index+e]},t.prototype.copyAsync=function(t){return void 0===t&&(t={}),function(t){if(Object(i.difference)(Object.keys(t),["_path"]).length)throw new o.a('Currently only "_path" copy option is supported.')}(t),this.copyAttributes().then((function(e){var n=Mt(Mt({},e),t),r=yt(At(f()),n);return r.objData.finishSaving().then((function(){return r}))}))},t.prototype.markResolvedAsync=function(){return this.update({_conflicts:[null]}),this.finishSaving()},t.prototype.finishSaving=function(){var t=this;return this.finishLinkResolution().then((function(){return t.objData.finishSaving()}))},t.prototype.equals=function(e){return e instanceof t&&this.id()===e.id()},t.prototype.widget=function(t){return this.getWidgetAttribute(t,"_obj_class")?b.build(t,this):null},t.prototype.getWidgetAttribute=function(t,e){return this.objData.getWidgetAttribute(t,e)},t.prototype.widgets=function(){var t=this.objData.getIfExistent();if(!t)return[];var e=t._widget_pool;if(!e)return[];var n=[];return this.collectWidgets(n,t,e,{}),n},t.prototype.fieldContainingWidget=function(t){var e=t.id(),n=this.widgetPlacementFor(e);if(n){var r=n.container,i=n.attributeName;return new Ct(r,i,["widgetlist"])}},t.prototype.generateWidgetId=function(){for(var e=0;e<10;e++){var n=t.generateWidgetId();if(!this.widget(n))return n}throw new o.j("Could not generate a new unused widget id.")},t.prototype.serializeAttributes=function(){var t=Zt(this);t._conflicts,t._modification,t._created_at,t._created_by,t._last_changed,t._last_changed_by;return Tt(t,["_conflicts","_modification","_created_at","_created_by","_last_changed","_last_changed_by"])},t.prototype.slug=function(){var t,e=this.get("title","string");return"string"!=typeof(t=e)?"":a(t)},t.prototype.getWidgetData=function(t){return this.objData.getWidget(t)},t.prototype.startLinkResolution=function(){Object(s.p)()||Object(kt.e)(p(),this.id())},t.prototype.finishLinkResolution=function(){return Object(kt.a)(p(),this.id())},t.prototype.toPrettyPrint=function(){return"[object "+this.objClass()+' id="'+this.id()+'"]'},t.prototype.getAttributeData=function(t){return this.objData.getAttribute(t)},t.prototype.getData=function(){return this.objData.get()},t.prototype.blob=function(){return this.get("blob",["binary"])},t.prototype.copyAttributes=function(){var e=t.generateId(),n=this.serializeAttributes(),r=[];Object.keys(n).forEach((function(t){var i=n[t];if("_"!==t[0]){if(function(t){if(!Array.isArray(t))return!1;var e=t[0],n=t[1];return"binary"===e&&!!n}(i)){var o=i[1],a=new q({idToCopy:o.id}).intoId(e).then((function(e){return{name:t,binary:e}}));r.push(a)}}else delete n[t]}));var i=Mt(Mt({},n),{_id:e,_obj_class:this.objClass(),_restriction:this.isRestricted()?[this.restriction()]:null});return this.path()&&(i._path=this.parentPath()+"/"+e),o.n.all(r).then((function(t){return t.forEach((function(t){var e=t.name,n={id:t.binary.id()};i[e]=["binary",n]})),i}))},t.prototype.collectWidgets=function(t,e,n,r){var i=this;Object.keys(e).map((function(t){var n=e[t];if(n&&!Object(o.J)(t)){var r=n;return Object(H.h)(r)?r[1]:void 0}})).forEach((function(e){e&&e.forEach((function(e){if(!r[e]){r[e]=!0;var o=i.widget(e);if(o){t.push(o);var a=n[e];i.collectWidgets(t,a,n,r)}}}))}))},t.prototype.widgetPlacementFor=function(t){var e=this.objData.getIfExistent();if(e){var n=Object(s.j)(e,t);if(n){var r,i=Object(o.t)(n.attributeName),a=n.parentWidgetId;if(a){if(!(r=this.widget(a)))return}else r=this;return{container:r,attributeName:i,attributeValue:r.get(i,["widgetlist"]),index:n.index,parentWidgetId:a}}}},t.prototype.getObjByPath=function(t){return wt(this.hierarchyObjSpace(),"_path",t)},t.prototype.getChildrenSearch=function(){var t=this.path();if(t)return this.hierarchyObjSpace().search().and("_parentPath","equals",t)},t.prototype.hierarchyObjSpace=function(){return this.objSpaceExcludingDeleted().and((t=this.siteId(),{isInScope:function(e){return e.siteId()===t},applyToSearch:function(e){return e.and("_siteId","equals",t)},applyToCreate:function(){throw new o.j}}));var t},t.prototype.objSpaceExcludingDeleted=function(){return Nt(this.objSpaceId())},t}();function Wt(){return Nt(f())}function Nt(t){return At(t).and(xt)}var Bt=function(){return(Bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Lt=function(){function t(t){this.attributes=Bt({},t)}return t.prototype.title=function(){return this.attributes.title||null},t.prototype.query=function(){return this.attributes.query||null},t.prototype.hash=function(){return this.attributes.hash||null},t.prototype.rel=function(){return this.attributes.rel||null},t.prototype.target=function(){return this.attributes.target||null},t.prototype.url=function(){return this.attributes.url||null},t.prototype.objId=function(){return this.attributes.objId||null},t.prototype.obj=function(){var t=this.objId();return t?Ot(At(f()).and(xt),t):null},t.prototype.queryParameters=function(){return t=this.query()||"",y.parseQuery(t);var t},t.prototype.isExternal=function(){return!!this.url()},t.prototype.isInternal=function(){return!this.isExternal()},t.prototype.equals=function(e){return e instanceof t&&(this.isExternal()?this.hash()===e.hash()&&this.query()===e.query()&&this.rel()===e.rel()&&this.target()===e.target()&&this.title()===e.title()&&this.url()===e.url():this.objId()===e.objId()&&this.title()===e.title())},t.prototype.copy=function(e){void 0===e&&(e={});var n=Bt(Bt({},this.attributes),e);if(e.objId&&e.url)throw new o.a('Link#copy refused: both "objId" and "url" have been specified with truthy values');return e.objId?n.url=null:e.url&&(n.objId=null),new t(n)},t.prototype.isEmpty=function(){return!this.isExternal()&&!this.objId()},t.prototype.hasDestination=function(){return this.isExternal()||this.obj()instanceof Rt},t.prototype.toPrettyPrint=function(){return this.isInternal()?'[object Link objId="'+this.objId()+'"]':'[object Link url="'+this.url()+'"]'},t}();function qt(t,e,n,r){var a=e[0],u=e[1];switch(n){case"binary":return function(t,e,n){return"binary"===t&&e?new K(e.id,n.objSpaceId()):null}(a,u,t);case"date":case"datetime":return Ut(a,u);case"float":return function(t,e){switch(t){case"string":return e.match(/^-?\d+(\.\d+)?$/)?Vt(e):null;case"number":return Vt(e);default:return null}}(a,u);case"enum":return function(t,e,n){var r=n.values;if("string"===t&&Object(i.contains)(r,e))return e;return null}(a,u,r);case"html":return function(t,e){if(Object(i.contains)(["html","string"],t)&&Object(i.isString)(e))return e;return""}(a,u);case"integer":return function(t,e){switch(t){case"string":case"number":return Object(o.A)(e);default:return null}}(a,u);case"link":return function(t,e){return"link"===t&&Object(i.isObject)(e)?zt(e):null}(a,u);case"linklist":return function(t,e){return"linklist"!==t?[]:Array.isArray(e)?Object(i.compact)(e.map(zt)):[]}(a,u);case"multienum":return function(t,e,n){var r=n.values;if("stringlist"!==t||!Array.isArray(e))return[];return Object(i.intersection)(e,r)}(a,u,r);case"reference":return function(t,e,n){if("reference"===t&&e)return Ht(e,n);return null}(a,u,t);case"referencelist":return function(t,e,n){return"referencelist"!==t?[]:e?e.map((function(t){return Ht(t,n)})):[]}(a,u,t);case"string":return function(t,e){if(Object(i.contains)(["html","string"],t)&&Object(i.isString)(e))return e;return""}(a,u);case"stringlist":return function(t,e){if("stringlist"!==t||!Array.isArray(e))return[];return e}(a,u);case"widgetlist":return function(t,e,n){return"widgetlist"===t&&e?e.map((function(t){return n.widget(t)})):[]}(a,u,t);default:return null}}function Ut(t,e){return"date"!==t?null:Object(o.z)(e)}function Vt(t){var e=parseFloat(t);return Object(o.L)(e)?e:null}function zt(t){var e=Object(i.pick)(t,"query","rel","target","title","url");return"fragment"in t&&(e.hash=t.fragment),"obj_id"in t&&(e.objId=t.obj_id),new Lt(e)}function Ht(t,e){return Ot(At(e.objSpaceId()),t)}var Qt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function Gt(t,e,n){return Jt(t,Object(o.db)(e),n)}function Jt(t,e,n){var i=t.getAttributeData(e),o=i&&Array.isArray(i)?i:[];return"string"==typeof n?qt(t,o,n):qt.apply(r,Qt([t,o],n))}function Zt(t){return Object(i.mapObject)(t.getData(),(function(e,n){return function(t){return Array.isArray(t)&&"widgetlist"===t[0]}(e)?["widgetlist",Jt(t,n,["widgetlist"]).map(Zt)]:e}))}function Yt(t,e){Object.keys(e).forEach((function(n){var r=e[n];if(Xt(r)){var i=r[0];(Array.isArray(i)?i:[i]).forEach((function(e){e.persistInObjIfNecessary(t)}))}}))}function Xt(t){if(t.length<2)return!1;var e=t[0];return"widgetlist"===t[1][0]&&(e instanceof b||!!Array.isArray(e)&&e.every((function(t){return t instanceof b})))}function Kt(t){return Object(i.mapObject)(t,(function(t,e){if(Object(o.J)(e))return Array.isArray(t)?t:[t];if(!Array.isArray(t))throw new o.j("Value for "+e+" should be a tuple: [value, typeInfo]");var n=t[0],r=t[1];return"string"==typeof r?[n,[r]]:[n,r]}))}function $t(t,e){var n=t.get(),r=t.getDiff(e);if(!Object(s.q)(r)||!r.content)return n.map((function(t){return{widget:t,modification:null}}));var o=r.content.map((function(r){var i=r[0],o=r[1];switch(i){case"+":return te("new",ee(n,o));case"=":return te(null,ee(n,o));case"-":return te("deleted",function(t,e,n){var r=Rt.getInObjSpace(t,e);return(null==r?void 0:r.widget(n))||void 0}(e,t.obj().id(),o))}}));return Object(i.compact)(o)}function te(t,e){return e&&{widget:e,modification:t}}function ee(t,e){return Object(i.find)(t,(function(t){return t.id()===e}))}},function(t,n){t.exports=e},function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"c",(function(){return p})),n.d(e,"g",(function(){return y})),n.d(e,"b",(function(){return x})),n.d(e,"n",(function(){return F})),n.d(e,"j",(function(){return R})),n.d(e,"k",(function(){return W})),n.d(e,"m",(function(){return L})),n.d(e,"o",(function(){return q})),n.d(e,"i",(function(){return z})),n.d(e,"e",(function(){return Q})),n.d(e,"a",(function(){return U})),n.d(e,"h",(function(){return J})),n.d(e,"l",(function(){return B}));var r=n(0),i=new r.e,o=function(){return i.current()};function a(t){var e={datas:[],incomplete:!1,outdated:!1},n=i.runWith(e,t);return new f(e,n)}function u(){throw new r.m("Content not yet loaded. Forgot to use Scrivito.load or Scrivito.connect? See https://scrivito.com/content-not-yet-loaded-error")}function c(){return void 0!==o()}function s(t,e){var n=o();n&&(n.datas.push(e),"outdated"===t?n.outdated=!0:"incomplete"===t&&(n.incomplete=!0))}var f=function(){function t(t,e){this.captureList=t,this.outdated=t.outdated,this.incomplete=t.incomplete,this.result=e}return t.prototype.forwardToCurrent=function(){var t,e,n,r=o();r?(t=r,e=this.captureList,(n=t.datas).push.apply(n,e.datas),t.incomplete=t.incomplete||e.incomplete,t.outdated=t.outdated||e.outdated):this.incomplete&&u()},t.prototype.getRequiredDatas=function(){return this.captureList.datas},t.prototype.isAllDataLoaded=function(){return!this.incomplete},t.prototype.isAllDataUpToDate=function(){return!this.incomplete&&!this.outdated},t.prototype.subscribeLoading=function(t){var e=this.captureList.datas.map((function(t){return t.subscribeLoading()}));t.unsubscribe(),t.storeUnsubscribe((function(){e.forEach((function(t){return t()}))}))},t}(),p=function(){function t(){}return t.prototype.storeUnsubscribe=function(t){this.unsubscribeCallback=t},t.prototype.unsubscribe=function(){this.unsubscribeCallback&&this.unsubscribeCallback()},t}();function l(t){return function(t){d(t.meta)}(t),t.value}function d(t){if(void 0!==t.error)throw t.error}var h=n(5);function b(t){return new r.o((function(e){var n=new p,i=Object(h.g)((function(){return a((function(){return Object(r.X)(t)}))})).subscribe((function(t){t.subscribeLoading(n);var r=t.result;e.next(r.errorThrown?{meta:{error:r.error,incomplete:t.incomplete,outdated:t.outdated}}:{value:r.result,meta:{incomplete:t.incomplete,outdated:t.outdated}})}));return function(){i.unsubscribe(),n.unsubscribe()}}))}var v=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return g.apply(void 0,v([t],e)),b((function(){return Object(h.k)({contextName:"Scrivito.load",message:"Use an async callback: Scrivito.load(/* ... */).then(/* ... */)."},t)})).filter((function(t){return!t.meta.incomplete&&!t.meta.outdated})).waitForFirst().then(l)}var g=Object(r.u)("load",[["loadableFunction",r.ab.Function]],{docPermalink:"js-sdk/load"}),m={},j={};function O(t,e){var n=(j[t]||0)+e;return j[t]=n,n}function w(t){var e=m[t];e&&e.notifyDataWasSet()}var _,S=(_=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),C=function(t){function e(){return t.call(this,"Data is not yet loaded.",!1)||this}return S(e,t),e}(r.m),k=n(1),P=function(){function t(t,e){var n=this;this.stateContainer=t,this.stream=e,this.notifyRequiredCounter=0,this.scheduleNextState=Object(r.w)(h.a,(function(t){n.isStreamOpen()&&n.stateContainer.set(t)})),this.enqueueStreamRequired=Object(r.w)(r.R,(function(t){return t?n.ensureStreamIsOpen():n.ensureStreamIsClosed()}))}return t.prototype.notifyDataRequired=function(){this.notifyRequiredCounter++,this.enqueueStreamRequired(!0)},t.prototype.notifyDataNoLongerRequired=function(){var t,e,n=this,i=this.notifyRequiredCounter;t=function(){i===n.notifyRequiredCounter&&n.enqueueStreamRequired(!1)},e=Object(k.once)(t),Object(r.fb)(1e4).then(e),I.waitForFirst().then(e)},t.prototype.notifyDataWasSet=function(){},t.prototype.setTidyCallback=function(t){this.tidyCallback=t},t.prototype.isStreamOpen=function(){return!!this.subscription},t.prototype.ensureStreamIsOpen=function(){var t=this;this.subscription||(this.subscription=this.stream.subscribe((function(e){return t.scheduleNextState(e)})))},t.prototype.ensureStreamIsClosed=function(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0,this.tidyCallback&&this.tidyCallback()),this.stateContainer.set(void 0)},t}(),I=new r.p;var A=0,E=function(){function t(t,e,n){this.stateContainer=t,this.loader=e,this.invalidation=n}return t.prototype.notifyDataRequired=function(){this.triggerLoading()},t.prototype.notifyDataNoLongerRequired=function(){},t.prototype.notifyDataWasSet=function(){this.currentLoad=void 0},t.prototype.setTidyCallback=function(){},t.prototype.triggerLoading=function(){var t=this;if(!this.isLoading()){var e=this.stateContainer.subState("meta").get(),n=D(this.invalidation);if(void 0!==e){if(void 0===n)return;if(n===e.version)return}var r=A++,i=function(){return t.currentLoad===r},o=function(e){i()&&Object(h.a)((function(){e(),t.notifyDataWasSet(),u()}))},a=[],u=function(){return a.forEach((function(t){return t()}))};this.loader({push:function(t){return a.push(t)},wasCancelled:function(){return!i()}}).then((function(e){return o((function(){return t.stateContainer.set({value:e,meta:{version:n}})}))}),(function(e){return o((function(){return t.stateContainer.set({meta:{error:e,version:n}})}))})),this.currentLoad=r}},t.prototype.isLoading=function(){return void 0!==this.currentLoad},t}();function D(t){if(t){var e=t();if("number"==typeof e&&isNaN(e)){var n="invalidation callback returned unsuitable version "+e;throw new r.j(n)}return e}}var x=function(){function t(t){this.stateContainer=t.state,this.id=t.state.id(),this.affiliation=t.affiliation,this.options=t}return t.prototype.ensureAvailable=function(){return this.checkIfAvailableMeta(this.getMeta())},t.prototype.get=function(){var t=this.stateContainer.get();if(this.checkIfAvailableState(t))return T(this.id,this),t.value},t.prototype.getAffiliation=function(){return this.affiliation},t.prototype.getWithDefault=function(t){var e=this.stateContainer.get();return this.checkIfAvailableState(e)?(T(this.id,this),e.value):t},t.prototype.getOrThrow=function(){var t=this.stateContainer.get();if(!this.checkIfAvailableState(t))throw new C;return T(this.id,this),t.value},t.prototype.reader=function(){return T(this.id,this),this.stateContainer.reader().subState("value")},t.prototype.set=function(t){this.stateContainer.set({value:t,meta:{version:this.currentVersion()}}),w(this.id)},t.prototype.setError=function(t){this.stateContainer.set({meta:{error:t,version:this.currentVersion()}}),w(this.id)},t.prototype.reset=function(){this.stateContainer.set(void 0)},t.prototype.isMissing=function(){return void 0===this.getMeta()},t.prototype.isAvailable=function(){var t=this.getMeta();return void 0!==t&&void 0===t.error},t.prototype.isError=function(){var t;return void 0!==(null===(t=this.getMeta())||void 0===t?void 0:t.error)},t.prototype.numSubscribers=function(){return t=this.id,j[t]||0;var t},t.prototype.getMeta=function(){return this.stateContainer.subState("meta").get()},t.prototype.checkIfAvailableState=function(t){return this.checkIfAvailableMeta(null==t?void 0:t.meta)},t.prototype.checkIfAvailableMeta=function(t){return void 0===t?(c()||(this.subscribeLoading(),u()),s("incomplete",this),!1):(s(function(t,e){return function(t,e){return!(!e||void 0===t)&&D(e)!==t.version}(t,e)?"outdated":t.incomplete?"incomplete":"available"}(t,this.options.invalidation),this),d(t),!0)},t.prototype.subscribeLoading=function(){return function(t,e){var n=!0;O(t,1);var r=m[t];r||(m[t]=e,e.setTidyCallback((function(){m[t]===e&&delete m[t]})));var i=r||e;return i.notifyDataRequired(),function(){n&&(n=!1,O(t,-1)<1&&i.notifyDataNoLongerRequired())}}(this.id,this.loaderProcess())},t.prototype.loaderProcess=function(){return this.options.stream?new P(this.stateContainer,this.options.stream.map((function(t){return{meta:{},value:t}}))):this.options.loadableStream?new P(this.stateContainer,this.options.loadableStream):new E(this.stateContainer,this.options.loader,this.options.invalidation)},t.prototype.currentVersion=function(){return D(this.options.invalidation)},t}();var M=new r.e;function T(t,e){var n=M.current();n&&(n[t]=e)}function F(t){var e,n={};return{result:M.runWith(n,t),usedData:(e=n,Object.keys(e).map((function(t){return e[t]})))}}function R(t,e){var n=q(e);return n.allDataLoaded?n.result:t}function W(t,e){var n=q(e);return n.allDataLoaded&&n.allDataUpToDate?n.result:t}function N(t){return new r.o((function(e){var n=!1;return t.subscribe((function(t){if(!0===t.meta.incomplete){if(n)return}else n=!0;e.next(t)}))}))}function B(t,e,n){var r=Object(h.c)();return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=new x({state:r.subState(e.apply(void 0,i)),loadableStream:N(b((function(){return n.apply(void 0,i)})))});return a.getWithDefault(t)}}function L(t,e){var n=a((function(){return R(t,e)}));return c()&&n.forwardToCurrent(),n.result}function q(t){var e=a((function(){return Object(r.X)(t)}));e.forwardToCurrent();var n=e.result,i=e.isAllDataLoaded(),o=e.isAllDataUpToDate();if(!n.errorThrown)return{success:!0,result:n.result,allDataLoaded:i,allDataUpToDate:o};if(!i)return{success:!1,allDataLoaded:!1,allDataUpToDate:o};throw n.error}var U=function(){function t(t){var e=t.recordedAs,n=t.state,i=t.loader,o=t.invalidation;this.recordedAs=e,this.state=n,this.loader=i,this.invalidation=o,e&&function(t,e){if(V[t])throw new r.j("collection name registered twice: "+t);V[t]=e}(e,this)}return t.prototype.get=function(t,e){var n=this,i=function(t){if("string"==typeof t)return t;return Object(r.y)(t)}(t),o=this.invalidation;return new x({state:this.state().subState(i),loader:function(r){return n.loader(t,r,e)},invalidation:o?function(){return o(t)}:void 0,affiliation:this.recordedAs?{collectionName:this.recordedAs,key:t}:void 0})},t}();var V={};function z(t){Object(h.j)((function(){return t.forEach(H)}))}function H(t){var e=t[0],n=t[1],i=t[2];(function(t){var e=V[t];if(!e)throw new r.j("collection with name "+t+" not found");return e})(e).get(n).set(i)}function Q(t){return t.map(G)}function G(t){var e=t.getAffiliation();if(!e)throw new r.j("Tried to record a LoadableData without affiliation");return[e.collectionName,e.key,t.get()]}function J(t){return b(t).filter((function(t){return!t.meta.incomplete})).map(l)}},function(t,e,n){"use strict";n.d(e,"j",(function(){return P})),n.d(e,"f",(function(){return k})),n.d(e,"b",(function(){return E})),n.d(e,"d",(function(){return D})),n.d(e,"k",(function(){return p})),n.d(e,"e",(function(){return l})),n.d(e,"i",(function(){return b})),n.d(e,"a",(function(){return T})),n.d(e,"g",(function(){return F})),n.d(e,"h",(function(){return R})),n.d(e,"c",(function(){return N}));var r,i=n(0),o=n(1),a=function(){function t(t,e){this.value=t,this.copy=e,this.valueForReading=new i.e}return t.prototype.read=function(t){var e=this.value;return this.valueForReading.runWith(e,(function(){return t(e)}))},t.prototype.write=function(t){this.valueForReading.current()===this.value&&(this.value=this.copy(this.value)),t(this.value)},t}(),u=function(){function t(){this.subscribersStore=new a([],(function(t){return t.slice()}))}return t.prototype.create=function(t,e){return void 0===e&&(e=0),new c(this.subscribersStore,t,e)},t.prototype.count=function(){return this.subscribersStore.read((function(t){return t.length}))},t.prototype.reset=function(){this.subscribersStore.write((function(t){t.length=0}))},t.prototype.read=function(t){this.subscribersStore.read(t)},t}(),c=function(){function t(t,e,n){var r=this;void 0===n&&(n=0),this.subscriberStore=t,this.listener=e,this.rank=n,this.active=!1,this.scheduleNotify=Object(i.w)(i.R,(function(){return r.notify()}))}return t.prototype.subscribeChanges=function(t){var e=this;this.stateReference=t,this.active||(this.subscriberStore.write((function(t){var n=Object(o.sortedIndex)(t,e,"rank");t.splice(n,0,e)})),this.active=!0),this.hasChanges()&&this.listener()},t.prototype.unsubscribe=function(){var t=this;this.active&&(this.subscriberStore.write((function(e){var n=e.indexOf(t);n>=0&&e.splice(n,1)})),this.active=!1)},t.prototype.notify=function(){this.active&&this.listener()},t.prototype.hasChanges=function(){return!!this.stateReference&&this.stateReference.hasChanges()},t}(),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=new i.e;function p(t,e){return f.runWith(t,e)}function l(t){var e=f.current();if(e){var n=t+" is not permitted inside '"+e.contextName+"'. "+(e.message||"");throw new d(n)}}var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(i.m),h=function(){function t(t){this.detector=t}return t.prototype.hasChanges=function(){return this.detector()},t}();function b(t){var e=function(t){var e=function(t){var e=[],n=v.runWith(e,t),r=v.current();void 0!==r&&r.push.apply(r,e);return{result:n,detectors:e}}(t),n=e.result,r=e.detectors;return{result:n,detector:function(){return r.some((function(t){return t()}))},accessCount:r.length}}(t),n=e.detector,r=e.result,i=e.accessCount;return{result:r,accessedState:new h(n),accessCount:i}}var v=new i.e;var y=function(){function t(){this.listenersStore=new a([],(function(t){return t.slice()}))}return t.prototype.subscribe=function(t){var e=this,n=!0,r=function(){n&&t()};return this.listenersStore.write((function(t){return t.push(r)})),function(){n=!1,e.listenersStore.write((function(t){var e=t.indexOf(r);t.splice(e,1)}))}},t.prototype.count=function(){return this.listenersStore.read((function(t){return t.length}))},t.prototype.clear=function(){this.listenersStore.write((function(t){t.length=0}))},t.prototype.notify=function(){this.listenersStore.read((function(t){return t.forEach((function(t){return t()}))}))},t}();function g(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)&&!function(t){var e=Object.getPrototypeOf(t);if(null===e)return!1;return null!==Object.getPrototypeOf(e)}(t)}function m(t,e){return t===e?e:g(e)?function(t,e){var n={},r=!1;void 0===t&&(r=!0);var i=Object.keys(e),o=new Set;t&&Object.keys(t).forEach((function(t){return o.add(t)}));o.size!==i.length&&(r=!0);return i.forEach((function(i){o.has(i)||(r=!0);var a=t?t[i]:void 0,u=m(a,e[i]);u!==a&&(r=!0),n[i]=u})),r?Object.freeze(n):t}(g(t)?t:void 0,e):Array.isArray(e)?function(t,e){var n=!1;void 0!==t&&t.length===e.length||(n=!0);var r=e.map((function(e,r){var i=t?t[r]:void 0,o=m(i,e);return o!==i&&(n=!0),o}));return n?Object.freeze(r):t}(Array.isArray(t)?t:void 0,e):e}var j=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(){return(O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},w=function(){function t(){}return t.prototype.get=function(){var t,e,n=this,r=this.untrackedGet();return t=function(){return r!==n.untrackedGet()},void 0!==(e=v.current())&&e.push(t),r},t.prototype.set=function(t){var e=this.untrackedGet(),n=m(e,t);n!==e&&this.uncheckedSet(n)},t.prototype.clear=function(){this.set(void 0)},t.prototype.subState=function(t){return new S(this,t)},t.prototype.reader=function(){return this},t.prototype.setSubState=function(t,e){var n,r=this.untrackedGet();if(void 0!==r){if(void 0===e){var o=Object.keys(r);if(1===o.length&&o[0]===t)return void this.uncheckedSet(void 0)}if(null===r)throw new i.j;var a=O({},r),u=a;void 0===e?delete u[t]:u[t]=e,this.uncheckedSet(Object.freeze(a))}else{var c=Object.freeze(((n={})[t]=e,n));this.uncheckedSet(c)}},t.prototype.getSubState=function(t){var e=this.untrackedGet();if(null!=e)return e[t]},t}(),_=function(t){function e(){var e=t.call(this)||this;return e.listeners=new y,e.batchUpdates=new i.e,e}return j(e,t),e.prototype.untrackedGet=function(){return this.state},e.prototype.uncheckedSet=function(t){l("Changing state"),this.state=t,this.insideBatchUpdate()||this.notifyListeners()},e.prototype.id=function(){return""},e.prototype.subscribe=function(t){return this.listeners.subscribe(t)},e.prototype.withBatchedUpdates=function(t){var e=this.state;try{this.batchUpdates.runWith(!0,t)}finally{this.insideBatchUpdate()||e===this.state||this.notifyListeners()}},e.prototype.listenerCount=function(){return this.listeners.count()},e.prototype.clearListeners=function(){this.listeners.clear()},e.prototype.notifyListeners=function(){var t=this;p({contextName:"state listeners"},(function(){t.listeners.notify()}))},e.prototype.insideBatchUpdate=function(){return!!this.batchUpdates.current()},e}(w),S=function(t){function e(e,n){var r=t.call(this)||this;return r.parentState=e,r.key=n,r}return j(e,t),e.prototype.untrackedGet=function(){return this.parentState.getSubState(this.key)},e.prototype.uncheckedSet=function(t){this.parentState.setSubState(this.key,t)},e.prototype.id=function(){if(void 0===this.cachedId){var t=this.key.replace(/\\/g,"\\\\").replace(/\//g,"\\/");this.cachedId=this.parentState.id()+"/"+t}return this.cachedId},e}(w),C=new _,k=C;function P(t){return C.withBatchedUpdates(t)}var I=new u,A=new u;function E(t){return A.create(t)}function D(t,e){return void 0===e&&(e=0),I.create(t,e)}function x(){C.subscribe((function(){I.read((function(t){return t.forEach((function(t){t.hasChanges()&&t.notify()}))})),M()}))}x();var M=Object(i.w)(i.R,(function(){return A.read((function(t){return t.forEach((function(t){t.hasChanges()&&t.scheduleNotify()}))}))})),T=Object(i.x)(i.R,(function(t){return P((function(){return t.forEach((function(t){return t()}))})),[]}));function F(t){return new i.o((function(e){var n,r=!0,o=!1,a=E(u);function u(){if(r){var u=b((function(){return p({contextName:"observe",message:"Extract all side-effects into the listener function"},t)}));a.subscribeChanges(u.accessedState);var c=u.result;o&&Object(i.C)(c,n)||(e.next(c),n=c,o=!0)}}return Object(i.R)(u),function(){r=!1,a.unsubscribe()}}))}function R(t,e){var n=b((function(){return p({contextName:"observeSync",message:"Use non-sync observe or nextTick"},t)})),r=n.result,o=D((function(){var n=b(t);o.subscribeChanges(n.accessedState);var a=n.result;Object(i.C)(a,r)||(e(a),r=a)}));return o.subscribeChanges(n.accessedState),{initialValue:r,unsubscribe:function(){o.unsubscribe()}}}var W=0;function N(){return W++,k.subState("dynamic").subState(W.toString())}},function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"b",(function(){return ft})),n.d(e,"i",(function(){return f})),n.d(e,"h",(function(){return p})),n.d(e,"g",(function(){return l})),n.d(e,"a",(function(){return W})),n.d(e,"e",(function(){return k})),n.d(e,"c",(function(){return O}));var r=n(0),i=n(5);function o(){var t=u.get("currentSiteId").getWithDefault(null);if(!t)throw new r.j;return t}function a(t){u.get("currentSiteId").set(t)}var u=new(n(4).a)({recordedAs:"currentSiteId",state:function(){return i.f.subState("currentSiteId")},loader:r.Q}),c=n(1),s=n(2);function f(t,e){return Array.isArray(e)?e.map((function(e){return f(t,e)})).filter((function(t){return null!==t})):e instanceof s.c?d(e,t.objClassFor(e.objClass())):e instanceof s.e?d(e,t.widgetClassFor(e.objClass())):e instanceof s.b?e.hasDestination()?d(e,t.defaultClassForLinks):null:e instanceof s.n?null:e}function p(t){return Array.isArray(t)?t.map((function(t){return p(t)})):function(t){return t&&!!t._scrivitoPrivateContent}(t)?t._scrivitoPrivateContent:t}function l(t,e,n){return Object(c.mapObject)(t,(function(t,i){if(Object(r.J)(i))return[t];var o=e.attribute(i);if(!o)throw new r.a('Attribute "'+i+'" is not defined for CMS object class "'+n+'".');var a="string"==typeof o?[o]:o;return[p(t),a]}))}function d(t,e){var n=Object.create(e.prototype);return n._scrivitoPrivateContent=t,n}var h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},b=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};var v=["hash","obj","query","rel","target","title","url"];function y(t){return function(t){var e=c.without.apply(void 0,b([Object.keys(t)],v));if(!Object(c.isEmpty)(e))throw new r.a("Unexpected attributes "+Object(r.T)(e)+". Available attributes: "+Object(r.T)(v))}(t),Object(c.has)(t,"obj")?h(h({},t),{objId:g(t.obj)}):t}function g(t){return t?p(t).id():null}var m=function(){return(m=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},j=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},O=function(){function t(t,e){var n=e._scrivitoPrivateSchema,r=n?m({},n.attributes):{},i=t.attributes;i&&Object.keys(i).forEach((function(t){var e=i[t];r[t]=function(t){if("string"==typeof t)return[t];return[t[0],_(t[1])]}(e)}));var o=t.onlyInside,a=j(t,["onlyInside"]);this.definition=m(m({},a),o?{attributes:r,onlyInside:Array.isArray(o)?o:[o]}:{attributes:r})}return t.forInstance=function(t){return this.forClass(t.constructor)},t.forClass=function(t){return t._scrivitoPrivateSchema},t.basicFieldFor=function(e,n){var r=t.forInstance(e);if(r){var i=r.attribute(n);if(i)return new s.a(e._scrivitoPrivateContent,n,i)}},Object.defineProperty(t.prototype,"attributes",{get:function(){return this.definition.attributes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"extractTextAttributes",{get:function(){return this.definition.extractTextAttributes||[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.definition.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onlyInside",{get:function(){return this.definition.onlyInside},enumerable:!1,configurable:!0}),t.prototype.attribute=function(t){return this.attributes[t]},t.prototype.isBinary=function(){var t=this.attribute("blob");return!!t&&"binary"===t[0]},t}();function w(t){return!(!t||!t._scrivitoPrivateSchema)}function _(t){if(!("only"in t))return t;var e=t.only,n=j(t,["only"]),r="string"==typeof e?[e]:e;return m(m({},n),{validClasses:r})}var S=function(){function t(t){this.registry=t}return t.prototype.read=function(t,e){var n=O.basicFieldFor(t,e);return n?f(this.registry,n.get()):null},t.prototype.update=function(t,e){var n=this.registry.objClassNameFor(t.constructor);if(!n){var i=void 0;throw i=t.constructor===this.registry.defaultClassForObjs?"Obj":"Widget",new r.a('Updating is not supported on the base class "'+i+'".')}if(e.constructor!==Object)throw new r.a("The provided attributes are invalid. They have to be an Object with valid Scrivito attribute values.");var o=l(e,O.forInstance(t),n);t._scrivitoPrivateContent.updateWithUnknownValues(o)},t}(),C=function(){return(C=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function k(t){return{isInScope:function(e){var n=e.siteId();return n===t||null===n},applyToSearch:function(e){return e.and("_siteId","equals",[t,null])},applyToCreate:function(e){return C(C({},e),{_site_id:t})}}}function P(t,e,n,r){var i={};return Object.keys(n.attributes).forEach((function(n){if(!Object.prototype.hasOwnProperty.call(t,n)){var o=e.initialContentFor(r,n);void 0!==o&&(i[n]=o)}})),i}var I=function(){return(I=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function A(t){return{isInScope:function(e){return e.objClass()===t},applyToSearch:function(e){return e.and("_objClass","equals",t)},applyToCreate:function(e){return I(I({},e),{_obj_class:t})}}}var E=function(){return(E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},D=function(){function t(t,e,n){this.registry=t,this.objClass=e,this.siteRestriction=n}return t.prototype.get=function(t){return this.getObj(t,this.scope())},t.prototype.getIncludingDeleted=function(t){return this.getObj(t,this.scopeIncludingDeletedObjs())},t.prototype.getByPath=function(t){return this.getObjByValue("_path",t)},t.prototype.getByPermalink=function(t){return this.getObjByValue("_permalink",t)},t.prototype.root=function(){return f(this.registry,Object(s.z)(this.scope()))},t.prototype.all=function(){return this.getSearch(1e3)},t.prototype.where=function(t,e,n,r){return this.getSearch().and(t,e,n,r)},t.prototype.create=function(t){void 0===t&&(t={});var e=this.objClassNameForCreate();M(t);var n=x(t,e,this.registry,O.forClass(this.objClass)),r=Object(s.q)(this.scope().and(A(e)),n);return f(this.registry,r)},t.prototype.createFromFile=function(t,e){var n=this;void 0===e&&(e={});var i=this.objClassNameForCreate();if(function(t){if(!r.i.is(t)){if(r.d.is(t))throw new r.a('Creating CMS objects from file is only available with instances of "File", but an instance of "Blob" is given');throw new r.a('Creating CMS objects from file is only available with instances of "File"')}}(t),M(e),Object.prototype.hasOwnProperty.call(e,"blob"))throw new r.a('Setting attribute "blob" is not allowed when creating CMS objects from file, because the file will be assigned to that attribute');var o=O.forClass(this.objClass);if(!o.isBinary())throw new r.a('Creating CMS objects from file is only available for classes with a binary attribute "blob"');var a=x(e,i,this.registry,o);return Object(s.p)(this.scope().and(A(i)),t,a).then((function(t){return f(n.registry,t)}))},t.prototype.getObj=function(t,e){return f(this.registry,Object(s.w)(this.getScopeRestrictedToSameClass(e),t))},t.prototype.getObjByValue=function(t,e){var n=Object(s.v)(this.scope(),t,e);return f(this.registry,n)},t.prototype.getSearch=function(t){var e=this.getScopeRestrictedToSameClass(this.scope()).search();return void 0!==t&&e.batchSize(t),new this.registry.ObjSearch(e)},t.prototype.getScopeRestrictedToSameClass=function(t){var e=this.objClassName();return e?t.and(A(e)):t},t.prototype.objClassName=function(){return this.registry.objClassNameFor(this.objClass)},t.prototype.objClassNameForCreate=function(){var t=this.objClassName();if(!t)throw new r.a("Use a specific class (like Page or Image) in order to create an Obj.");return t},t.prototype.scope=function(){return this.scopeIncludingDeletedObjs().and(s.t)},t.prototype.scopeIncludingDeletedObjs=function(){return Object(s.A)(Object(s.r)()).and(this.siteRestriction)},t}();function x(t,e,n,r){var i=P(t,n,r,e);return l(E(E({},t),i),r,e)}function M(t){if(t.constructor!==Object)throw new r.a("The provided attributes are invalid. They have to be an Object with valid Scrivito attribute values.");if(t._objClass)throw new r.a('Invalid attribute "_objClass". "'+t._objClass+'.create" will automatically set the CMS object class correctly.')}function T(t){return function(){function e(){}return e.prototype.id=function(){return this._scrivitoPrivateContent.id()},e.prototype.objClass=function(){return this._scrivitoPrivateContent.objClass()},e.prototype.finishSaving=function(){return this._scrivitoPrivateContent.finishSaving()},e.prototype.get=function(e){if(!Object(r.H)(e))throw new r.a("Attribute names have to be in camel case.");if(Object(r.J)(e))throw new r.a('Attribute name "'+e+'" is not a valid custom attribute name.');return t.read(this,e)},e.prototype.update=function(e){t.update(this,e)},e}()}var F,R=(F=function(t,e){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}F(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});var W=function(){function t(t,e){this._registry=t,this._basicObjFacetValue=e}return t.prototype.name=function(){return this._basicObjFacetValue.name()},t.prototype.count=function(){return this._basicObjFacetValue.count()},t.prototype.includedObjs=function(){var t=this._basicObjFacetValue.includedObjs();return f(this._registry,t)},t}();function N(t){return Array.isArray(t)?t.map((function(t){return p(t)})):p(t)}var B=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=function(){return(L=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function q(t){return function(e){function n(n){void 0===n&&(n={});var i=e.call(this)||this,o=O.forInstance(i),a=t.objClassNameFor(i.constructor);if(!a)throw new r.a("Use a specific class (like TextWidget or ImageWidget) to create a Widget.");!function(t){if(t.constructor!==Object)throw new r.a("The provided attributes are invalid. They have to be an Object with valid Scrivito attribute values.");if(t._objClass)throw new r.a('Invalid attribute "_objClass". "new '+t._objClass+'" will automatically set the CMS object class correctly.')}(n);var u=l(L(L({},n),{_objClass:a}),o,a),c=s.e.createWithUnknownValues(u);return c.onDidPersist((function(e){var n=f(t,e),r=P(u,t,o,a);n.update(r)})),i._scrivitoPrivateContent=c,i}return B(n,e),n.prototype.obj=function(){var e=this._scrivitoPrivateContent.obj();return f(t,e)},n.prototype.copy=function(){var e=this._scrivitoPrivateContent.copy();return f(t,e)},n.prototype.destroy=function(){this._scrivitoPrivateContent.remove()},n.prototype.container=function(){var e=this._scrivitoPrivateContent.container();return f(t,e)},n}(T(new S(t)))}var U=function(){function t(){var t;this.mapping={},this.defaultClassForObjs=function(t){function e(e){return new D(t,e,k(o()))}return function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return R(r,n),r.get=function(t){return e(this).get(t)},r.getIncludingDeleted=function(t){return e(this).getIncludingDeleted(t)},r.getByPath=function(t){return e(this).getByPath(t)},r.getByPermalink=function(t){return e(this).getByPermalink(t)},r.all=function(){return e(this).all()},r.root=function(){return e(this).root()},r.where=function(t,n,r,i){return e(this).where(t,n,r,i)},r.create=function(t){return e(this).create(t)},r.createFromFile=function(t,n){return e(this).createFromFile(t,n)},r.prototype.createdAt=function(){return this._scrivitoPrivateContent.createdAt()},r.prototype.lastChanged=function(){return this._scrivitoPrivateContent.lastChanged()},r.prototype.path=function(){return this._scrivitoPrivateContent.path()},r.prototype.parent=function(){return f(t,this._scrivitoPrivateContent.parent())},r.prototype.ancestors=function(){return this._scrivitoPrivateContent.ancestors().map((function(e){return f(t,e)}))},r.prototype.backlinks=function(){return f(t,this._scrivitoPrivateContent.backlinks())},r.prototype.children=function(){return f(t,this._scrivitoPrivateContent.children())},r.prototype.orderedChildren=function(){return f(t,this._scrivitoPrivateContent.orderedChildren())},r.prototype.permalink=function(){return this._scrivitoPrivateContent.permalink()},r.prototype.siteId=function(){return this._scrivitoPrivateContent.siteId()},r.prototype.slug=function(){return this._scrivitoPrivateContent.slug()},r.prototype.isBinary=function(){var t=O.forInstance(this);return!!t&&t.isBinary()},r.prototype.isRestricted=function(){return this._scrivitoPrivateContent.isRestricted()},r.prototype.contentLength=function(){return this.isBinary()?this._scrivitoPrivateContent.contentLength():0},r.prototype.contentType=function(){return this.isBinary()?this._scrivitoPrivateContent.contentType():""},r.prototype.contentUrl=function(){return this.isBinary()?this._scrivitoPrivateContent.contentUrl():""},r.prototype.metadata=function(){return this.isBinary()?this._scrivitoPrivateContent.metadata():new s.j},r.prototype.restrict=function(){this._scrivitoPrivateContent.restrict()},r.prototype.unrestrict=function(){this._scrivitoPrivateContent.unrestrict()},r.prototype.widget=function(e){var n=this._scrivitoPrivateContent.widget(e);return n&&f(t,n)},r.prototype.widgets=function(){return f(t,this._scrivitoPrivateContent.widgets())},r.prototype.copy=function(){return this._scrivitoPrivateContent.copyAsync({_path:null}).then((function(e){return f(t,e)}))},r.prototype.destroy=function(){this._scrivitoPrivateContent.destroy()},r}(T(new S(t)))}(this),this.defaultClassForWidgets=q(this),this.defaultClassForLinks=(t=this,function(){function e(t){var e=y(t);this._scrivitoPrivateContent=new s.b(e)}return e.prototype.title=function(){return this._scrivitoPrivateContent.title()},e.prototype.query=function(){return this._scrivitoPrivateContent.query()},e.prototype.hash=function(){return this._scrivitoPrivateContent.hash()},e.prototype.rel=function(){return this._scrivitoPrivateContent.rel()},e.prototype.target=function(){return this._scrivitoPrivateContent.target()},e.prototype.url=function(){return this._scrivitoPrivateContent.url()},e.prototype.obj=function(){var e=this._scrivitoPrivateContent.obj();return e instanceof s.c?f(t,e):null},e.prototype.queryParameters=function(){return this._scrivitoPrivateContent.queryParameters()},e.prototype.copy=function(e){var n=this._scrivitoPrivateContent.copy(y(e)),r=Object.create(t.defaultClassForLinks.prototype);return r._scrivitoPrivateContent=n,r},e.prototype.isExternal=function(){return this._scrivitoPrivateContent.isExternal()},e.prototype.isInternal=function(){return this._scrivitoPrivateContent.isInternal()},e}()),this.ObjSearch=function(t){var e=function(){function e(t){this._scrivitoPrivateContent=t}return e.prototype.and=function(t,n,i,o){if(t instanceof e){var a=t;this._scrivitoPrivateContent.and(a._scrivitoPrivateContent)}else{if(void 0===n)throw new r.a("Missing operator to search with");if(void 0===i)throw new r.a('Missing value to search (specify "null" for missing)');var u=N(i),c=t;this._scrivitoPrivateContent.and(c,n,u,o)}return this},e.prototype.andNot=function(t,e,n){var r=N(n);return this._scrivitoPrivateContent.andNot(t,e,r),this},e.prototype.boost=function(t,e,n,r){return this._scrivitoPrivateContent.boost(t,e,N(n),r),this},e.prototype.facet=function(e,n){return this._scrivitoPrivateContent.facet(e,n).map((function(e){return new W(t,e)}))},e.prototype.suggest=function(t,e){return this._scrivitoPrivateContent.suggest(t,e)},e.prototype.first=function(){var e=this._scrivitoPrivateContent.first();return e?f(t,e):null},e.prototype.take=function(e){return this._scrivitoPrivateContent.take(e).map((function(e){return f(t,e)}))},e.prototype.toArray=function(){return this._scrivitoPrivateContent.take().map((function(e){return f(t,e)}))},e.prototype.offset=function(t){return this._scrivitoPrivateContent.offset(t),this},e.prototype.order=function(t,e){if(Array.isArray(t)){if(void 0!==e)throw new r.a("Direction can not be set independent of attributes.");return this._scrivitoPrivateContent.order(t),this}return this._scrivitoPrivateContent.order(t,e),this},e.prototype.count=function(){return this._scrivitoPrivateContent.count()},e}();if("function"==typeof Symbol){var n=Symbol.iterator;if(n)e.prototype[n]=function(){var e=this._scrivitoPrivateContent.iterator();return{next:function(){var n=e.next();return n.done?{done:n.done}:{done:n.done,value:f(t,n.value)}}}}}return e}(this)}return t.prototype.register=function(t,e){this.mapping[t]=e},t.prototype.getClass=function(t){return this.mapping[t]||null},t.prototype.allObjClasses=function(){var t=this;return Object(c.pick)(this.mapping,(function(e){return t.defaultClassForObjs.isPrototypeOf(e)}))},t.prototype.allWidgetClasses=function(){var t=this;return Object(c.pick)(this.mapping,(function(e){return t.defaultClassForWidgets.isPrototypeOf(e)}))},t.prototype.objClassFor=function(t){return this.appClassFor(t,this.defaultClassForObjs)},t.prototype.widgetClassFor=function(t){return this.appClassFor(t,this.defaultClassForWidgets)},t.prototype.objClassNameFor=function(t){return Object(c.findKey)(this.mapping,(function(e){return e===t}))||null},t.prototype.setInitialContentFor=function(t){this.initialContentForFunction=t},t.prototype.initialContentFor=function(t,e){if(this.initialContentForFunction)return this.initialContentForFunction(t,e)},t.prototype.appClassFor=function(t,e){var n=this.getClass(t);return n&&e.isPrototypeOf(n)?n:e},t}(),V=["string","html","widgetlist"];function z(t){t.extractTextAttributes.forEach((function(e){if("blob:"===e.substring(0,5))return function(t,e){if("blob:text"===e){if(t.isBinary())return;throw new r.a('Invalid value for "extractTextAttributes": blob:text is only supported for binary objs.')}throw new r.a('Invalid value for "extractTextAttributes": '+e+" is not supported.")}(t,e);H(e,t.attribute(e))}))}function H(t,e){if(!e)throw new r.a('Invalid value for "extractTextAttributes": Attribute '+t+" is not defined.");var n=e[0];if(!Object(c.contains)(V,n))throw new r.a('Invalid value for "extractTextAttributes": Attribute '+t+" of type "+n+" is not supported.")}var Q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),G=function(){return(G=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function J(t,e){if(e.extend&&!K(e.extend,t.defaultClassForObjs))throw new r.a('Invalid value for "extend": not a Scrivito Obj class');var n=e.extend||t.defaultClassForObjs,i=new O(e,n);return z(i),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),Object.defineProperty(e,"_scrivitoPrivateSchema",{get:function(){return i},enumerable:!1,configurable:!0}),e}(n)}function Z(t,e){if(e.extend&&!K(e.extend,t.defaultClassForWidgets))throw new r.a('Invalid value for "extend": not a Scrivito Widget class');var n=e.extend||t.defaultClassForWidgets,i=new O(e,n);return function(t){t.extractTextAttributes.forEach((function(e){if("blob:"===e.substring(0,5))throw new r.a('Invalid value for "extractTextAttributes": '+e+" is not supported.");H(e,t.attribute(e))}))}(i),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),Object.defineProperty(e,"_scrivitoPrivateSchema",{get:function(){return i},enumerable:!1,configurable:!0}),e}(n)}function Y(t,e,n){var r=function(t,e,n){return w(n)?n:J(t,G(G({},n),{name:e}))}(t,e,n);return t.register(e,r),r}function X(t,e,n){var r=function(t,e,n){return w(n)?n:Z(t,G(G({},n),{name:e}))}(t,e,n);return t.register(e,r),r}function K(t,e){return!!t&&(t===e||t.prototype instanceof e)}var $=r.ab.refinement(r.ab.Function,w,"ObjClass"),tt=r.ab.interface({attributes:r.ab.maybe(r.ab.dict(r.ab.refinement(r.ab.String,(function(t){return/^[a-z](_+[A-Z0-9]|[A-Za-z0-9])*$/.test(t)}),"String (alphanumeric, starting with a lower-case character)"),r.ab.union([r.ab.enums.of(["binary","date","datetime","float","html","integer","link","linklist","reference","referencelist","string","stringlist","widgetlist"]),r.ab.tuple([r.ab.enums.of(["enum","multienum"]),r.ab.interface({values:r.ab.list(r.ab.String)})]),r.ab.tuple([r.ab.enums.of(["reference","referencelist"]),r.ab.interface({only:r.ab.union([r.ab.String,r.ab.list(r.ab.String)])})]),r.ab.tuple([r.ab.enums.of(["widgetlist"]),r.ab.interface({only:r.ab.union([r.ab.String,r.ab.list(r.ab.String)])})])]),"Attributes Specification")),extractTextAttributes:r.ab.maybe(r.ab.list(r.ab.String)),extend:r.ab.maybe($)}),et=r.ab.refinement(r.ab.Function,w,"WidgetClass"),nt=r.ab.interface({attributes:tt.meta.props.attributes,extractTextAttributes:r.ab.maybe(r.ab.list(r.ab.String)),extend:r.ab.maybe(et),onlyInside:r.ab.maybe(r.ab.union([r.ab.String,r.ab.Array]))}),rt=Object(r.u)("createObjClass",[["options",tt]],{docPermalink:"js-sdk/createObjClass"}),it=Object(r.u)("createWidgetClass",[["options",nt]],{docPermalink:"js-sdk/createWidgetClass"}),ot=r.ab.union([tt,$]);ot.dispatch=function(t){return"object"==typeof t?tt:$};var at=Object(r.u)("provideObjClass",[["name",r.ab.String],["objClassOrDefinition",ot]],{docPermalink:"js-sdk/provideObjClass"}),ut=r.ab.union([nt,et]);ut.dispatch=function(t){return"object"==typeof t?nt:et};var ct=Object(r.u)("provideWidgetClass",[["name",r.ab.String],["widgetClassOrDefinition",ut]],{docPermalink:"js-sdk/provideWidgetClass"});var st=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},ft=function(){function t(){this._registry=new U}return t.init=function(){var e=new t,n={Obj:e.Obj,Widget:e.Widget,Link:e.Link,ObjSearch:e.ObjSearch,provideObjClass:e.provideObjClass.bind(e),provideWidgetClass:e.provideWidgetClass.bind(e),createObjClass:e.createObjClass.bind(e),createWidgetClass:e.createWidgetClass.bind(e),getClass:e.getClass.bind(e),allObjClasses:e.allObjClasses.bind(e),allWidgetClasses:e.allWidgetClasses.bind(e),_privateRealm:e};return{realm:e,context:n}},Object.defineProperty(t.prototype,"Obj",{get:function(){return this._registry.defaultClassForObjs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Widget",{get:function(){return this._registry.defaultClassForWidgets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Link",{get:function(){return this._registry.defaultClassForLinks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ObjSearch",{get:function(){return this._registry.ObjSearch},enumerable:!1,configurable:!0}),t.prototype.provideObjClass=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return at.apply(void 0,st([t,e],n)),Y(this._registry,t,e)},t.prototype.provideWidgetClass=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return ct.apply(void 0,st([t,e],n)),X(this._registry,t,e)},t.prototype.createObjClass=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return rt.apply(void 0,st([t],e)),J(this._registry,t)},t.prototype.createWidgetClass=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return it.apply(void 0,st([t],e)),Z(this._registry,t)},t.prototype.getClass=function(t){return this._registry.getClass(t)},t.prototype.allObjClasses=function(){return this._registry.allObjClasses()},t.prototype.allWidgetClasses=function(){return this._registry.allWidgetClasses()},t.prototype.setInitialContentFor=function(t){this._registry.setInitialContentFor(t)},t}()},function(t,e,n){"use strict";n.d(e,"k",(function(){return f})),n.d(e,"u",(function(){return p})),n.d(e,"v",(function(){return s})),n.d(e,"y",(function(){return l})),n.d(e,"z",(function(){return d})),n.d(e,"a",(function(){return P})),n.d(e,"x",(function(){return E})),n.d(e,"j",(function(){return x})),n.d(e,"b",(function(){return j})),n.d(e,"A",(function(){return _})),n.d(e,"g",(function(){return S})),n.d(e,"p",(function(){return w})),n.d(e,"c",(function(){return $})),n.d(e,"m",(function(){return X})),n.d(e,"h",(function(){return Y})),n.d(e,"f",(function(){return lt})),n.d(e,"n",(function(){return wt})),n.d(e,"e",(function(){return B})),n.d(e,"s",(function(){return L})),n.d(e,"r",(function(){return U})),n.d(e,"B",(function(){return V})),n.d(e,"d",(function(){return St})),n.d(e,"w",(function(){return _t})),n.d(e,"l",(function(){return Pt})),n.d(e,"q",(function(){return It})),n.d(e,"o",(function(){return Dt})),n.d(e,"t",(function(){return Q})),n.d(e,"i",(function(){return H}));var r,i=n(0),o=n(5),a=n(10),u=function(){function t(t,e){this.workspaceId=t,this.contentState=e}return t.prototype.getContinuation=function(){return this.continuation},t.prototype.setContentStateIdOrThrowIfTracking=function(t){if(this.initialization)throw new i.j("Cannot (re)set content state id of "+this.workspaceId+" after trackContentStateId");this.setContentStateId(t)},t.prototype.trackContentStateId=function(){return this.initialization||(this.initialization=this.initializeContentStateId()),this.initialization},t.prototype.updateContent=function(){var t=this;if(this.updating)return this.updating;var e=this.continuation||this.getContentStateId();if(!e)return i.n.resolve();var n=this.fetchFeed(e,10).then((function(e){return t.updateContentState(e),!!e.to}));return this.updating=Object(i.U)(n,(function(){t.updating=void 0})),this.updating},t.prototype.fetchFeed=function(t,e){var n=this,r=e-1;return Object(a.d)(this.workspaceId,t).then((function(t){if(n.applyChanges(t),r<1)return t;var e=t.to;return e?n.fetchFeed(e,r):t}))},t.prototype.applyChanges=function(t){var e=this;Array.isArray(t.objs)&&t.objs.forEach((function(t){var n=Object(a.g)(t)?t._deleted:t._id;U.get(["workspace",e.workspaceId],n).notifyBackendState(t)}))},t.prototype.updateContentState=function(t){var e=t.to,n=t.current;this.continuation=e||n,this.setContentStateId(n)},t.prototype.initializeContentStateId=function(){var t=this;return this.getContentStateId()?i.n.resolve():Object(a.d)(this.workspaceId).then((function(e){t.setContentStateId(e.current)}))},t.prototype.getContentStateId=function(){return this.contentState.get()},t.prototype.setContentStateId=function(t){this.contentState.set(t)},t}(),c={};function s(t){r=t}function f(t){return(r?r.getContentStateId(t):b(t).get())||""}function p(t,e){r||h(t).setContentStateIdOrThrowIfTracking(e)}function l(t){return r?i.n.resolve():h(t).trackContentStateId()}function d(t){return r?i.n.resolve():h(t).updateContent()}function h(t){return c[t]||(c[t]=new u(t,b(t))),c[t]}function b(t){return o.f.subState("contentStateId").subState(t)}var v,y=n(1),g=n(4),m=(v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),j="inMemory",O=!1;function w(){return O}function _(){O=!0}function S(t){if(O)throw new C(t)}var C=function(t){function e(e){return t.call(this,e+" is not supported when using the in-memory tenant")||this}return m(e,t),e}(i.m),k=new g.a({recordedAs:"facetquery",state:function(){return o.f.subState("facetQuery")},loader:function(t){var e=t[0],n=t[1],r=t[2];return a.c.retrieveFacetQuery(e,function(t,e){var n={facets:[t],options:{site_aware:!0},size:0};Object(y.isEmpty)(e)||(n.query=e);return n}(n,r))},invalidation:function(t){var e=t[0];return Object(g.m)(void 0,(function(){return f(e)}))||""}}),P=function(){function t(t,e,n,r){this.loadableData=I(t,e,n,r)}return t.prototype.result=function(){S("Search API");var t=this.loadableData.get();return t?t.facets[0].map((function(t){return{name:t.value,count:t.total,includedObjIds:t.results.map((function(t){return t.id}))}})):[]},t}();function I(t,e,n,r){var i={attribute:e,include_objs:n.includeObjs||0,limit:n.limit||10};return k.get([t,i,r||[]])}var A=new g.a({recordedAs:"suggest",state:function(){return o.f.subState("suggest")},loader:function(t){var e=t[0],n=t[1];return a.c.retrieveSuggest(e,n)},invalidation:function(t){var e=t[0];t[1];return Object(g.m)("",(function(){return f(e)}))}});function E(t,e,n,r){return S("Search API"),D(t,e,n,r).getWithDefault({results:[]}).results}function D(t,e,n,r){var i=n.attributes,o=n.limit,a={prefix:e,options:{site_aware:!0}};return r&&(a.from_search=r),i&&(a.fields=i),"number"==typeof o&&(a.limit=o),A.get([t,a])}function x(t,e){var n=M(t,e);return n||(Object(y.find)(t._widget_pool,(function(t,r){if(t&&(n=M(t,e)))return n.parentWidgetId=r,!0})),n)}function M(t,e){var n;return Object(y.find)(t,(function(t,r){if(t&&!Object(i.J)(r)){var o=t;if(Object(a.h)(o)){var u=o[1];if(u){var c=u.indexOf(e);return-1!==c?(n={attributeName:r,index:c},!0):void 0}}}})),n}function T(t,e){if(!t)return e;if(!e)return null;var n={};return R(t,e,(function(e,r,i,o){"_widget_pool"===e?n._widget_pool=function(t,e){if(!e||Object(y.isEmpty)(e))return t;var n={};return R(t,e,(function(t,e,r,i){if(i){if(r===lt)return;r&&!e?r._obj_class&&(n[t]=r):r&&(n[t]=T(e,r))}else n[t]=e})),n}(r||{},i):o?void 0!==i&&i!==lt&&(n[e]=i):n[e]=t[e]})),n}function F(t,e){if(!t)return e||{};if(!e)return null;var n={};return R(t,e,(function(t,e,r){if("_widget_pool"===t){var i=function(t,e){if(t===e)return;if(!t)return e;var n={};return R(t,e||{},(function(t,e,r){var i=N(e,r,(function(){var t=F(e,r);if(!Object(y.isEmpty)(t))return t}));void 0!==i&&(n[t]=i)})),n}(e,r);Object(y.isEmpty)(i)||(n._widget_pool=i)}else{var o=N(e,r,(function(){if(!Object(y.isEqual)(e,r))return r}));void 0!==o&&(n[t]=o)}})),n}function R(t,e,n){var r=Object(y.isObject)(t)?Object.keys(t):[],i=Object(y.isObject)(e)?Object.keys(e):[];Object(y.difference)(r,i).forEach((function(r){n(r,W(t[r]),W(e[r]),!1)})),i.forEach((function(r){n(r,W(t[r]),W(e[r]),!0)}))}function W(t){if(Array.isArray(t)){var e=t[0],n=t[1];return"binary"===e&&n?[e,Object(y.omit)(n,"url")]:t}return t}function N(t,e,n){return void 0===t?e:void 0===e?lt:n()}var B=["workspace","published"];function L(t,e){var n=t[0],r=t[1],i=e[0];return r===e[1]&&n===i}var q=function(){function t(t){this.factory=t,this.cache={}}return t.prototype.get=function(t,e){var n=this.getObjSpaceCache(t),r=n[e];if(r)return r;var i=this.factory(t,e);return n[e]=i,i},t.prototype.clear=function(){this.cache={}},t.prototype.getObjSpaceCache=function(t){var e=t[0]+":"+t[1],n=this.cache[e];if(n)return n;var r={};return this.cache[e]=r,r},t}(),U=new(function(){function t(){this.replicationCache=new q((function(){throw new i.j})),this.disabled=!1,this.writeCallbacks={},this.subscriptionToken=0}return t.prototype.setReplicationStrategy=function(t){this.replicationCache=new q((function(e,n){return new t(e,n)}))},t.prototype.get=function(t,e){return this.replicationCache.get(t,e)},t.prototype.subscribeWrites=function(t){return this.subscriptionToken+=1,this.writeCallbacks[this.subscriptionToken]=t,this.subscriptionToken},t.prototype.unsubscribeWrites=function(t){delete this.writeCallbacks[t]},t.prototype.isDisabled=function(){return this.disabled},t.prototype.writeStarted=function(t){var e=this;Object.keys(this.writeCallbacks).forEach((function(n){(0,e.writeCallbacks[n])(t)}))},t.prototype.disableReplication=function(){this.disabled=!0},t.prototype.enableReplication=function(){this.disabled=!1},t.prototype.clearWriteCallbacks=function(){this.writeCallbacks={}},t.prototype.clearCache=function(){this.replicationCache.clear()},t}());function V(t){U.setReplicationStrategy(t)}var z=new i.e;function H(t){if(z.current())throw new i.j(t)}function Q(t){return z.runWith(!0,t)}function G(){return o.f.subState("objData")}var J=new g.a({recordedAs:"objdata",state:G,loader:function(t){var e=t[0],n=t[1];return U.get(e,n).start(),Object(i.Q)()}}),Z=function(){function t(t,e){this._objSpaceId=t,this._id=e,this._loadableData=J.get([t,e])}return t.prototype.id=function(){return this._id},t.prototype.get=function(){return H("for performance reasons, avoid this method when rendering"),this._loadableData.get()},t.prototype.getWidget=function(t){return H("for performance reasons, avoid this method when rendering"),this.getWidgetState(t).get()},t.prototype.getWidgetWithBadPerformance=function(t){return this.getWidgetState(t).get()},t.prototype.getAttribute=function(t){if("_widget_pool"===t)throw new i.j("_widget_pool is not an attribute, use getWidget or getWidgetAttribute");return this.getValue(t)},t.prototype.getWidgetAttribute=function(t,e){return this.getWidgetState(t).subState(e).get()},t.prototype.getIfExistent=function(){if(!this.isUnavailable())return this.get()},t.prototype.isForbidden=function(){return!!this.getValue("_forbidden")},t.prototype.isUnavailable=function(){return!!this.getValue("_deleted")||!this.getValue("_id")},t.prototype.set=function(t){Object(o.e)("Changing CMS content"),this._loadableData.set(t),this._replication().notifyLocalState(t)},t.prototype.setError=function(t){this._loadableData.setError(t)},t.prototype.ensureAvailable=function(){return this._loadableData.ensureAvailable()},t.prototype.isAvailable=function(){return this._loadableData.isAvailable()},t.prototype.update=function(t){var e=T(this.get(),t);this.set(e)},t.prototype.finishSaving=function(){return this._replication().finishSaving()},t.prototype.objSpaceId=function(){return this._objSpaceId},t.prototype.workspaceId=function(){return this._objSpaceId[1]},t.prototype.equals=function(e){return e instanceof t&&(this._id===e._id&&L(this._objSpaceId,e._objSpaceId))},t.prototype.loadingSubscriberCount=function(){return this._loadableData.numSubscribers()},t.prototype.unload=function(){this._loadableData.reset()},t.prototype._replication=function(){return U.get(this._objSpaceId,this._id)},t.prototype.getWidgetState=function(t){return this.getSubReader("_widget_pool").subState(t)},t.prototype.getValue=function(t){return this.getSubReader(t).get()},t.prototype.getSubReader=function(t){return this._loadableData.reader().subState(t)},t}();function Y(t,e,n){var r=K(t,e);return r.set(n),r}function X(t,e){var n=K(t,e);if(n.ensureAvailable())return n}function K(t,e){return new Z(t,e)}var $=function(){function t(t,e){var n=this;this.objSpaceId=t,this.objId=e,this.replicationActive=!1,this.scheduledReplication=!1,this.performThrottledReplication=Object(i.bb)((function(){return n.performReplication()}),1e3)}return t.prototype.start=function(){var t=this;Object(a.j)(this.objSpaceId,this.objId).then((function(e){Object(o.a)((function(){t.notifyBackendState(e)}))}))},t.prototype.notifyLocalState=function(t){if(!U.isDisabled()&&!tt(this.localState,t)){if(this.backendState&&Object(a.g)(this.backendState))throw new i.j("Can not update a fully deleted obj.");this.localState=t,this.startReplication()}},t.prototype.notifyBackendState=function(t){if(!this.localState)return this.backendState=t,void this.updateLocalState(t);var e=this.bufferedBackendState||this.backendState;(!e||nt(t,e)>0)&&(this.replicationActive?this.bufferedBackendState=t:(Object(a.g)(t)?this.updateLocalState(t):this.updateLocalState(T(this.localState,et(this.backendState,t))),this.backendState=t))},t.prototype.finishSaving=function(){var t;if(this.nextRequestDeferred)t=this.nextRequestDeferred.promise;else{if(!this.currentRequestDeferred)return i.n.resolve();t=this.currentRequestDeferred.promise}return t.catch((function(){return i.n.reject()}))},t.prototype.finishReplicating=function(){throw new i.j},t.prototype.replicationMessageStream=function(){throw new i.j},t.prototype.getLocalState=function(){return this.localState},t.prototype.getBackendState=function(){return this.backendState},t.prototype.startReplication=function(){var t=this;tt(this.backendState,this.getLocalObjJson())?this.nextRequestDeferred&&(this.nextRequestDeferred.resolve(),this.nextRequestDeferred=void 0):this.replicationActive?this.nextRequestDeferred||(this.nextRequestDeferred=new i.g):this.scheduledReplication||(this.scheduledReplication=!0,this.initDeferredForRequest(),U.writeStarted(this.currentRequestDeferred.promise),Object(i.R)((function(){return t.performThrottledReplication()})))},t.prototype.performReplication=function(){var t=this,e=this.getLocalObjJson();this.scheduledReplication=!1,this.replicationActive=!0,this.replicateLocalStateToBackend(e).then((function(n){t.handleBackendUpdate(e,n),t.currentRequestDeferred.resolve(),t.currentRequestDeferred=void 0,t.replicationActive=!1,t.startReplication()}),(function(e){t.currentRequestDeferred.reject(e),t.currentRequestDeferred=void 0,t.replicationActive=!1}))},t.prototype.replicateLocalStateToBackend=function(t){var e=et(this.backendState,t);return Object(y.isEmpty)(e)?i.n.resolve(this.backendState):this.replicatePatchToBackend(e)},t.prototype.replicatePatchToBackend=function(t){return a.b.put(this.replicateToBackendPath(),{obj:t})},t.prototype.replicateToBackendPath=function(){var t=this.objSpaceId,e=t[0],n=t[1];if("workspace"!==e||"published"===n)throw new i.j("Unexpected backend replication for "+e+" "+n);return"workspaces/"+n+"/objs/"+this.objId},t.prototype.initDeferredForRequest=function(){if(this.nextRequestDeferred){var t=this.nextRequestDeferred;this.nextRequestDeferred=void 0,this.currentRequestDeferred=t}else this.currentRequestDeferred=new i.g},t.prototype.handleBackendUpdate=function(t,e){var n,r;this.backendState=(n=e,(r=this.bufferedBackendState)?nt(n,r)>0?n:r:n),this.bufferedBackendState=void 0,this.updateLocalState(T(this.backendState,et(t,this.getLocalObjJson())))},t.prototype.updateLocalState=function(t){var e,n,r;this.localState=t,e=this.objSpaceId,n=this.objId,r=t,K(e,n).set(r)},t.prototype.getLocalObjJson=function(){if(void 0===this.localState)throw new i.j;return this.localState},t.prototype.isRequestInFlight=function(){return this.replicationActive},t}();function tt(t,e){return Object(y.isEmpty)(et(t,e))}function et(t,e){return F(t,e)}function nt(t,e){return function(t,e){if(void 0!==t&&void 0!==e){if(t>e)return 1;if(e>t)return-1}return 0}(t._version,e._version)}var rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(){function t(){this.archive={}}return t.prototype.versionForData=function(t){if(void 0===this.currentVersion)this.currentVersion=1,this.oldestVersion=1;else{if(t===this.archive[this.currentVersion])return this.currentVersion;this.currentVersion++}var e=this.currentVersion;return this.archive[e]=t,e},t.prototype.retrieveVersion=function(t){if(!this.archive.hasOwnProperty(t))throw new ot;return this.archive[t]},t.prototype.validVersion=function(t){return void 0!==this.currentVersion&&t>=1&&t<=this.currentVersion},t.prototype.versionCount=function(){return Object.keys(this.archive).length},t.prototype.purgeVersionsOlderThan=function(t){if(!(void 0===this.currentVersion||t>this.currentVersion||void 0===this.oldestVersion||t<=this.oldestVersion)){for(var e=this.oldestVersion;e<t;e++)delete this.archive[e];this.oldestVersion=t}},t}(),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e}(i.m),at=function(){function t(t,e,n){this.localState=t,this.mergeFunction=e,this.currentlyMyTurn=n,this.outgoingMessages=new i.p,this.acknowledgedVersions=new i.p,this.localVersionArchive=new it}return t.prototype.currentVersion=function(){return this.localDataAndVersion().currentVersion},t.prototype.replicatedVersions=function(){return this.acknowledgedVersions},t.prototype.myTurn=function(){return this.currentlyMyTurn},t.prototype.versionArchiveSize=function(){return this.localVersionArchive.versionCount()},t.prototype.handleLocalChange=function(){this.sendCurrentState()},t.prototype.replicationMessages=function(){return this.outgoingMessages},t.prototype.handleIncomingMessage=function(t){var e,n,r=t.containedReceiverVersion;if(void 0!==r){if(!this.localVersionArchive.validVersion(r))return;this.localVersionArchive.purgeVersionsOlderThan(r),this.acknowledgedVersions.next(r)}void 0===this.lastRemoteMove&&this.currentlyMyTurn||(e=this.lastRemoteMove,n=t,(void 0===e||!(n.senderVersion<e.senderVersion)&&(void 0===e.containedReceiverVersion||void 0!==n.containedReceiverVersion&&n.containedReceiverVersion>=e.containedReceiverVersion))&&(this.incomingMessageAlreadyContained(t)||ut(this.myLastMove,t)&&(this.performMerge(t),this.currentlyMyTurn=!0,this.lastRemoteMove=t,this.sendCurrentState())))},t.prototype.performMerge=function(t){var e=this.localDataAndVersion(),n=e.localData,r=e.currentVersion;t.containedReceiverVersion===r?this.localState.set(t.data):this.localState.set(this.threeWayMerge(n,t)),this.containedRemoteVersion=t.senderVersion},t.prototype.threeWayMerge=function(t,e){var n=e.containedReceiverVersion;return n?this.mergeFunction(t,e.data,this.localVersionArchive.retrieveVersion(n)):this.mergeFunction(t,e.data)},t.prototype.sendCurrentState=function(){var t=this.messageForCurrentState();this.currentlyMyTurn&&ut(this.lastRemoteMove,t)&&(this.myLastMove=t,this.currentlyMyTurn=!1),this.outgoingMessages.next(t)},t.prototype.messageForCurrentState=function(){var t=this.localDataAndVersion(),e=t.localData,n=t.currentVersion;return this.containedRemoteVersion?{data:e,senderVersion:n,containedReceiverVersion:this.containedRemoteVersion}:{data:e,senderVersion:n}},t.prototype.incomingMessageAlreadyContained=function(t){return void 0!==this.containedRemoteVersion&&t.senderVersion<=this.containedRemoteVersion},t.prototype.localDataAndVersion=function(){var t=this.localState.get();return{localData:t,currentVersion:this.localVersionArchive.versionForData(t)}},t}();function ut(t,e){if(void 0===t)return!0;var n=void 0!==e.containedReceiverVersion&&e.containedReceiverVersion>=t.senderVersion,r=void 0===t.containedReceiverVersion||t.containedReceiverVersion<e.senderVersion;return n&&r}var ct=function(){function t(t,e,n,r){var o=this;this.localState=t,this.remoteMessages=e,this.outgoingMessages=new i.c(void 0),this.stateChangeCausedByAgent=new i.e,this.replicatedVersions=new i.c(void 0),this.agent=new at({get:t.get,set:function(t){o.stateChangeCausedByAgent.runWith(!0,(function(){return o.localState.set(t)}))}},n,r),this.agent.replicationMessages().subscribe(this.outgoingMessages),this.agent.replicatedVersions().subscribe(this.replicatedVersions)}return t.prototype.myTurn=function(){return this.agent.myTurn()},t.prototype.versionArchiveSize=function(){return this.agent.versionArchiveSize()},t.prototype.subscriberCount=function(){return this.outgoingMessages.subscriberCount()},t.prototype.finishReplicating=function(){var t=this.agent.currentVersion();return this.replicatedVersions.filter(i.I).filter((function(e){return e>=t})).waitForFirst().then((function(){}))},t.prototype.replicationMessages=function(){var t=this;return new i.o((function(e){t.ensureStarted();var n=t.outgoingMessages.filter(i.I).subscribe(e);return function(){n.unsubscribe(),0===t.outgoingMessages.subscriberCount()&&t.ensureStopped()}}))},t.prototype.ensureStarted=function(){var t=this;this.activeSubscriptions||(this.activeSubscriptions=[this.localState.changes.subscribe((function(){t.stateChangeCausedByAgent.current()||t.agent.handleLocalChange()})),this.remoteMessages.subscribe((function(e){return t.agent.handleIncomingMessage(e)}))],this.agent.handleLocalChange())},t.prototype.ensureStopped=function(){this.activeSubscriptions&&(this.activeSubscriptions.forEach((function(t){return t.unsubscribe()})),this.activeSubscriptions=void 0)},t}();function st(t,e,n,r){var a=new i.o((function(t){return n.subscribe((function(e){return Object(o.a)((function(){return t.next(e)}))}))}));return new ct(function(t,e){var n=K(t,e);return{get:function(){return Object(g.m)(void 0,(function(){return n.get()}))},set:function(t){void 0!==t&&n.set(t)},changes:Object(g.h)((function(){return n.get()})).map((function(){}))}}(t,e),a,function(t){return"consumer"===t?ft:pt}(r),"source"===r)}function ft(t,e,n){return void 0===e?t:void 0===t?e:T(e,F(n,t))}function pt(t,e,n){return ft(e,t,n)}var lt=new(function(){function t(){}return t.prototype.toJSON=function(){return null},t}()),dt={results:[],total:0},ht=new g.a({recordedAs:"objquery",state:function(){return o.f.subState("objQuery")},loader:function(t,e,n){var r=t[0],o=t[1],u=t[2],c=e.push,s=e.wasCancelled;return function(t,e,n,r){if(r>0){var o=new bt(t,e,n,r-1);return Object(g.g)((function(){return o.continuationForNextBatch()}))}return i.n.resolve(void 0)}(r,o,n,u).then((function(t){if(s())throw new Error;var e=o.query,i=o.boost,u=o.offset,f=o.orderBy,p=o.includeDeleted,l={query:e,options:{site_aware:!0},size:n,continuation:t,include_objs:vt,boost:i,offset:u,order_by:f};return p&&(l.options.include_deleted=!0),a.c.retrieveObjQuery(r,l).then((function(t){vt=!1;var e=t.objs;return c((function(){var n=["workspace",r];e&&e.forEach((function(t){U.get(n,t._id).notifyBackendState(t)})),t.results.forEach((function(t){return function(t,e){Object(g.g)((function(){return X(t,e)}))}(n,t)}))})),{results:t.results,total:t.total,continuation:t.continuation}}))}))},invalidation:function(t){var e=t[0];return Object(g.m)(void 0,(function(){return f(e)}))||""}}),bt=function(){function t(t,e,n,r){this.data=ht.get([t,e,r],n)}return t.prototype.objIds=function(){return this.response().results},t.prototype.count=function(){return this.response().total||0},t.prototype.continuationForNextBatch=function(){return this.response().continuation},t.prototype.response=function(){return this.data.getWithDefault(dt)},t}();var vt=!0;var yt,gt=function(){function t(t,e,n){this.workspaceId=t,this.params=e,this.batchSize=n}return t.prototype.count=function(){return new bt(this.workspaceId,this.params,0,0).count()},t.prototype.iterator=function(){return new mt(this.workspaceId,this.params,this.batchSize)},t.prototype.iteratorFromContinuation=function(t){return new mt(this.workspaceId,this.params,this.batchSize,t)},t}(),mt=function(){function t(t,e,n,r){this.workspaceId=t,this.params=e,this.batchSize=n,this.batchNumber=0,this.currentIndex=0,r&&(this.batchNumber=r[0],this.currentIndex=r[1]),this.currentBatch=this.getObjIdQueryBatch()}return t.prototype.next=function(){if(!this.currentBatch)return{done:!0};if(this.currentObjIds||(this.currentObjIds=this.currentBatch.objIds()),this.currentIndex>=this.currentObjIds.length)return this.currentObjIds=void 0,this.currentIndex=0,this.currentBatch.continuationForNextBatch()?(this.batchNumber=this.batchNumber+1,this.currentBatch=this.getObjIdQueryBatch()):this.currentBatch=void 0,this.next();if(!this.priorObjIndex){var t={};if(this.batchNumber>0)this.getObjIdQueryBatch(this.batchNumber-1).objIds().forEach((function(e){t[e]=!0}));this.currentBatch.objIds().slice(0,this.currentIndex).forEach((function(e){t[e]=!0})),this.priorObjIndex=t}var e=this.currentObjIds[this.currentIndex];return this.currentIndex++,this.priorObjIndex[e]?this.next():(this.priorObjIndex[e]=!0,{value:e,done:!1})},t.prototype.continuation=function(){return this.currentBatch?[this.batchNumber,this.currentIndex]:void 0},t.prototype.getObjIdQueryBatch=function(t){return void 0===t&&(t=this.batchNumber),new bt(this.workspaceId,this.params,this.batchSize,t)},t}(),jt=function(){function t(t,e,n){this.workspaceId=t,this.idQuery=new gt(t,e,n)}return t.prototype.count=function(){return this.idQuery.count()},t.prototype.iterator=function(){return this.objDataQueryIterator(this.idQuery.iterator())},t.prototype.iteratorFromContinuation=function(t){var e=this.idQuery.iteratorFromContinuation(t);return this.objDataQueryIterator(e)},t.prototype.objDataQueryIterator=function(t){return new Ot(this.workspaceId,t)},t}(),Ot=function(){function t(t,e){this.iterator=e,this.objSpaceId=["workspace",t]}return t.prototype.next=function(){if(this.done)return this.done;var t=this.iterator.next().value;if(!t)return this.stop();var e=X(this.objSpaceId,t);return void 0===e?this.stop():e.isUnavailable()?this.next():{value:e,done:!1}},t.prototype.continuation=function(){var t;return null===(t=this.iterator)||void 0===t?void 0:t.continuation()},t.prototype.stop=function(){return this.done={done:!0},this.done},t}();function wt(t,e,n){return S("Search API"),new jt(t,e,n)}function _t(t){yt=t}var St=function(){function t(t,e){this.objSpaceId=t,this.objId=e,this.runningEnsured=!1,this.replicationProcess=st(t,e,Ct().objReplicationMessageStream(t,e),"consumer")}return t.prototype.processSubscriberCount=function(){return this.replicationProcess.subscriberCount()},t.prototype.notifyLocalState=function(){this.ensureRunning()},t.prototype.notifyBackendState=function(t){},t.prototype.finishReplicating=function(){return this.replicationProcess.finishReplicating()},t.prototype.finishSaving=function(){var t=this;return this.finishReplicating().then((function(){return Ct().finishSavingObj(t.objSpaceId,t.objId)}))},t.prototype.replicationMessageStream=function(){return this.replicationProcess.replicationMessages()},t.prototype.start=function(){this.ensureRunning()},t.prototype.ensureRunning=function(){this.runningEnsured||(this.replicationProcess.replicationMessages().subscribe((function(){return 0})),this.runningEnsured=!0)},t}();function Ct(){if(!yt)throw new i.j;return yt}var kt=new g.a({state:function(){return o.f.subState("objFieldDiffs")},loader:function(t){var e=t[0],n=t[1],r=t[2];return a.c.retrieveObjFieldDiffs(e,n,r)},invalidation:function(t){var e=t[0],n=t[1],r=t[2];return Et(e,r)+":"+Et(n,r)}});function Pt(t,e,n,r,i){if(L(t,e))return null;var o=kt.get([t,e,r]).getWithDefault({});return i?function(t,e,n){var r=n._widget_pool;if(r){var i=r[e];if(i)return At(t,i)}return null}(n,i,o):At(n,o)}function It(t){return!!t&&"widgetlist_diff"===t.format}function At(t,e){var n=e[Object(i.db)(t)];return n?n[1]:null}function Et(t,e){return"revision"===t[0]?"":function(t,e){var n=K(t,e);return n&&n.getAttribute("_version")||""}(t,e)}function Dt(t,e,n,r){var o=X(t,n),a=X(e,n);return o&&a?o.isUnavailable()&&a.isUnavailable()?null:o.isUnavailable()&&!a.isUnavailable()?"new":!o.isUnavailable()&&a.isUnavailable()?"deleted":function(t,e,n){var r=t.getWidgetWithBadPerformance(n),o=e.getWidgetWithBadPerformance(n);return r?o?function(t,e){var n=F(t,e);return Object.keys(n).some((function(t){return!Object(i.J)(t)||"_obj_class"===t}))}(r,o)?"edited":null:"deleted":o?"new":null}(o,a,r):null}},function(t,e,n){"use strict";var r;function i(t){r=t}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"f",(function(){return f})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return b})),n.d(e,"h",(function(){return S})),n.d(e,"k",(function(){return x})),n.d(e,"d",(function(){return F})),n.d(e,"e",(function(){return R}));var r=n(0),i=n(4),o=n(5),a="GET",u="SEND",c="STREAM",s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function f(t,e){var n=Object(o.c)(),f={};return Object.keys(t).forEach((function(o){var p=t[o];p===a&&(f[o]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var u=o,c=n.subState(u).subState(Object(r.y)(t)),f=new i.b({state:c,stream:e.stream.apply(e,s([u],t))});return f.get()}),p===u&&(f[o]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.send.apply(e,s([o],t))}),p===c&&(f[o]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.stream.apply(e,s([o],t))})})),f}var p=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function l(t,e){return{stream:function(n){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];var s=e[n],f=t[n];if(f===a)return Object(i.h)((function(){return s.call.apply(s,p([e],o))}));if(f===c){var l=s.call.apply(s,p([e],o));return l}throw new r.j("unexpected method type "+f)},send:function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=e[t],a=new r.n((function(t){Object(r.R)((function(){return t(o.call.apply(o,p([e],n)))}))}));return a}}}n(55);function d(t){return{incomingMessages:new r.o((function(e){function n(t){e.next({data:t.data})}return t.addEventListener("message",n),t.start(),function(){t.removeEventListener("message",n)}})),sendMessage:function(e){void 0===e.transfer?t.postMessage(e.data):t.postMessage(e.data,e.transfer)}}}var h=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function b(t){return{incomingMessages:new r.o((function(e){function n(t){e.next({remoteOrigin:t.origin,remoteWindow:t.source,data:t.data,ports:t.ports})}return t.addEventListener("message",n),function(){t.removeEventListener("message",n)}})),sendMessage:function(t){t.remoteWindow.postMessage(t.data,t.remoteOrigin,h(t.ports||[]))}}}var v=function(){function t(t){this.muxedStream=t,this.openStreams={}}return t.prototype.streamWithId=function(t){var e=this;return new r.o((function(n){e.ensureSubscribed();var r=e.subjectForStreamId(t).subscribe(n);return function(){r.unsubscribe(),e.removeSubjectIfAbandoned(t)}}))},t.prototype.removeSubjectIfAbandoned=function(t){0===this.subjectForStreamId(t).subscriberCount()&&(delete this.openStreams[t],this.unsubscribeIfAbandoned())},t.prototype.subjectForStreamId=function(t){var e=this.openStreams[t];if(e)return e;var n=new r.p;return this.openStreams[t]=n,n},t.prototype.ensureSubscribed=function(){var t=this;this.subscription||(this.subscription=this.muxedStream.subscribe({next:function(e){var n=e.streamId,r=t.openStreams[n];r&&r.next(e.data)},complete:function(){return Object.keys(t.openStreams).forEach((function(e){var n=t.openStreams[e];n&&(n.complete(),delete t.openStreams[e])}))}}))},t.prototype.unsubscribeIfAbandoned=function(){0===Object.keys(this.openStreams).length&&this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},t}();function y(t){return t&&"number"==typeof t.channel&&"string"==typeof t.verb}function g(t){return"string"==typeof t.method&&Array.isArray(t.params)}function m(t){return"CLOSE"===t.verb}function j(t){return"RESPOND"===t.verb&&"number"==typeof t.sequence}function O(t){return"ERROR"===t.verb}var w,_=(w=function(t,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function S(t){return new C(t)}var C=function(){function t(t){this.portLink=t,this.channelCounter=1,this.incomingChannels=new v(this.portLink.incomingMessages.map((function(t){return t.data})).filter(y).map((function(t){return{streamId:t.channel,data:t}})))}return t.prototype.stream=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return new r.o((function(r){var i,o=e.getNextChannelId();e.postMessage({channel:o,verb:"OPEN",method:t,params:n});var a=e.incomingChannels.streamWithId(o).subscribe((function(t){if(j(t)){if(void 0!==i&&t.sequence<=i)return;r.next(t.data),i=t.sequence}}));return function(){e.postMessage({channel:o,verb:"CLOSE"}),a.unsubscribe()}}))},t.prototype.send=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.getNextChannelId();this.postMessage({channel:r,verb:"SEND",method:t,params:e});var i=this.incomingChannels.streamWithId(r).filter(A).waitForFirst().then((function(t){if(O(t))throw new k;return t.data}));return i},t.prototype.postMessage=function(t){this.portLink.sendMessage({data:t,transfer:P(t)})},t.prototype.getNextChannelId=function(){return this.channelCounter++},t}(),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e}(r.m);function P(t){if("SEND"===t.verb)return t.params.filter(I)}function I(t){return t instanceof MessagePort}function A(t){return j(t)||O(t)}function E(t,e,n){return t[n.methodName]===e}var D=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function x(t,e,n){new M(t,e,n).start()}var M=function(){function t(t,e,n){this.portLink=t,this.adapterConnection=e,this.description=n,this.incomingMessages=t.incomingMessages.map((function(t){return t.data})).filter(y),this.incomingChannels=new v(this.incomingMessages.map((function(t){return{streamId:t.channel,data:t}})))}return t.prototype.start=function(){var t=this;this.incomingMessages.subscribe((function(e){!function(t){return"OPEN"===t.verb&&g(t)}(e)?function(t){return"SEND"===t.verb&&g(t)}(e)&&t.handleSendMessage(e):t.handleOpenStreamMessage(e)}))},t.prototype.handleOpenStreamMessage=function(t){var e=this,n=T(t),i=this.adapterStreamForInvocation(n);if(i){var o=t.channel,a=1,u=i.subscribe((function(t){e.postMessage({verb:"RESPOND",data:t,channel:o,sequence:a}),a++}));this.incomingChannels.streamWithId(o).filter(m).waitForFirst().then((function(){return u.unsubscribe()})).catch((function(t){if(u.unsubscribe(),!(t instanceof r.h))throw t}))}},t.prototype.adapterStreamForInvocation=function(t){var e,n;return E(this.description,a,t)?(e=this.adapterConnection).stream.apply(e,D([t.methodName],t.params)):E(this.description,c,t)?(n=this.adapterConnection).stream.apply(n,D([t.methodName],t.params)):void 0},t.prototype.handleSendMessage=function(t){var e,n=this,i=T(t);E(this.description,u,i)&&(e=this.adapterConnection).send.apply(e,D([i.methodName],i.params)).then((function(e){return n.postMessage({verb:"RESPOND",data:e,channel:t.channel,sequence:1})}),(function(e){n.postMessage({verb:"ERROR",channel:t.channel}),Object(r.cb)(e)}))},t.prototype.postMessage=function(t){this.portLink.sendMessage({data:t})},t}();function T(t){return{methodName:t.method,params:t.params}}function F(t){return{incomingMessages:Object(r.q)(t.then((function(t){return t.incomingMessages}))),sendMessage:function(e){return t.then((function(t){return t.sendMessage(e)}))}}}function R(t,e){var n=Object(r.W)();return e.sendMessage({remoteWindow:t,remoteOrigin:"*",data:{type:"ScrivitoConnectRequest",requestId:n,clientVersion:Object(r.G)()}}),e.incomingMessages.filter((function(e){return e.remoteWindow===t})).map((function(t){var e=t.data;if(function(t){return t&&"ScrivitoConnectResponse"===t.type}(e)&&e.requestId===n&&t.ports&&t.ports.length>0)return{port:t.ports[0],origin:t.remoteOrigin}})).filter(r.I).waitForFirst()}},function(t,e,n){"use strict";n.d(e,"b",(function(){return W})),n.d(e,"j",(function(){return B})),n.d(e,"c",(function(){return U})),n.d(e,"i",(function(){return V})),n.d(e,"f",(function(){return C})),n.d(e,"d",(function(){return z})),n.d(e,"e",(function(){return H})),n.d(e,"g",(function(){return Q})),n.d(e,"h",(function(){return G})),n.d(e,"a",(function(){return J}));var r={};n.r(r),n.d(r,"ERROR_CODE_CLIENT_VERIFICATION_REQUIRED",(function(){return y})),n.d(r,"perform",(function(){return g})),n.d(r,"reset",(function(){return m})),n.d(r,"currentState",(function(){return O}));var i;function o(){i=0}var a,u,c={init:function(t){o();var e=t.location,n=e.hash,r=n.indexOf("&scrivito.authFailedCount=");if(!(r<0)){var a=n.substr(r+"&scrivito.authFailedCount=".length,3),u=n.substring(0,r);"#"===u&&(u="");var c=e.href.toString().replace(n,u);i=parseInt(a,10)||0,t.history.replaceState({},"",c)}},augmentedRedirectUrl:function(t){var e=t.toString();return t.hash||(e+="#"),e+"&scrivito.authFailedCount="+(i+1)},reset:o,currentFailureCount:function(){return i}},s=n(0),f=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.message=e,i.code=n,i.details=r,i}return f(e,t),e}(s.m),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(p);u={},window._scrivitoRegisterVerificator=function(t,e){u[t].resolve(e)};var h,b,v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y="client_verification_required";!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}v(e,t)}(d);function g(t){return t(j()).catch((function e(n){if(!function(t){return t instanceof d&&t.code===y}(n))throw n;return function(t){if(!h){var e=t.verificator,n=t.data,r=(i=e.id,o=e.url,a=u[i],a||(a=new s.g,u[i]=a,Object(s.O)(o)),a.promise).then((function(t){return new s.n((function(e){t(n,(function(t){e((b=t).authorization)}))}))}));h={challenge:{verificator:e,data:n},promise:Object(s.U)(r,(function(){h=void 0}))}}var i,o,a;return h.promise}(n.details).then(t).catch(e)}))}function m(){h=void 0,b=void 0}function j(){if(b){if(!(b.expiresAfter<new Date))return b.authorization;b=void 0}}function O(){var t=j();if(t)return"Authorization: "+t;if(h){var e=h.challenge;return"Pending computation: "+e.verificator.id+" with "+e.data}return null}var w=n(1),_=!1,S=0;function C(){return S>0}function k(t,e,n){var r=n.params,i=n.authorization,o=n.forceVerification;return _?s.n.resolve(new XMLHttpRequest):(S+=1,new s.n((function(n,a){var u=function(t,e,n,r){var i=new XMLHttpRequest;function o(t){!function(t,e){S-=1,e(t)}(new M(t),r)}return i.open("POST"===t?"POST":"PUT",e),i.timeout=15e3,i.withCredentials=!0,i.onload=function(){return function(t,e,n){S-=1;var r=t.status;if(!r||!Object(w.isNumber)(r)){var i="Unexpected response status: "+r+"; body: "+(0===r?t.statusText:t.responseText);n(new M(i))}e(t)}(i,n,r)},i.onerror=function(){return o("XMLHttpRequest Error")},i.ontimeout=function(){return o("XMLHttpRequest Timeout")},i.onabort=function(){return o("XMLHttpRequest Aborted")},i}(t,e,n,a);i&&u.setRequestHeader("Authorization",i),u.setRequestHeader("Scrivito-Client","jssdk/"+Object(s.G)()),o&&u.setRequestHeader("Scrivito-Force-Verification","true"),u.setRequestHeader("Content-type","application/json; charset=utf-8"),u.send(JSON.stringify(r))})))}var P,I,A=n(11),E=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(t){function e(e){var n=t.call(this,"Insufficient authorization - please visit "+e)||this;return n.target=e,n}return E(e,t),e}(s.m),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e}(p),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e}(s.m),T=function(){function t(){this.initDeferred=new s.g,this.authHeaderValueProvider=r}return t.prototype.init=function(t,e){this.tenant=e,this.endpoint=t,this.url="https://"+t+"/tenants/"+e+"/perform",this.initDeferred.resolve()},t.prototype.setAuthProvider=function(t){this.authHeaderValueProvider=t},t.prototype.get=function(t,e){return this.perform("GET",t,e)},t.prototype.put=function(t,e){return this.perform("PUT",t,e)},t.prototype.post=function(t,e){return this.perform("POST",t,e)},t.prototype.delete=function(t,e){return this.perform("DELETE",t,e)},t.prototype.requestBuiltInUserSession=function(t,e){var n=this,r=e?{idp:e}:void 0;return this.ensureInitialized().then((function(){return n.ajax("PUT","sessions/"+t,r)})).then((function(t){return c.reset(),t}))},t.prototype.requestVisitorSession=function(t,e){var n=this;return this.ensureInitialized().then((function(){return n.ajax("PUT","sessions/"+t,void 0,"id_token "+e)}))},t.prototype.enableForceVerification=function(){this.forceVerification=!0},t.prototype.currentPublicAuthorizationState=function(){return this.authHeaderValueProvider?this.authHeaderValueProvider.currentState?"[API] "+this.authHeaderValueProvider.currentState():"[API]: authorization provider without currentState()":"[API]: no authorization provider"},t.prototype.ensureInitialized=function(){return this.initDeferred.promise},t.prototype.perform=function(t,e,n){var r=this;return this.ensureInitialized().then((function(){return r.send(t,e,n).then((function(t){return function(t){return!!t&&!!t.task&&1===Object.keys(t).length}(t)?r.handleTask(t.task):t}))}))},t.prototype.send=function(t,e,n){var r=this;return this.authHeaderValueProvider.perform((function(i){return r.ajax(t,e,n,i)}))},t.prototype.ajax=function(t,e,n,r){var i=this,o={authorization:r,forceVerification:this.forceVerification,params:{path:e,verb:t,params:n||{}}},a=function(){return function t(e,n){void 0===n&&(n=0);if(I)return new s.n((function(t){return t(e())}));return e().then((function(r){if(429!==r.status)return r;if(P&&n>19)throw new Error("Maximum number of rate limit retries reached");var i=Number(r.getResponseHeader("Retry-After"))||0,o=Math.max(1e3*i,F(n));return Object(s.fb)(o).then((function(){return t(e,n+1)}))}))}((function(){return k(t,i.url,o)})).then(R)};return"POST"===t?a():function t(e,n){void 0===n&&(n=0);if(I)return new s.n((function(t){return t(e())}));return e().catch((function(r){if(r instanceof M){if(P&&n>5)throw r;return Object(s.fb)(F(n)).then((function(){return t(e,n+1)}))}throw r}))}(a)},t.prototype.handleTask=function(t){var e=this;switch(t.status){case"success":return t.result;case"error":throw new p(t.message,t.code,{});case"exception":throw new M(t.message);case"open":return Object(s.eb)(2).then((function(){return e.get("tasks/"+t.id).then((function(t){return e.handleTask(t)}))}));default:throw new M("Invalid task response (unknown status)")}},t}();function F(t){return 500*Math.pow(2,Math.min(t,16))}function R(t){var e,n=t.status;try{e=JSON.parse(t.responseText)}catch(r){throw new M(t.responseText)}if(n>=200&&n<300)return e;var r=function(t,e,n){if("4"!==t.toString()[0]){var r=e.error;return new M(500===t&&"string"==typeof r?r:n)}var i=function(t){var e=t.error,n=t.code,r=t.details;if("string"!=typeof e)throw new M("Malformed error response: key error is not a string");if(void 0!==n&&"string"!=typeof n)throw new M("Malformed error response: optional key code is not a string");return{message:e,code:n||"",details:r||{}}}(e),o=i.message,a=i.code,u=i.details;if("auth_missing"===a)return function(t){return"string"==typeof t.visit}(u)?new D((s=u.visit,f=c.augmentedRedirectUrl(Object(A.e)()),s.replace("retry=RETRY","retry="+c.currentFailureCount()).replace(/\$RETURN_TO/,encodeURIComponent(f)))):new M("Malformed error response: key visit is not a string");var s,f;return 401===t?new d(o,a,u):403===t?new x(o,a,u):new p(o,a,u)}(n,e,t.responseText);if(r instanceof D)return Object(A.i)(r.target),Object(s.Q)();throw r}var W=new T;var N={};function B(t,e){return function(t){var e=Object(s.y)(t),n=N[e];n||(n=function(t){var e=t[0],n=t[1],r=e+"s/"+n+"/objs/mget",i="workspace"===e||void 0;return new s.b((function(t){return W.get(r,{ids:t,include_deleted:i}).then((function(e){return e.results.map((function(e,n){return e||{_deleted:t[n],_version:""}}))}))}),{batchSize:17})}(t),N[e]=n);return n}(t).retrieve(e)}function L(t){return t[0]+":"+t[1]}var q=new s.b((function(t){return W.get("blobs/mget",{blobs:t}).then((function(e){return e.results.map((function(e,n){return function(t,e){var n=e.public_access.get;if(!n.url)throw new s.j('Missing public access URL for binary "'+t+'"');var r={public_access:{get:{url:n.url}}},i=e.private_access;if(i){var o=i.get;o.url&&(r.private_access={get:{url:o.url}})}return r}(t[n].id,e)}))}))}));var U={retrieveObjQuery:function(t,e){return function(t,e){return W.get("workspaces/"+t+"/objs/search",e).then((function(t){var e=t.results,n=t.total,r=t.continuation,i=t.objs;return{results:e.map((function(t){return t.id})),continuation:r,total:n,objs:i}}))}(t,e)},retrieveFacetQuery:function(t,e){return function(t,e){var n="workspaces/"+t+"/objs/search";return W.get(n,e)}(t,e)},retrieveSuggest:function(t,e){return function(t,e){var n="workspaces/"+t+"/objs/search/suggest";return W.put(n,e)}(t,e)},retrieveBinaryMetadata:function(t,e){return function(t,e){var n={};return(null==e?void 0:e.accessVia)&&(n.access_via=L(e.accessVia)),W.get("blobs/"+encodeURIComponent(t||"")+"/meta_data",n)}(t,e)},retrieveBinaryUrls:function(t,e,n){return function(t,e,n){var r={id:t};return e&&(r.transformation=e),(null==n?void 0:n.accessVia)&&(r.access_via=L(n.accessVia)),q.retrieve(r)}(t,e,n)},retrieveObjFieldDiffs:function(t,e,n){return function(t,e,n){return W.get("objs/"+n+"/diff",{from:L(t),to:L(e)})}(t,e,n)}};function V(t){U=t}function z(t,e){return W.get("workspaces/"+t+"/changes",{from:e})}function H(t){return!t._deleted}function Q(t){return!!t._deleted}function G(t){return"widgetlist"===t[0]}var J=function(){function t(){this.sessionId=Object(s.W)(),this.idToken=new s.g,this.state="waiting for token",this.sessionRequest=this.fetchSession()}return t.prototype.setToken=function(t){this.idToken.isPending()||(this.idToken=new s.g,this.renewSession()),this.idToken.resolve(t),this.state="active - token: "+t.substr(0,3)+"..."},t.prototype.currentState=function(){return this.state},t.prototype.perform=function(t){var e=this,n=this.sessionRequest;return n.then((function(r){return t("Session "+r.token).catch((function(r){if(!(r instanceof d))throw r;return e.sessionRequest===n&&e.renewSession(),e.perform(t)}))}),(function(e){return g(t)}))},t.prototype.renewSession=function(){this.sessionRequest=this.fetchSession()},t.prototype.fetchSession=function(){var t=this;return this.idToken.promise.then((function(e){return W.requestVisitorSession(t.sessionId,e)})).catch((function(t){throw Object(s.cb)(new s.m("Failed to establish visitor session: "+t.message)),t}))},t}()},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=window),t.devicePixelRatio||1}function i(){return window.location}function o(){return window.name}function a(t){i().assign(t)}function u(){return window.screen}function c(){return document}function s(){return window.innerHeight}function f(){return window.pageXOffset}function p(){return window.pageYOffset}function l(t,e){window.scrollTo(t,e)}function d(){return c().body.scrollHeight}n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"i",(function(){return a})),n.d(e,"j",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return p})),n.d(e,"k",(function(){return l})),n.d(e,"c",(function(){return d}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return f})),n.d(e,"c",(function(){return p}));var r=n(2),i=n(11),o=!1,a=!1;function u(){return!!s().workspaceId}function c(){var t=s(),e=t.workspaceId||"published";Object(r.D)(e),o=!!t.inPlaceEditingActive,a=!o&&!!t.comparisonActive}function s(){var t=i.f(),e=t.indexOf(" _scrivito {");if(-1===e)return{};var n=JSON.parse(t.substring(e+11)),r=n.editing,o=n.comparison;return{workspaceId:n.workspaceId,inPlaceEditingActive:!!r,comparisonActive:!!o}}function f(){return o}function p(){return a}},function(t,e){t.exports=n},function(t,e,n){"use strict";n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return wt})),n.d(e,"n",(function(){return _t})),n.d(e,"o",(function(){return Pt})),n.d(e,"a",(function(){return $t})),n.d(e,"b",(function(){return Ce})),n.d(e,"c",(function(){return cn})),n.d(e,"d",(function(){return bn})),n.d(e,"e",(function(){return On})),n.d(e,"f",(function(){return wn})),n.d(e,"i",(function(){return _n})),n.d(e,"g",(function(){return ge})),n.d(e,"h",(function(){return Sn})),n.d(e,"j",(function(){return gt})),n.d(e,"k",(function(){return pt}));var r=n(3),i=n(4),o=n(0),a=n(5),u=n(44);function c(t){return t.displayName||t.name}function s(t){if(r.isValidElement(t))return t.props.__scrivitoForwardElementType||t.type}var f,p=n(7),l=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(){return(d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function h(t){if("function"!=typeof t)throw new o.a("Scrivito.connect expects either a plain function or a subclass of React.Component");return function(t){return!0===t._isScrivitoConnectedComponent}(t)?t:function(t){return"function"==typeof t&&t.prototype&&t.prototype.isReactComponent}(t)?b(t):b((e=t,(n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return l(n,t),n.prototype.render=function(){return e(this.props)},n}(r.Component)).displayName=c(e),n));var e,n}function b(t){var e,n=((e=function(t){function e(e){var n=t.call(this,e)||this;return n._scrivitoPrivateConnector=new y(n),n}return l(e,t),e.prototype.componentDidMount=function(){this._scrivitoPrivateConnector.componentDidMount(),t.prototype.componentDidMount&&t.prototype.componentDidMount.call(this)},e.prototype.componentWillUnmount=function(){this._scrivitoPrivateConnector.componentWillUnmount(),t.prototype.componentWillUnmount&&t.prototype.componentWillUnmount.call(this)},e.prototype.render=function(){var e=this;return this._scrivitoPrivateConnector.render((function(){return t.prototype.render.call(e)}))},e}(t))._isScrivitoConnectedComponent=!0,e);return n.displayName=c(t),n}var v=r.createContext(0),y=function(){function t(t){this.component=t,this.isMounted=!1,this.loadingSubscriber=new i.c}return t.prototype.componentDidMount=function(){var t=this;if(void 0===this.hierachyLevel)throw new o.j;if(this.stateSubscriber=Object(a.d)((function(){return t.component.forceUpdate()}),this.hierachyLevel),this.isMounted=!0,this.onMount){var e=this.onMount.bind(this);delete this.onMount,e()}},t.prototype.componentWillUnmount=function(){this.stateSubscriber&&this.stateSubscriber.unsubscribe(),this.unregisterLoadingActivity(),this.isMounted=!1,this.loadingSubscriber.unsubscribe()},t.prototype.render=function(t){var e=this,n=this.renderLoadingAware(t);return r.createElement(v.Consumer,d({},{__scrivitoForwardElementType:s(n)}),(function(t){return e.grabHierarchyLevel(t,r.createElement(v.Provider,{value:t+1},n))}))},t.prototype.grabHierarchyLevel=function(t,e){return this.hierachyLevel=t,e},t.prototype.renderLoadingAware=function(t){var e=this;if(Object(i.f)())return g(t);var n=Object(i.d)((function(){return Object(a.i)((function(){return Object(p.t)((function(){return g(t)}))}))})),r=n.result,c=r.accessedState,s=r.result;return this.whenMounted((function(){if(!e.stateSubscriber)throw new o.j;e.stateSubscriber.subscribeChanges(c),n.subscribeLoading(e.loadingSubscriber),n.isAllDataLoaded()?e.unregisterLoadingActivity():e.unregisterLoadingActivityCallback||(e.unregisterLoadingActivityCallback=Object(u.b)())})),n.isAllDataLoaded()?s:this.handleLoading(s)},t.prototype.whenMounted=function(t){this.isMounted?t():this.onMount=t},t.prototype.handleLoading=function(t){return this.component._scrivitoRenderWhileLoading?this.component._scrivitoRenderWhileLoading():t},t.prototype.unregisterLoadingActivity=function(){var t=this.unregisterLoadingActivityCallback;t&&(delete this.unregisterLoadingActivityCallback,t())},t}();function g(t){var e=Object(i.o)((function(){return Object(a.k)({contextName:"React.Component#render",message:"Use one of the React lifecycle hooks."},t)}));return e.success?e.result:null}var m,j={};function O(t,e){j[t]=e}function w(t){return j[t]||null}function _(t){return w(S(t))}function S(t){return"appClass-"+t}var C=0,k={};var P=n(8);var I=n(46),A=n(52),E=n(59),D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=function(){return(x=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function M(t){var e;return(e=function(e){function n(t){var n=e.call(this,t)||this;return n.registeredElement=new W,n}return D(n,e),n.prototype.render=function(){return r.createElement(t,x(x({},this.props),{registeredElement:this.registeredElement}))},n}(r.Component)).displayName=c(t)+"WithRegisteredElement",e}function T(t,e){var n;return(n=function(n){function i(t){var e=n.call(this,t)||this;return e.registeredElement=new W,e}return D(i,n),i.prototype.componentDidMount=function(){this.unregisterContentZone=Object(E.b)(this.registeredElement.id(),t(this.props),this.context)},i.prototype.componentWillUnmount=function(){this.unregisterContentZone&&this.unregisterContentZone()},i.prototype.render=function(){return r.createElement(R.Provider,{value:this.registeredElement.id()},r.createElement(e,x(x({},this.props),{registeredElement:this.registeredElement})))},i}(r.Component)).displayName=c(e)+"WithContentZone",n.contextType=R,n}var F,R=r.createContext(void 0),W=function(){function t(){this.elementId=t.generateId()}return t.generateId=function(){return this.currentId++,this.currentId},t.prototype.id=function(){return this.elementId},t.prototype.set=function(t){t?Object(A.b)(this.elementId,t):Object(A.c)(this.elementId)},t.currentId=0,t}(),N=n(20),B=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=M(h(((F=function(t){function e(e){var n=t.call(this,e)||this;return n.onClick=n.onClick.bind(n),n}return B(e,t),e.prototype.render=function(){var t=this,e=function(t,e){var n={iconClassName:"scrivito_icon",markerClassName:"scrivito_editing_marker"};switch(t){case"new":n.iconClassName+=" scrivito_icon_inv_plus",n.tooltip=q("widget_is_new");break;case"edited":switch(n.iconClassName+=" scrivito_icon_edited",e){case"new":n.markerClassName+=" scrivito_widget_moved_icon",n.tooltip=q("widget_is_edited_and_dragged_here");break;case"deleted":n.markerClassName+=" scrivito_widget_moved_icon",n.tooltip=q("widget_is_edited_and_dragged_away"),n.disableMenu=!0;break;default:n.tooltip=q("widget_is_edited")}break;case"deleted":n.iconClassName+=" scrivito_icon_trash",n.tooltip=q("widget_is_deleted");break;default:switch(n.iconClassName+=" scrivito_icon_moved",e){case"new":n.tooltip=q("widget_is_dragged_here");break;case"deleted":n.tooltip=q("widget_is_dragged_away"),n.disableMenu=!0}}return n}(this.props.modification,this.props.placementModification),n=e.iconClassName,i=e.markerClassName,o=e.tooltip,a=e.disableMenu?void 0:this.onClick;return r.createElement("span",{ref:function(e){return t.props.registeredElement.set(e)},className:a?i:i+" scrivito_disabled",title:o,onClick:a,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut},r.createElement("i",{className:n}),r.createElement("span",{className:"scrivito_editing_marker_title"},Object(I.a)(this.props.widget)))},e.prototype.onClick=function(t){t.preventDefault(),t.stopPropagation(),Object(N.a)().showWidgetMenu(this.props.registeredElement.id(),this.props.widget.obj().id(),this.props.widget.id())},e}(r.Component)).displayName="Scrivito.ContentTag.ComparisonMenuMarker",F)));function q(t){return function(t){if(P.b)return P.b.translate(t)}("widget_marker."+t)}var U,V,z,H=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q=M(h(((U=function(t){function e(e){var n=t.call(this,e)||this;return n.onClick=n.onClick.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDragEnd=n.onDragEnd.bind(n),n}return H(e,t),e.prototype.render=function(){var t=this;return r.createElement("span",{ref:function(e){return t.props.registeredElement.set(e)},className:"scrivito_editing_marker",title:this.props.tooltip,onClick:this.onClick,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,draggable:!0,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},r.createElement("i",{className:"scrivito_icon"}),r.createElement("span",{className:"scrivito_editing_marker_title"},Object(I.a)(this.props.widget)))},e.prototype.onClick=function(t){t.preventDefault(),t.stopPropagation(),Object(N.a)().showWidgetMenu(this.props.registeredElement.id(),this.props.widget.obj().id(),this.props.widget.id())},e.prototype.onDragStart=function(t){var e=t.dataTransfer,n=t.target;e.effectAllowed="move";try{e.setData("text/plain",n.id)}catch(t){}Object(N.a)().startDrag(this.props.widget.obj().id(),this.props.widget.id()),this.props.setDragState(!0)},e.prototype.onDragEnd=function(){Object(N.a)().endDrag(),this.props.setDragState(!1)},e}(r.Component)).displayName="Scrivito.ContentTag.EditingMenuMarker",U))),G=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=h(((V=function(t){function e(e){var n=t.call(this,e)||this;return n.onClick=n.onClick.bind(n),n}return G(e,t),e.prototype.render=function(){var t="scrivito_option_marker scrivito_"+this.props.position;return this.props.isAlwaysShown&&(t+=" scrivito_visible"),r.createElement("span",{className:t,onClick:this.onClick,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut},r.createElement("i",{className:"scrivito_icon scrivito_icon_marker_plus"}))},e.prototype.onClick=function(t){t.stopPropagation(),this.props.insertWidget(this.props.widget,this.props.position)},e}(r.Component)).displayName="Scrivito.OptionMarker",V)),Z=n(2);function Y(t){var e=P.b;return e&&Object(i.j)(!1,(function(){return e.canEdit(Object(Z.s)(),t)}))||!1}var X,K,$,tt,et=($=!0,(z={Provider:(tt=r.createContext($)).Provider,Consumer:(X=tt.Consumer,K=h((function(t){return(0,t.callback)(t.value)})),function(t){var e=t.children;return r.createElement(X,null,(function(t){return r.createElement(K,{callback:e,value:t})}))})}).Consumer),nt=z.Provider,rt=n(6);function it(){return P.b&&P.b.comparisonBase()||p.e}var ot=n(43),at=n(15),ut=n(12),ct=n(34);function st(t){t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}var ft=!1;function pt(){ft=!0}var lt,dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ht=function(){return(ht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},bt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},vt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},yt=r.createContext({}),gt=h((function(t){t.widget,t.placementModification,t.registeredElement;var e=bt(t,["widget","placementModification","registeredElement"]);return r.createElement(yt.Consumer,null,(function(t){return r.createElement(mt,ht({},t,e))}))})),mt=T((function(t){var e=t.widget;if(!e)throw new o.j("Missing widget");return{type:"widget",objId:e.obj().id(),widgetId:e.id()}}),h(((lt=function(t){function e(e){var n=t.call(this,e)||this;return n.state={hasFocus:!1,isDragging:!1,isFocusFadedOut:!0,isRevealed:!1,isRevealedOdd:!1},n.onMouseOver=n.onMouseOver.bind(n),n.onMouseOut=n.onMouseOut.bind(n),n.onWidgetFocus=n.onWidgetFocus.bind(n),n.onWidgetBlur=n.onWidgetBlur.bind(n),n.lockFocus=n.lockFocus.bind(n),n.unlockFocus=n.unlockFocus.bind(n),n.setDragState=n.setDragState.bind(n),n}return dt(e,t),e.prototype.componentDidMount=function(){var t,e,n=this,r=this.getWidget(),i=this.widgetTagElement;i&&Object(ct.a)({objId:r.obj().id(),widgetId:r.id()},(function(){st(i),n.setRevealed()})),this.focusToken=(t={onFocus:this.onWidgetFocus,onBlur:this.onWidgetBlur},k[e=C]=t,C+=1,e)},e.prototype.componentWillUnmount=function(){var t;t=this.focusToken,delete k[t]},e.prototype.render=function(){var t=this;if(Object(ut.d)()&&Y(this.getWidget().obj().id()))return r.createElement(et,null,(function(e){return e?t.renderWithEditingMarker():t.renderWithoutMarker()}));if(Object(ut.c)()){var e=this.getWidget().modification(it()),n=this.props.placementModification;if((e||n)&&!this.isChildOfDeletedWidget(e,n))return this.renderWithComparisonMarker(e,n)}return this.renderWithoutMarker()},e.prototype.isChildOfDeletedWidget=function(t,e){return"deleted"===t&&!e},e.prototype.renderWithEditingMarker=function(){var t,e=this,n=this.getWidget(),i=Object(ot.a)(n);return r.createElement(this.props.tag,ht(ht(ht({},this.forwardedPropsWithMarker()),{ref:function(t){e.props.registeredElement.set(t),e.widgetTagElement=t},className:this.className(),style:this.style(),onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,children:vt([r.createElement(Q,{key:"menuMarker",widget:n,tooltip:(t=i,t.map((function(t){return Object(o.D)(t.message)[0]})).join("\n")),setDragState:this.setDragState,onMouseOver:this.lockFocus,onMouseOut:this.unlockFocus})],r.Children.toArray(this.props.children),[this.renderOptionMarker("top"),this.renderOptionMarker("bottom")])}),this.dataProps({validationResults:i})))},e.prototype.renderWithComparisonMarker=function(t,e){var n=this;return r.createElement(this.props.tag,ht(ht(ht({},this.forwardedPropsWithMarker()),{ref:function(t){n.widgetTagElement=t},className:this.className(),style:this.style(),onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,children:vt([r.createElement(L,{key:"menuMarker",widget:this.getWidget(),modification:t,placementModification:e,onMouseOver:this.lockFocus,onMouseOut:this.unlockFocus})],r.Children.toArray(this.props.children))}),this.dataProps({modification:t||e})))},e.prototype.renderWithoutMarker=function(){var t=this;return r.createElement(this.props.tag,ht(ht({},this.forwardedProps()),{ref:function(e){t.widgetTagElement=e}}))},e.prototype.getWidget=function(){var t=this.props.widget;if(!t)throw new o.m("Detected inappropriate placing of Scrivito.WidgetTag: It is intended to be used exclusively as top-level element inside a Widget component.");return t},e.prototype.forwardedProps=function(){var t=this.props;t.tag,t.widget,t.placementModification,t.registeredElement;return bt(t,["tag","widget","placementModification","registeredElement"])},e.prototype.forwardedPropsWithMarker=function(){var t=this.forwardedProps();t.className,t.style;return bt(t,["className","style"])},e.prototype.setDragState=function(t){this.setState({isDragging:t})},e.prototype.className=function(){var t=this.props.className||"";return Object(ut.d)()&&this.hasVisibleFocus()&&(t+=" scrivito_active scrivito_entered"),Object(ut.c)()&&this.isDeleted()&&(t+=" scrivito_modification_opacity"),this.state.isRevealed&&(t+=this.state.isRevealedOdd?" scrivito_wiggle_odd":" scrivito_wiggle_even"),t},e.prototype.hasVisibleFocus=function(){return this.state.hasFocus&&!this.state.isFocusFadedOut},e.prototype.isDeleted=function(){return"deleted"===this.props.placementModification||"deleted"===this.getWidget().modification(it())},e.prototype.dataProps=function(t){var e=t.modification,n=t.validationResults,r={"data-scrivito-private-widget":"true","data-scrivito-private-dropzone":"true"};return this.isStructureWidget()&&(r["data-scrivito-private-structure-widget"]="true"),e&&(r["data-scrivito-private-widget-modification"]=e),this.hasValidationResultsFor("error",n)?r["data-scrivito-private-widget-validation-error"]="true":this.hasValidationResultsFor("warning",n)?r["data-scrivito-private-widget-validation-warning"]="true":this.hasValidationResultsFor("info",n)&&(r["data-scrivito-private-widget-validation-info"]="true"),r},e.prototype.hasValidationResultsFor=function(t,e){return!!e&&e.some((function(e){return e.severity===t}))},e.prototype.style=function(){return this.state.isDragging?this.props.style?ht(ht({},this.props.style),{opacity:.5}):{opacity:.5}:this.props.style},e.prototype.isStructureWidget=function(){var t=Object(at.a)(),e=this.getWidget();if(e){var n=t.widgetClassFor(e.objClass()),r=rt.c.forClass(n);if(r)return Object.keys(r.attributes).some((function(t){return"widgetlist"===r.attributes[t][0]}))}return!1},e.prototype.onMouseOver=function(t){var e,n;t.stopPropagation(),e=this.focusToken,(n=k[m=e])&&n.onFocus()},e.prototype.onMouseOut=function(t){t.stopPropagation(),function(t){if(t===m){var e=k[t];e&&e.onBlur()}}(this.focusToken)},e.prototype.onWidgetFocus=function(){var t=this;this.setState({hasFocus:!0,isFocusFadedOut:!1}),this.fadeOutFocusTimeout&&window.clearTimeout(this.fadeOutFocusTimeout),this.isStructureWidget()||(this.fadeOutFocusTimeout=window.setTimeout((function(){return t.fadeOutFocus()}),1e3))},e.prototype.fadeOutFocus=function(){this.state.isFocusFadedOut||this.isFocusLocked||this.setState({isFocusFadedOut:!0})},e.prototype.setRevealed=function(){this.setState({isRevealed:!0,isRevealedOdd:!this.state.isRevealedOdd})},e.prototype.lockFocus=function(){this.isFocusLocked=!0},e.prototype.unlockFocus=function(){this.isFocusLocked=!1},e.prototype.onWidgetBlur=function(){this.setState({hasFocus:!1})},e.prototype.renderOptionMarker=function(t){return r.createElement(J,{key:"optionMarker-"+t,position:t,widget:this.getWidget(),insertWidget:jt,isAlwaysShown:ft,onMouseOver:this.lockFocus,onMouseOut:this.unlockFocus})},e}(r.Component)).displayName="Scrivito.WidgetTag",lt.defaultProps={tag:"div"},lt)));function jt(t,e){P.b.insertWidget(t.obj().id(),t.id(),e)}var Ot=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function wt(t,e){!function(t){if("function"!=typeof t)throw new o.a("Scrivito.provideComponent expected a valid React component, but received "+Object(o.T)(t))}(e),function(t){return!(t.displayName||t.name&&"_class"!==t.name&&"class_"!==t.name.substring(0,6))}(e)&&(e.displayName=t),function(t,e){O(S(t),e)}(t,function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ot(e,t),e.prototype.render=function(){if(this.props.widget){var e=t.prototype.render.call(this);return s(e)!==gt?r.createElement(gt,{children:e}):e}return t.prototype.render.call(this)},e}(t);return e.displayName=c(t),e}(h(e)))}function _t(t,e){O(t,h(e))}var St,Ct=n(41),kt=n(11);function Pt(t,e){var n=w(t);if(null===n)throw new o.a('Component with ID "'+t+'" not found. Please make sure you registered it using "Scrivito.registerComponent".');(function(t){return t?function(t){return!!t.widgetId}(t)?function(t){return Object(i.g)((function(){return Z.c.get(t.objId)})).then((function(e){if(!e)throw new o.m("Missing obj with ID "+t.objId);var n=e.widget(t.widgetId);if(!n)throw new o.m("Missing widget with ID "+t.widgetId);return{widget:Object(rt.i)(Object(at.a)(),n)}}))}(t):function(t){return Object(i.g)((function(){return Z.c.get(t.objId)})).then((function(e){if(!e)throw new o.m("Missing obj with ID "+t.objId);var n=Object(rt.i)(Object(at.a)(),e);return{obj:n,page:n}}))}(t):o.n.resolve({})})(e).then((function(t){St?Ct.render(r.createElement(n,t),St):St=function(t,e,n){var i=t.createElement("div");return t.body.innerHTML="",t.body.appendChild(i),Ct.render(r.createElement(e,n),i),i}(Object(kt.b)(),n,t)}))}var It=n(1),At=n(26),Et=n(36),Dt=n(25),xt=n(60);function Mt(t){var e=new Image;return Tt(e)?function(t,e){if(!Tt(t))throw new Error("Browser does not support decode!");return t.src=e,function(t){return t.decode&&t.decode.bind(t)}(t)().then((function(){return t}))}(e,t):function(t,e){return new o.n((function(n,r){t.onload=function(){return n(t)},t.onerror=function(t){return r(t)},t.src=e}))}(e,t)}function Tt(t){return!!t.decode}function Ft(t,e,n,r){if(!Rt())throw new Error("Browser does not support getCSSCanvasContext!");return Rt()(t,e,n,r)}function Rt(){return document.getCSSCanvasContext&&document.getCSSCanvasContext.bind(document)}function Wt(){return!!Nt()}function Nt(){return document.mozSetImageElement&&document.mozSetImageElement.bind(document)}function Bt(t){var e=document.createElement("canvas");return e.height=t.height,e.width=t.width,Lt(t,e.getContext("2d")),e}function Lt(t,e){e.drawImage(t,0,0)}function qt(t){return Mt(t).then((function(e){return Wt()?function(t){var e=Bt(t),n="ScrivitoBackgroundImage"+Vt();return function(t,e){if(!Wt())throw new Error("Browser does not support mozSetImageElement!");Nt()(t,e)}(n,e),{decodedBackgroundUrl:"-moz-element(#"+n+")",clear:function(){return function(t){if(!Wt())throw new Error("Browser does not support mozSetImageElement!");Nt()(t,null)}(n)}}}(e):Rt()?function(t){var e="ScrivitoBackgroundImage"+Vt(),n=Ft("2d",e,t.width,t.height);return Lt(t,n),{decodedBackgroundUrl:"-webkit-canvas("+e+")",clear:function(){Ft("2d",e,0,0)}}}(e):Tt(e)?{decodedBackgroundUrl:"url("+t+")"}:function(t){return Bt(t),{decodedBackgroundUrl:"url("+t.src+")"}}(e)})).catch((function(){return{decodedBackgroundUrl:"url("+t+")"}}))}var Ut=0;function Vt(){return Ut+=1}var zt=function(){function t(t){this.onUpdateCallback=t,this.decodedUrls={},this.loadingRegistry={},this.clears=[]}return t.prototype.getBackgroundImage=function(t){var e=this.decodedUrls[t];return e||this.ensureLoading(t),e},t.prototype.clear=function(){this.clears.map((function(t){return t()}))},t.prototype.ensureLoading=function(t){var e=this;if(!this.decodedUrls[t]&&!this.loadingRegistry[t]){var n=qt(t).then((function(n){var r=n.decodedBackgroundUrl,i=n.clear;i&&e.clears.push(i),e.decodedUrls[t]=r,e.onUpdateCallback()}));this.loadingRegistry[t]=Object(o.U)(n,(function(){return delete e.loadingRegistry[t]}))}},t}(),Ht=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qt=function(){return(Qt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Gt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Jt=o.ab.struct({image:o.ab.String,attachment:o.ab.maybe(o.ab.String),clip:o.ab.maybe(o.ab.String),color:o.ab.maybe(o.ab.String),origin:o.ab.maybe(o.ab.String),position:o.ab.maybe(o.ab.String),repeat:o.ab.maybe(o.ab.String),size:o.ab.maybe(o.ab.String)}),Zt=o.ab.struct({image:o.ab.union([Z.g,Z.m,o.ab.String,o.ab.Nil]),attachment:o.ab.maybe(o.ab.enums.of(["fixed","scroll"])),clip:o.ab.maybe(o.ab.enums.of(["border-box"])),color:o.ab.maybe(o.ab.enums.of(["transparent"])),origin:o.ab.maybe(o.ab.enums.of(["padding-box"])),position:o.ab.maybe(o.ab.enums.of(["center","left","right","top","bottom"])),repeat:o.ab.maybe(o.ab.enums.of(["no-repeat"])),size:o.ab.maybe(o.ab.enums.of(["contain","cover"]))}),Yt=o.ab.union([Jt,Zt]);Yt.dispatch=function(t){return ae(t)?Jt:Zt};var Xt=o.ab.list(Yt),Kt=o.ab.union([Yt,Xt]);Kt.dispatch=function(t){return Array.isArray(t)?Xt:Yt};var $t=h(function(t){function e(e){var n=t.call(this,e)||this;return n.decoder=new zt((function(){return n.forceUpdate()})),n.binaryToUrl=n.binaryToUrl.bind(n),n}return Ht(e,t),e.prototype.componentWillUnmount=function(){this.decoder.clear()},e.prototype.render=function(){var t=this.props,e=t.style,n=t.tag,i=Gt(t,["style","tag"]),a=n;return function(t){if(Object(It.isObject)(t))for(var e=0,n=Object.keys(t);e<n.length;e++){var r=n[e];r.match(/^background.+/)&&Object(o.cb)(new o.a('Invalid background related CSS property "'+r+'". Expected property "background" alongside with any non-background propertiesFor further details, see https://www.scrivito.com/js-sdk/background-image-tag'))}}(e),r.createElement(a,Qt({},i,{style:te(e,this.binaryToUrl)}))},e.prototype.binaryToUrl=function(t){var e=Object(Et.a)(t),n=e.initialUrl,r=e.highResUrlToDecode;return r&&this.decoder.getBackgroundImage(r)||"url("+n+")"},e.displayName="Scrivito.BackgroundImageTag",e.propTypes=Object(xt.propTypes)({tag:o.ab.maybe(o.ab.String),style:o.ab.maybe(o.ab.interface({background:o.ab.maybe(Kt)},{strict:!1}))},{strict:!1}),e.defaultProps={tag:"div",style:{}},e}(r.Component));function te(t,e){if(Object(It.isObject)(t)){var n=t,r=n.background,i=Gt(n,["background"]);return Qt(Qt({},i),function(t,e){if(void 0===t)return{};if(Array.isArray(t))return{backgroundImage:ee(n=t.map((function(t){return re(t,e)})),"backgroundImage"),backgroundAttachment:ee(n,"backgroundAttachment"),backgroundClip:ee(n,"backgroundClip"),backgroundOrigin:ee(n,"backgroundOrigin"),backgroundPosition:ee(n,"backgroundPosition"),backgroundRepeat:ee(n,"backgroundRepeat"),backgroundSize:ee(n,"backgroundSize"),backgroundColor:ne(n)};var n;return re(t,e)}(r,e))}return{}}function ee(t,e){return t.map((function(t){return t[e]})).join(", ")}function ne(t){var e=Object(It.last)(t);if(e)return e.backgroundColor}function re(t,e){return ae(t)?ie(t):function(t,e){var n=t.image;if(n instanceof Z.f)return oe(n,t,e);if(n instanceof Object(Dt.a)().Obj){var r=Object(rt.h)(n);if(Object(At.a)(r)){var i=r.get("blob",["binary"]);if(i)return oe(i,t,e)}}return ie({image:"none"})}(t,e)}function ie(t){return{backgroundImage:t.image,backgroundAttachment:t.attachment||"scroll",backgroundClip:t.clip||"border-box",backgroundColor:t.color||"transparent",backgroundOrigin:t.origin||"padding-box",backgroundPosition:t.position||"0% 0%",backgroundRepeat:t.repeat||"repeat",backgroundSize:t.size||"auto"}}function oe(t,e,n){return{backgroundImage:n(t),backgroundAttachment:e.attachment||"scroll",backgroundClip:e.clip||"border-box",backgroundColor:e.color||"transparent",backgroundOrigin:e.origin||"padding-box",backgroundPosition:e.position||"center center",backgroundRepeat:e.repeat||"no-repeat",backgroundSize:e.size||"cover"}}function ae(t){return Object(It.isString)(t.image)}var ue,ce=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=M(h(((ue=function(t){function e(e){var n=t.call(this,e)||this;return n.onClick=n.onClick.bind(n),n}return ce(e,t),e.prototype.render=function(){var t=this;return r.createElement("span",{ref:function(e){return t.props.registeredElement.set(e)},className:"scrivito_editing_marker",onClick:this.onClick},r.createElement("i",{className:"scrivito_icon"}),r.createElement("span",{className:"scrivito_editing_marker_title"},this.props.parent.objClass()))},e.prototype.onClick=function(t){t.preventDefault(),t.stopPropagation(),Object(N.a)().showChildListMenu(this.props.registeredElement.id(),this.props.parent.id())},e}(r.Component)).displayName="Scrivito.ChildListTag.MenuMarker",ue))),fe=n(45);function pe(t){return t.ctrlKey||t.metaKey||t.shiftKey||2===t.which}var le=n(33),de=n(23),he=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),be=function(){return(be=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ve=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function ye(t){if(t){var e=Object(rt.h)(t);return e instanceof Z.b?e:void 0}}var ge=h(function(t){function e(e){var n=t.call(this,e)||this;return n.onClick=n.onClick.bind(n),n}return he(e,t),e.prototype.render=function(){var t=this.props,e=t.children,n=(t.to,t.params,ve(t,["children","to","params"]));return r.createElement("a",be({},n,{href:this.destination().href||"#",onClick:this.onClick,rel:this.rel(),target:this.target()}),e)},e.prototype.destination=function(){var t=this.props.to;if(t){var e=Object(rt.h)(t);if(e instanceof Z.c||e instanceof Z.b){var n=this.props.params||void 0;return{to:t,href:Object(le.a)(e,n&&{queryParameters:n}),params:n}}}return{to:t}},e.prototype.onClick=function(t){if(!this.props.onClick||(this.props.onClick(t),!t.defaultPrevented)){t.preventDefault();var e=this.destination();if(e.href){var n=this.target();if("_blank"===n||pe(t))Object(de.b)(e.href);else if(n)Object(de.c)(e.href,n);else{var r=e.to,i=e.params;Object(fe.a)(r,i&&{params:i})}}}},e.prototype.target=function(){if(this.props.target)return this.props.target;var t=ye(this.props.to);return t&&t.target()||void 0},e.prototype.rel=function(){if("rel"in this.props)return this.props.rel;var t=ye(this.props.to);return t&&t.rel()||void 0},e.displayName="Scrivito.LinkTag",e.propTypes=Object(xt.propTypes)({to:o.ab.maybe(o.ab.union([Z.m,Z.i])),params:o.ab.union([o.ab.dict(o.ab.String,o.ab.union([o.ab.Nil,o.ab.String,o.ab.list(o.ab.String)])),o.ab.maybe(o.ab.irreducible("false",(function(t){return!1===t})))]),onClick:o.ab.maybe(o.ab.Function)},{strict:!1}),e}(r.Component)),me=h((function(t){var e=Object(rt.i)(Object(at.a)(),t.child);return t.renderChild?t.renderChild(e):r.createElement("li",null,r.createElement(ge,{to:e},t.child.get("title","string")))}));me.displayName="Scrivito.ChildListTag.ChildItem";var je,Oe=n(31),we=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Se=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},Ce=h(((je=function(t){function e(e){var n=t.call(this,e)||this;return n.state={hasFocus:!1},n.onMouseOver=n.onMouseOver.bind(n),n.onMouseOut=n.onMouseOut.bind(n),n}return we(e,t),e.prototype.render=function(){var t=this,e=this.props.parent||Object(Oe.a)();if(!e)return null;var n=this.props,i=(n.parent,n.tag),o=n.renderChild,a=_e(n,["parent","tag","renderChild"]),u=e._scrivitoPrivateContent,c=u.orderedChildren();return r.createElement(et,null,(function(e){var n;return Object(ut.d)()&&e&&(a.onMouseOver=t.onMouseOver,a.onMouseOut=t.onMouseOut,a["data-scrivito-private-child-list-path"]=!0,t.state.hasFocus&&(a.className="scrivito_active scrivito_entered "+a.className),n=r.createElement(se,{parent:u,key:"menuMarker"})),r.createElement(i,a,Se([n],c.map((function(t){return r.createElement(me,{key:t.id(),child:t,renderChild:o})}))))}))},e.prototype.onMouseOver=function(t){t.stopPropagation(),this.setState({hasFocus:!0})},e.prototype.onMouseOut=function(t){t.stopPropagation(),this.setState({hasFocus:!1})},e}(r.Component)).displayName="Scrivito.ChildListTag",je.defaultProps={tag:"ul"},je)),ke=n(18),Pe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ie=function(){return(Ie=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ae=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Ee=function(t){function e(e){var n=t.call(this,e)||this;return n.state={hasError:!1},n}return Pe(e,t),e.prototype.componentDidCatch=function(t){Object(o.cb)(t),this.setState({hasError:!0})},e.prototype.shouldComponentUpdate=function(t){return this.props.widget.equals(t.widget)},e.prototype.render=function(){if(this.state.hasError){var t=void 0;return Object(ut.d)()&&(t=r.createElement("div",{className:"content_error"},"Widget could not be rendered due to application error.")),xe(this.props.widget,r.createElement(gt,{children:t}),this.props.placementModification)}return r.createElement(De,{widget:this.props.widget,widgetProps:this.props.widgetProps,placementModification:this.props.placementModification})},e.displayName="Scrivito.ContentTag.WidgetContent",e}(r.Component),De=function(t){function e(e){return t.call(this,e)||this}return Pe(e,t),e.prototype.render=function(){return xe(this.props.widget,r.createElement(this.getAppWidgetComponent(),this.getAppWidgetProps()),this.props.placementModification)},e.prototype.getAppWidgetComponent=function(){var t=this.props.widget.objClass(),e=_(t);if(!e)throw new o.a('No component registered for widget class "'+t+'"');return e},e.prototype.getAppWidgetProps=function(){var t={widget:Object(rt.i)(Object(at.a)(),this.props.widget)};if(this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("widget")){Object(o.cb)(new o.a('The prop "widget" is not allowed inside "widgetProps"'));var e=this.props.widgetProps,n=(e.widget,Ae(e,["widget"]));return Ie(Ie({},t),n)}return Ie(Ie({},t),this.props.widgetProps)},e}(r.Component);function xe(t,e,n){return r.createElement(yt.Provider,{value:{widget:t,placementModification:n},children:e})}var Me,Te=h(Ee),Fe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Re=function(){return(Re=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},We=T((function(t){return Re({type:"widgetlist"},Ne(t.field))}),h(((Me=function(t){function e(e){var n=t.call(this,e)||this;return n.onClick=n.onClick.bind(n),n}return Fe(e,t),e.prototype.render=function(){var t=this;return r.createElement("div",{ref:function(e){t.widgetlistPlaceholder=e,t.props.registeredElement.set(e)},className:"scrivito_empty_widget_field","data-scrivito-private-dropzone":"true",onClick:this.onClick})},e.prototype.onClick=function(t){if(t.preventDefault(),t.stopPropagation(),this.widgetlistPlaceholder){var e=Ne(this.props.field),n=e.objId,r=e.widgetId,i=e.attributeName;Object(N.a)().showWidgetlistMenu(this.props.registeredElement.id(),Object(o.v)(t,this.widgetlistPlaceholder),n,i,r)}},e}(r.Component)).displayName="Scrivito.ContentTag.WidgetlistPlaceholder",Me)));function Ne(t){var e=t.getContainer();return e instanceof Z.c?{objId:e.id(),attributeName:t.name()}:{objId:e.obj().id(),widgetId:e.id(),attributeName:t.name()}}var Be=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Le=h(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Be(e,t),e.prototype.render=function(){var t=this;if(Object(ut.c)())return this.widgetlistChildrenForComparison();var e=this.props.field;return Object(ut.d)()&&Y(e.obj().id())?r.createElement(et,null,(function(n){return t.renderWidgets(e,n)})):this.renderWidgets(e,!1)},e.prototype.renderWidgets=function(t,e){var n=this,i=this.props.field.get();return i.length?r.createElement(r.Fragment,null,i.map((function(t){return r.createElement(Te,{key:t.id(),widget:t,widgetProps:n.props.widgetProps})}))):e?r.createElement(We,{field:t}):null},e.prototype.widgetlistChildrenForComparison=function(){var t=this,e=Object(Z.y)(this.props.field,it());if(e.length)return e.map((function(e){return r.createElement(Te,{key:e.widget.id()+"-"+e.modification,widget:e.widget,widgetProps:t.props.widgetProps,placementModification:e.modification})}))},e}(r.Component)),qe=n(13),Ue=n(17);function Ve(t){return function t(e,n,r){if(e===n)return null;if(a=e,"A"===a.nodeName){var i=e.href,o=qe(i);return Object(Ue.d)(o)?r||"_blank"===e.getAttribute("target")?{openInNewWindow:i}:{openInCurrentWindow:o.resource()}:null}var a;if(!e.parentNode)return null;return t(e.parentNode,n,r)}(t.target,t.currentTarget,pe(t))}var ze=n(19),He=n(28);function Qe(t,e){return void 0===e&&(e=!1),Object(He.b)(t,(function(t){return function(t,e){var n=t.obj_id,r=Object(Z.w)(Object(ze.a)(),n);if(!r)return Object(Ue.b)({path:n,query:t.query,hash:t.hash});return Object(le.a)(r,{hash:t.hash,query:t.query,withoutPlaceholder:e})}(t,e)}))}var Ge,Je=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ze=function(){return(Ze=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ye=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Xe=h(((Ge=function(t){function e(e){var n=t.call(this,e)||this;return n.ref=r.createRef(),n.onClick=n.onClick.bind(n),n}return Je(e,t),e.prototype.componentDidMount=function(){var t=this.props.field.obj().id(),e=this.props.field.name(),n=this.ref.current;n&&Object(ct.a)({objId:t,attributeName:e},(function(){return st(n)}))},e.prototype.render=function(){switch(this.props.field.type()){case"html":return this.renderHtml();case"string":return this.renderString();case"float":case"integer":return this.renderNumber();case"widgetlist":var t=this.props.field;return this.renderContent({children:r.createElement(Le,{field:t,widgetProps:this.props.widgetProps})});default:return this.renderContent({children:this.props.customProps.children})}},e.prototype.renderHtml=function(){var t=this.props.customProps.children;if(t)return this.renderContent({children:t});var e=this.attributeValue();return this.renderContent({props:{dangerouslySetInnerHTML:{__html:Qe(Object(ut.c)()&&this.getHtmlDiffContent()||e)},onClick:this.onClick}})},e.prototype.renderString=function(){var t=this.props.customProps.children;if(t)return this.renderContent({children:t});if(Object(ut.c)()){var e=this.getHtmlDiffContent();if(e)return this.renderContent({props:{dangerouslySetInnerHTML:{__html:e}}})}return this.renderContent({children:this.attributeValue()})},e.prototype.renderNumber=function(){var t=this.props.customProps.children||this.attributeValue(),e=0===t?"0":t;return this.renderContent({children:e})},e.prototype.renderContent=function(t){var e=this.props.customProps,n=(e.children,Ye(e,["children"])),i=Ze(Ze(Ze(Ze({},n),t.props),this.editingProps()),{ref:this.ref});return t.children&&(i.children=t.children),r.createElement(this.props.tag,i)},e.prototype.onClick=function(t){var e,n=Ve(t);n&&((e=n)&&e.openInNewWindow?this.openInNewWindow(t,n):this.openInCurrentWindow(t,n))},e.prototype.openInNewWindow=function(t,e){var n=e.openInNewWindow;P.b&&(t.preventDefault(),t.stopPropagation(),Object(de.b)(n))},e.prototype.openInCurrentWindow=function(t,e){var n=e.openInCurrentWindow;t.preventDefault(),t.stopPropagation(),ke.e(n)},e.prototype.editingProps=function(){return this.props.onClick?{onClick:this.props.onClick,"data-scrivito-is-clickable":!0}:{}},e.prototype.attributeValue=function(){return this.props.field.get()},e.prototype.getHtmlDiffContent=function(){var t=this.props.field.getDiff(it());if(t&&"html"===t.format)return t.content},e}(r.Component)).displayName="Scrivito.ContentTag.AttributeValue",Ge));var Ke=n(22),$e=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tn=function(){return(tn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},en=h(function(t){function e(e){var n=t.call(this,e)||this;n.stateChangeCausedByEditor=new o.e,n.field=n.props.field,n.state={domMode:"None"};var r=n.props.editorClass;if(r){var i={getContent:n.getContent.bind(n),options:n.options.bind(n),setContent:n.setContent.bind(n),setDomMode:n.setDomMode.bind(n),validObjClasses:n.validObjClasses.bind(n)};n.editor=new r({controller:i})}return n}return $e(e,t),e.prototype.componentDidMount=function(){var t=this;if(this.editor){var e=this.editor;e.editorWillBeActivated();var n=Object(a.h)((function(){return t.getContent()}),(function(){t.stateChangeCausedByEditor.current()||e.contentDidChange()}));this.unsubscribe=n.unsubscribe,"Replace"===this.state.domMode&&this.editorDomWasMounted()}},e.prototype.componentDidUpdate=function(t,e){var n=e.domMode,r=this.state.domMode;n!==r&&("Replace"===r?this.editorDomWasMounted():this.editorDomWasUnmounted())},e.prototype.componentWillUnmount=function(){this.editor&&this.editor.editorWillBeDeactivated(),this.unsubscribe&&this.unsubscribe()},e.prototype.render=function(){var t,e=this;if("Replace"===this.state.domMode)return r.createElement(this.props.tag,tn(tn({},Object(It.omit)(this.props.customProps,"children")),{ref:function(t){e.editorComponent=t}}));var n=this.editor;n&&n.onClick&&(t=function(t){var e={stopPropagation:t.stopPropagation.bind(t),preventDefault:t.preventDefault.bind(t)};n.onClick(e)});var i={ref:function(t){e.editorComponent=t},widgetProps:this.props.widgetProps,customProps:this.props.customProps,field:this.props.field,key:this.state.domMode,tag:this.props.tag,onClick:t};return r.createElement(Xe,i)},e.prototype.editorDomWasMounted=function(){if(this.editor&&this.editorComponent){var t=Object(Ct.findDOMNode)(this.editorComponent);this.editor.editorDomWasMounted(t);var e=this.props.field.obj().id(),n=this.props.field.name();Object(ct.a)({objId:e,attributeName:n},(function(){return st(t)}))}},e.prototype.editorDomWasUnmounted=function(){this.editor&&this.editor.editorDomWasUnmounted()},e.prototype.setDomMode=function(t){this.setState({domMode:t})},e.prototype.getContent=function(){var t=this;return Object(i.d)((function(){return"html"===t.field.type()?Qe(t.field.get(),!0):t.field.get()})).result},e.prototype.setContent=function(t){var e=this;this.stateChangeCausedByEditor.runWith(!0,(function(){return e.field.update(t)}))},e.prototype.options=function(){return Object(Ke.a)(this.field.getContainer().objClass(),this.field.name(),this.field.type())},e.prototype.validObjClasses=function(){return this.field.validClasses()},e.displayName="Scrivito.ContentTag.Editor",e}(r.Component)),nn=n(61),rn=function(){return(rn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},on=h((function(t){return r.createElement(et,null,(function(e){if(e){var n=t.field,i=t.tag,o=Object(nn.a)({type:n.type(),tag:i});if(o){var a=o.id,u=o.editorClass,c=[i,(s=n.getContainer(),s instanceof Z.c?s.id():s.obj().id()+"|"+s.id()),n.name(),a].join("|");return r.createElement(en,rn({},t,{key:c,editorClass:u}))}}var s;return r.createElement(Xe,rn({},t))}))})),an=function(){return(an=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},un=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},cn=h((function(t){if(!t.content)return null;var e=t.content,n=t.attribute,i=t.tag,a=t.widgetProps,u=un(t,["content","attribute","tag","widgetProps"]),c=rt.c.basicFieldFor(e,n);if(!c)return Object(o.cb)(new o.a('Component "Scrivito.ContentTag" received prop "attribute" with invalid value: Attribute "'+n+'" is not defined for content specified in prop "content".')),null;a&&"widgetlist"!==c.type()&&Object(o.cb)(new o.a('The prop "widgetProps" is only allowed for widgetlist attributes'));var s={field:c,tag:i||"div",customProps:u,widgetProps:a};return Object(ut.d)()&&Y(c.obj().id())?r.createElement(on,an({},s)):r.createElement(Xe,an({},s))}));cn.displayName="Scrivito.ContentTag";var sn=n(24);var fn,pn=n(16);function ln(t){Object(ke.d)(t.historyState)&&function(t,e){if(t.historyState.isRevisit)return!1;if(!e)return!0;var n=t.pageState;if(Object(pn.b)(n))return!0;if(!Object(pn.c)(n))return!1;var r=e.pageState;return!Object(pn.c)(r)||(n.objId!==r.objId||t.historyState.location!==e.historyState.location)}(t,fn)&&(fn=t,Object(kt.k)(0,0))}var dn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return dn(e,t),e.prototype.componentDidMount=function(){this.notifyScrollWindow()},e.prototype.componentDidUpdate=function(){this.notifyScrollWindow()},e.prototype.render=function(){return null},e.prototype.notifyScrollWindow=function(){ln(this.props.navigationState)},e}(r.Component),bn=h((function(){var t=Object(sn.a)(),e=t.page,n=t.params,i=t.navigationState;if(!e)return null;var a=function(t){var e=_(t);if(!e)throw new o.a('No component registered for obj class "'+t+'"');return e}(Object(rt.h)(e).objClass()),u=r.createElement(a,{page:e,params:n});return i?r.createElement(r.Fragment,null,r.createElement(hn,{navigationState:i}),u):u}));bn.displayName="Scrivito.CurrentPage";var vn=function(){function t(t){this.onUpdateCallback=t,this.decodedUrls={},this.loadingRegistry={}}return t.prototype.getImage=function(t){var e=this.decodedUrls[t];return e||this.ensureLoading(t),e},t.prototype.ensureLoading=function(t){var e=this;if(!this.decodedUrls[t]&&!this.loadingRegistry[t]){var n=function(t){return Mt(t).then((function(e){return Tt(e)||Bt(e),t})).catch((function(){return t}))}(t).then((function(n){e.decodedUrls[t]=n,e.onUpdateCallback()}));this.loadingRegistry[t]=Object(o.U)(n,(function(){return delete e.loadingRegistry[t]}))}},t}(),yn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gn=function(){return(gn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},mn=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function jn(t,e){if(null!=e)return e;if(!t.isRaw()&&!t.isExplicitlyTransformed()){var n=t.raw().metadata();if("image/svg+xml"!==n.contentType()){var r=n.get("width");return Object(It.isNumber)(r)?r:null}}}var On=h(function(t){function e(e){var n=t.call(this,e)||this;return n.decoder=new vn((function(){return n.forceUpdate()})),n}return yn(e,t),e.prototype.render=function(){var t=this.props,e=t.content,n=t.attribute,r=t.width,i=mn(t,["content","attribute","width"]);if(!e)return null;if(e instanceof Z.f)return this.renderPlainBinary(e,r,i);var a=function(t,e){var n=rt.c.basicFieldFor(t,e);if(!n)return void(rt.c.forInstance(t)&&Object(o.cb)(new o.a('Component "Scrivito.ImageTag" received prop "content" with an object missing attribute "'+e+'".')));var r=n.type();if("binary"===r)return n.get();if("reference"===r){var i=n.get();return i instanceof Z.c&&i.get("blob","binary")||null}Object(o.cb)(new o.a('Component "Scrivito.ImageTag" received prop "content" with an object, whose attribute "'+e+'" is of unexpected type "'+r+'". Valid attribute types are "binary" and "reference".'))}(e,n);return void 0===a?null:null===a?this.renderEmptyObj(n,e,r,i):this.renderObjBinary(n,e,a,r,i)},e.prototype.renderPlainBinary=function(t,e,n){var i=jn(t,e);return null===i?null:r.createElement("img",gn({src:this.scaledSrc(t),width:i},n))},e.prototype.renderEmptyObj=function(t,e,n,i){return r.createElement(cn,gn({attribute:t,content:e,tag:"img",src:"data:image/gif;base64,R0lGODlhyADIAIAAAP///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMjEgNzkuMTU0OTExLCAyMDEzLzEwLzI5LTExOjQ3OjE2ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDBEQjBEMDdFODMzMTFFNTg0QzY4MUNBMUVCQUU2MjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDBEQjBEMDhFODMzMTFFNTg0QzY4MUNBMUVCQUU2MjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMERCMEQwNUU4MzMxMUU1ODRDNjgxQ0ExRUJBRTYyNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMERCMEQwNkU4MzMxMUU1ODRDNjgxQ0ExRUJBRTYyNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAAALAAAAADIAMgAAAL/hI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aNBhw7eixTAAA7","data-scrivito-image-placeholder":!0,width:n},i))},e.prototype.renderObjBinary=function(t,e,n,i,o){var a=jn(n,i);return null===a?null:r.createElement(cn,gn({attribute:t,content:e,width:a,tag:"img",src:this.scaledSrc(n)},o))},e.prototype.scaledSrc=function(t){var e=Object(Et.a)(t),n=e.initialUrl,r=e.highResUrlToDecode;return r&&this.decoder.getImage(r)||n},e.displayName="Scrivito.ImageTag",e.defaultProps={attribute:"blob"},e}(r.Component)),wn=function(t){var e=t.children;return Object(ut.d)()?r.createElement(nt,{children:e,value:!1}):e},_n=function(t){var e=t.children;return Object(ut.d)()?r.createElement(nt,{children:e,value:!0}):e},Sn=h((function(t){var e=t.children,n=Object(sn.b)();return n?r.createElement("div",null,r.createElement(hn,{navigationState:n}),e||r.createElement(r.Fragment,null,r.createElement("h1",null,"The page you were looking for doesn't exist."),r.createElement("p",null,"You may have mistyped the address or the page may have moved."))):null}));Sn.displayName="Scrivito.NotFoundErrorPage"},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(25);function i(){return Object(r.a)()._privateRealm._registry}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return l}));var r=n(2),i=n(4),o=n(23),a=n(26),u=n(0),c={type:"not found"},s={type:"not responsible"};function f(t){return"page"===t.type}function p(t){return"not found"===t.type}function l(t){if(null===t.path)return s;var e=t.obj;return e instanceof r.c?Object(a.a)(e)?Object(i.g)((function(){return function(t){var e;return null===(e=t.get("blob",["binary"]))||void 0===e?void 0:e.url()}(e)})).then((function(t){return t?(Object(o.a)(t),Object(u.Q)()):c})):{type:"page",objId:e.id(),queryParameters:t.queryParameters}:c}},function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return b}));var r=n(13),i=n(37),o=n(38),a=n(11),u=n(0),c="",s=!1;function f(t){var e=void 0===t?{}:t,n=e.routingBasePath,r=e.homepageCallback;s=!0,c=n||"",r&&Object(o.b)(r)}function p(t){h();var e=t.obj?i.a(t.obj):t.path,n=("/"+c+"/"+e).replace(/\/+/g,"/"),o=r("").pathname(n);return t.query&&o.query(t.query),t.hash&&o.hash(t.hash),t.origin&&o.origin(t.origin),o.toString()}function l(t){h();var e="string"==typeof t?r(t):t,n=function(t){if(d(t))return function(t){var e=t.path();if(e.substring(0,c.length)!==c)return null;return e.substring(c.length)}(t);return null}(e),o=e.query(!0),a=function(t){var e=t.hash();if(""===e)return null;return e}(e);return null===n?{path:null,obj:null,queryParameters:o,hash:a}:{path:n,obj:i.b(n),queryParameters:o,hash:a}}function d(t){return!t.is("absolute")||t.origin()===b()}function h(){if(!s)throw new u.m("Cannot use routing before Scrivito.configure was called.")}function b(){return r(a.e()).origin()}},function(t,e,n){"use strict";n.d(e,"g",(function(){return f})),n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return b})),n.d(e,"d",(function(){return v}));var r,i,o,a=n(0),u=n(5),c=n(64),s=0;function f(t){if("/"!==t.createHref({pathname:"/"}))throw new a.a("Expected a history without a preconfigured basename. For further details, see: https://www.scrivito.com/js-sdk/useHistory");if(t!==r){var e=!r;!function(t){i&&i();i=t.listen((function(t,e){m(e)}))}(t),r=t,e||m()}}function p(){return{historyChangesCount:s,location:l(),isRevisit:"POP"===o}}function l(){var t=g().location;return""+t.pathname+t.search+t.hash}function d(){return j().get()||0}function h(t){g().push(t)}function b(t){g().replace(t)}function v(t){return t.historyChangesCount===s}function y(){r||f(Object(c.createBrowserHistory)())}function g(){return y(),r}function m(t){o=t,s++,j().set(s)}function j(){return u.f.subState("historyChangesCount")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(2),i=n(6),o=n(12);function a(){var t=Object(r.A)(Object(r.r)()).and(Object(i.e)(Object(i.d)()));return Object(o.c)()?t:t.and(r.t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(8);function i(){if(!r.b)throw new Error("Not expected to be rendered without UI");return r.b}},function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return v}));var r,i,o=n(6),a=n(15),u=n(4),c=n(0),s=n(5),f=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e){return t.call(this,e)||this}return f(e,t),e}(c.m);function l(t){i=t}function d(){return!!i}function h(t){var e=i(Object(o.i)(Object(a.a)(),t));return"string"==typeof e&&e.length>0?e:null}function b(t){if(!i)throw new p("Scrivito.unstable_selectSiteId is only available in the multi-site mode");var e=Object(u.m)(null,v);if(e&&e!==t)throw new p("Scrivito.unstable_selectSiteId called with "+t+", but "+e+" was already selected");if("string"!=typeof t||!t)throw new p("Scrivito.unstable_selectSiteId can only be called with a non-empty string");g().set(t)}function v(){if(!i)throw new c.j("Calling getSelectedSiteId is only available in multi-site mode");return g().get()||null}var y=new u.a({recordedAs:"multiSiteMode",state:function(){return s.f.subState("multiSiteMode")},loader:function(){return Object(c.Q)()}});function g(){return y.get("selectedSiteId")}},function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return l}));var r=n(0),i=n(2),o=n(27),a=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},u={};function c(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];_.apply(void 0,a([t,e],n)),u[t]=e}function s(t,e){var n=u[t];if(n)return n[e]}function f(t){return s(t,"validations")}function p(t){return s(t,"attributes")||{}}function l(t,e,n){var i=p(t)[e],o=i?i.options:void 0;if(o)return"html"===n?o:void Object(r.R)((function(){return S(o)}))}var d=r.ab.struct({value:r.ab.String,title:r.ab.String}),h=r.ab.enums.of(["blockquote","bold","bulletList","clean","code","codeBlock","header1","header2","header3","header4","header5","header6","indent","italic","link","orderedList","outdent","strikethrough","subscript","superscript","underline"]),b=r.ab.refinement(r.ab.list(h),(function(t){return t.length>0}),"NonemptyArray"),v=r.ab.dict(r.ab.String,r.ab.struct({title:r.ab.maybe(r.ab.String),description:r.ab.maybe(r.ab.String),values:r.ab.maybe(r.ab.list(d)),options:r.ab.maybe(r.ab.struct({toolbar:b}))})),y=r.ab.struct({title:r.ab.String,properties:r.ab.list(r.ab.String)}),g=r.ab.struct({title:r.ab.String,component:r.ab.String,properties:r.ab.maybe(r.ab.list(r.ab.String))}),m=r.ab.union([y,g]);m.dispatch=function(t){return t.component?g:y};var j=r.ab.list(m),O=r.ab.dict(r.ab.String,r.ab.union([i.i,r.ab.Date,r.ab.Function,r.ab.Nil,r.ab.Number,r.ab.String,r.ab.list(i.i),r.ab.list(i.o),r.ab.list(r.ab.String)])),w=r.ab.struct({attributes:r.ab.maybe(v),propertiesGroups:r.ab.maybe(j),title:r.ab.maybe(r.ab.String),description:r.ab.maybe(r.ab.String),thumbnail:r.ab.maybe(r.ab.String),titleForContent:r.ab.maybe(r.ab.Function),descriptionForContent:r.ab.maybe(r.ab.Function),hideInSelectionDialogs:r.ab.maybe(r.ab.Boolean),properties:r.ab.maybe(r.ab.list(r.ab.String)),initialContent:r.ab.maybe(O),validations:r.ab.maybe(o.b),initializeCopy:r.ab.maybe(r.ab.Function)}),_=Object(r.u)("provideEditingConfig",[["className",r.ab.String],["editingConfig",w]],{docPermalink:"js-sdk/provideEditingConfig"}),S=Object(r.u)("provideEditingConfig",[["options",r.ab.struct({})]],{docPermalink:"js-sdk/provideEditingConfig"})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return c}));var r=n(13),i=n(8),o=n(17);function a(t){i.b?i.b.navigateToExternalUrl(t):function(t){window.location.assign(t)}(t)}function u(t,e){window.open(t,e)}function c(t){i.b&&Object(o.d)(r(t))?i.b.openInNewUiWindow(function(t){var e=r(t);return e.origin(location.origin),e.toString()}(t)):u(t,"_blank")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return b}));var r=n(2),i=n(19),o=n(0),a=n(4),u=n(6),c=n(16),s=n(32),f=n(15),p=Object.freeze({}),l=new o.e;function d(){var t=l.current();if(t)return{page:Object(u.i)(Object(f.a)(),t),params:p};var e=Object(a.m)(void 0,s.a);if(e){var n=e.pageState;if(Object(c.c)(n)){var o=Object(r.w)(Object(i.a)(),n.objId);if(o)return{page:Object(u.i)(Object(f.a)(),o),params:n.queryParameters||p,navigationState:e}}}return{page:null,params:p,navigationState:e}}function h(t,e){return l.runWith(t,e)}function b(){if(!l.current()){var t=Object(a.k)(void 0,s.a);if(t){var e=t.pageState;return Object(c.b)(e)||Object(c.c)(e)&&!Object(r.w)(Object(i.a)(),e.objId)?t:void 0}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r,i=n(6),o=n(56),a=i.b.init(),u=a.realm,c=a.context;function s(){return r}r=c,u.setInitialContentFor(o.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(35);function i(t){var e=Object(r.a)(t);return!!e&&e.isBinary()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"e",(function(){return f})),n.d(e,"d",(function(){return p}));var r=n(47),i=n(0),o=["error","warning","info"],a=i.ab.interface({severity:i.ab.maybe(i.ab.enums.of(o))}),u=i.ab.tuple([a,i.ab.Object]),c=i.ab.list(i.ab.union([i.ab.Function,i.ab.list(i.ab.union([i.ab.String,i.ab.Function,i.ab.Object,u]))]));function s(t){if("function"==typeof t)return t;var e=p(t)?t[1]:t;return Object(r.a)()(e)}function f(t){return"function"==typeof t}function p(t){if(!Array.isArray(t))return!1;var e=t[0],n=t[1];return!!function(t){if(!t)return!1;if("object"!=typeof t)return!1;var e=t.severity;return!e||-1!==o.indexOf(e)}(e)&&(!!n&&"object"==typeof n)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return _})),n.d(e,"e",(function(){return w})),n.d(e,"d",(function(){return j}));var r=n(13),i=/\bobjid:[a-f0-9]{16}\b[^"']*/g;function o(t,e){return t.replace(i,(function(t){return e(function(t){var e=new r(t);return{obj_id:t.slice(6,22),query:e.query(),hash:e.fragment()}}(t),t)}))}var a,u=n(0);function c(t){if(!a)throw new u.j;return a(t)}function s(t){a=t}var f=n(1),p=n(4);var l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function d(t){if(!t.url)return t;var e=c(t.url);return null===e?t:l(l({},t),{url:null,obj_id:e.obj_id,fragment:e.fragment||null,query:e.query||null})}function h(t,e,n){var i=new RegExp("<"+e+"\\s+(?:[^>]*?\\s+)?"+n+"=([\"'])(.*?)\\1","gi");return t.replace(i,(function(t,e,n){if(!n)return t;var i=n.charAt(0);if("#"===i||"?"===i)return t;if("objid:"===n.substr(0,6))return t;var o=function(t){var e=c(Object(f.unescape)(t));if(!e)return null;var n=new r("objid:"+e.obj_id);return e.fragment&&n.fragment(e.fragment),e.query&&n.query(e.query),Object(f.escape)(n.href())}(n);return o?t.replace(n,o):t}))}function b(t,e,n,r){var i=function(t){switch(t[0]){case"html":var e=t[1];return function(){return["html",(t=e,h(h(t,"a","href"),"img","src"))];var t};case"link":var n=t[1];return function(){return["link",d(n)]};case"linklist":var r=t[1];return function(){return["linklist",(t=r,t.map(d))];var t};default:throw new u.j}}(t),o=Object(p.m)(void 0,i);return void 0!==o?(Object(f.isEqual)(o,t)||v(e,n,r,o),u.n.resolve()):Object(p.g)(i).then((function(i){Object(f.isEqual)(i,t)||function(t,e,n,r){var i=r?e.getWidgetAttribute(r,n):e.getAttribute(n);return!Object(f.isEqual)(t,i)}(t,e,n,r)||v(e,n,r,i)}))}function v(t,e,n,r){var i,o,a=((i={})[e]=r,i);n?t.update({_widget_pool:(o={},o[n]=a,o)}):t.update(a)}var y,g=n(7),m=n(10);function j(t){if(y)throw new u.j("Write monitoring notification is already injected");y=t}var O={};function w(t,e){S(t).start(e)}function _(t,e){return S(t).finish(e)}function S(t){return O[t]||(O[t]=new C(["workspace",t])),O[t]}var C=function(){function t(t){this.objSpaceId=t,this.cache={}}return t.prototype.start=function(t){var e=this,n=Object(p.g)((function(){return Object(g.m)(e.objSpaceId,t)})).then((function(t){return t&&function(t){var e=t.get();if(!e||!Object(m.e)(e))return u.n.resolve();return u.n.all(function(t){return P(t,(function(t,e){if(void 0!==e){if("_widget_pool"===t){if(void 0===e)return;return P(e,(function(t,e){if(void 0!==e)return function(t,e){return P(t,(function(t,n){return k(t,n,e)}))}(e,t)}))}return k(t,e)}}))}(e).map((function(e){var n=e.attributeName,r=e.attributeData,i=e.widgetId;return b(r,t,n,i)}))).then((function(){}))}(t)})),r=this.cache[t],i=r?u.n.all([r,n]).then((function(){})):n;this.cache[t]=i,function(t){if(!y)throw new u.j("No write monitor notification was set up for link resolution.");y(t)}(i)},t.prototype.finish=function(t){return this.cache[t]||u.n.resolve()},t}();function k(t,e,n){if(!Object(u.J)(t)){var r=e;if(function(t){var e=t[0],n=t[1];return Object(f.contains)(["html","link","linklist"],e)&&!Object(f.isEmpty)(n)}(r))return[{attributeName:t,widgetId:n,attributeData:r}]}}function P(t,e){return Object(f.flatten)(Object(f.compact)(Object.keys(t).map((function(n){return e(n,t[n])}))))}},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(24),i=n(7);function o(){return Object(i.g)("Scrivito.currentPage"),Object(r.a)().page}function a(){return Object(i.g)("Scrivito.currentPageParams"),Object(r.a)().params}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(0),i=n(2),o=n(19),a=n(5),u=n(4),c=n(18),s=n(16),f=n(17),p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function l(){var t=Object(u.j)(void 0,(function(){return d.get()}));if(t){var e=t.pageState;if(Object(s.c)(e))if(!Object(i.w)(Object(o.a)(),e.objId))return p(p({},t),{pageState:s.a});return t}}var d=new u.b({state:a.f.subState("currentPage"),invalidation:function(){return Object(c.b)()},loader:function(){return Object(u.g)((function(){return t=Object(c.c)(),{route:Object(f.e)(t.location),historyState:t};var t})).then((function(t){var e=t.route,n=t.historyState;return new r.n((function(t){t(Object(s.d)(e))})).then((function(t){return{historyState:n,pageState:t}}))}))}})},function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return s}));var r=n(0),i=n(2),o=n(26),a=n(17),u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function c(t,e){return void 0===e&&(e={}),s(t,u(u({},e),{origin:e.origin||Object(a.a)()}))}function s(t,e){if(void 0===e&&(e={}),t instanceof i.b)return function(t,e){if(t.isExternal())return t.url();var n=t.obj();if(n instanceof i.c)return f(n,function(t,e){var n=u({},t);t.queryParameters||"string"==typeof t.query||(n.query=e.query()||void 0);"string"!=typeof t.hash&&(n.hash=e.hash()||void 0);return n}(e,t));throw new r.a("Missing link target.")}(t,e);if(t instanceof i.f){if(e.withoutPlaceholder)throw new r.j("Binary doesn't support withoutPlaceholder");return t.url()}return f(t,e)}function f(t,e){return Object(o.a)(t)?function(t,e){var n=t.get("blob",["binary"]);if(n){var r=e.withoutPlaceholder?n.urlWithoutPlaceholder():n.url();if(r)return r}return p(t,e)}(t,e):p(t,e)}function p(t,e){var n=e.query,r=e.queryParameters,i=e.origin,o=e.hash;return Object(a.b)({obj:t,origin:i,query:r||n,hash:o})}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(4),i=n(32);function o(t,e){s[u(t)]=e,c===u(t)&&e()}function a(t){if(t.objId===Object(r.m)(void 0,(function(){var t,e;return null===(e=null===(t=Object(i.a)())||void 0===t?void 0:t.pageState)||void 0===e?void 0:e.objId}))){var e=s[u(t)];e?e():c=u(t)}}function u(t){return[t.objId,t.attributeName,t.widgetId].toString()}var c,s={}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(6),i=n(25);function o(t){var e=t.objClass();if(e){var n=Object(i.a)().getClass(e);if(n)return r.c.forClass(n)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n(11),i=new(n(0).e),o=128;function a(t){return i.runWith(!0,t)}function u(t){if(t.isRaw()||t.isExplicitlyTransformed())return{initialUrl:t.url()};var e=function(t){return t.optimizeFor({width:o})}(t).url();if(i.current())return{initialUrl:e};var n=function(t){return t.optimizeFor({width:Object(r.j)().width*Object(r.a)()})}(t).urlWithoutPlaceholder();return n&&e!==n?{initialUrl:e,highResUrlToDecode:n}:{initialUrl:e}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return d}));var r=n(2),i=n(0),o=n(40),a=n(15),u=n(19),c=n(38),s=n(6),f=n(4),p=n(21);function l(t){if(!(t instanceof r.c))throw new i.a("Parameter obj needs to be a BasicObj.");if(function(t){var e=Object(f.m)(null,c.a);if(!e)return!1;return e.id()===t.id()}(t))return"/";if(!t.isDeleted()){var e=t.permalink();if(e){if(!Object(p.e)())return h(t,e);if(function(t){var e=Object(p.b)(t),n=b();return!e||e===n}(t))return h(t,e)}}var n=function(t){var e=Object(a.a)(),n=Object(s.i)(e,t);if(function(t){var e=t;return e.slug&&"function"==typeof e.slug}(n)){var r=n.slug();if("string"==typeof r)return r}}(t);return n?"/"+n+"-"+t.id():"/"+t.id()}function d(t){var e=t.replace(new RegExp("^/+|/+$","g"),"");if(""===e)return Object(c.a)();var n=function(t){if(t.length<16)return null;if(t.length>16&&"-"!==t.slice(-17,-16))return null;var e=t.slice(-16);if(e.match(/[^0-9a-f]/))return null;return e}(e);return n?Object(r.x)(Object(u.a)(),n):function(t){var e=o.a(t);if(e)return Object(r.w)(Object(u.a)(),e);if(Object(p.e)())return function(t){var e,n,i=b(),o=Object(r.u)(Object(u.a)(),"_permalink",t).filter((function(t){var e=Object(p.b)(t);return!e||e===i})),a=o.filter((function(t){return!t.isDeleted()}));return null!==(n=null!==(e=a[0])&&void 0!==e?e:o[0])&&void 0!==n?n:null}(t);return Object(r.v)(Object(u.a)(),"_permalink",t)}(e)}function h(t,e){return o.b(t.id(),e),"/"+e}function b(){var t=Object(f.m)(void 0,p.a);if(void 0===t)throw new i.m("Access to routing in the multi-site mode, but the site ID is not yet selected. Forgot to use Scrivito.unstable_selectSiteId?");return t}},function(t,e,n){"use strict";var r;function i(t){r=t}function o(){return r?r():null}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}))},function(t,e){t.exports=r},function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return l}));var r,i=n(0),o=n(7),a=n(4),u=n(2),c={},s=new i.e;function f(t,e){s.current()||(d(),c[e]=t)}function p(t){if(!s.current())return d(),c[t]}function l(t){return s.runWith(!0,t)}function d(){var t=Object(a.m)(void 0,(function(){return Object(o.k)(Object(u.s)())}))||"";t!==r&&(c={},r=t)}},function(t,e){t.exports=i},function(t,e,n){"use strict";n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return g})),n.d(e,"c",(function(){return m}));var r=n(5),i=function(){function t(t){this.id=t}return t.prototype.insert=function(t){t&&t.id===this.id&&(this.onClick=t.onClick)},t.prototype.modify=function(){},t.prototype.remove=function(){},t.prototype.getHandler=function(){return this.onClick},t}(),o=n(1),a=n(58),u=n(0),c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},f=function(){function t(){this.patch={insertIds:[],removeIds:[],items:{},modifyItems:{}}}return t.prototype.insert=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.apply(void 0,s([t],e)),this.patch.insertIds=Object(o.unique)(s(this.patch.insertIds,[t.id])),this.patch.items[t.id]=c(c(c({},Object(o.pick)(t,"description","group","position","title")),Object(o.mapObject)(Object(o.pick)(t,"enabled"),(function(t){return!!t}))),b(t.icon))},t.prototype.modify=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.apply(void 0,s([t],e)),this.patch.modifyItems[t.id]=c(c(c({},this.patch.modifyItems[t.id]),Object(o.pick)(t,"group","position","title")),b(t.icon))},t.prototype.remove=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.apply(void 0,s([t],e)),this.patch.removeIds.push(t)},t.prototype.getPatch=function(){return this.patch},t}(),p=u.ab.struct({after:u.ab.maybe(u.ab.String),before:u.ab.maybe(u.ab.String)}),l=Object(u.u)("menu.insert",[["options",u.ab.struct({id:u.ab.String,description:u.ab.maybe(u.ab.String),enabled:u.ab.maybe(u.ab.Boolean),group:u.ab.maybe(u.ab.String),icon:u.ab.maybe(u.ab.String),onClick:u.ab.maybe(u.ab.Function),position:u.ab.maybe(p),title:u.ab.maybe(u.ab.String)})]],{docPermalink:"js-sdk/extendMenu"}),d=Object(u.u)("menu.modify",[["options",u.ab.struct({id:u.ab.String,group:u.ab.maybe(u.ab.String),icon:u.ab.maybe(u.ab.String),position:u.ab.maybe(p),title:u.ab.maybe(u.ab.String)})]],{docPermalink:"js-sdk/extendMenu"}),h=Object(u.u)("menu.remove",[["id",u.ab.String]],{docPermalink:"js-sdk/extendMenu"});function b(t){return t?{icon:Object(a.a)(t)}:{}}var v=n(48);function y(){O();var t=new f;return j(t),t.getPatch()}function g(t){var e=new i(t);return j(e),e.getHandler()}function m(){w().set((O()||0)+1)}function j(t){Object(v.a)().forEach((function(e){return e.call(null,t)}))}function O(){return w().get()}function w(){return r.f.subState("menuPatchCounter")}},function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return y}));var r=n(1),i=n(22),o=n(27),a=n(15),u=n(0),c=n(4),s=n(2),f=n(6);function p(t){return!!t.attributeName}var l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},d=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},h={error:0,warning:1,info:2},b=Object(u.u)("validationResultsFor",[["model",u.ab.union([s.m,s.o])],["attributeName",u.ab.String]],{docPermalink:"js-sdk/validationResultsFor"});function v(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return b.apply(void 0,d([t,e],n)),y(t._scrivitoPrivateContent).filter((function(t){return p(t)&&t.attributeName===e})).sort((function(t,e){var n=t.severity,r=e.severity;return h[n]-h[r]})).map((function(t){return{message:t.message,severity:t.severity}}))}var y=Object(c.l)([],(function(t){return t instanceof s.c?t.id():t.obj().id()+"/"+t.id()}),(function(t){var e=t instanceof s.c?t:t.obj();if(!e.isEdited()&&!e.isNew())return[];var n=t.objClass(),c=Object(i.d)(n);if(!c)return[];var p=Object(a.a)(),d=Object(f.i)(p,t);return Object(r.flatten)(c.map((function(t){return Object(o.e)(t)?function(t,e){return m("Please check validations for the model "+e._scrivitoPrivateContent.objClass()+". ",t,e).map(g)}(t,d):function(t,e){var n=t[0],i=t.slice(1),c=e._scrivitoPrivateContent.objClass();if(Object(u.J)(n))return Object(u.cb)(new u.a("Found an attribute validation callback for the system attribute "+n+" of the model "+c+". Attribute validations can only be used for custom attributes. For system attributes please use content validations. Visit https://scrivito.com/js-sdk/provideEditingConfig#validations for more information.")),[];var p=f.c.basicFieldFor(e,n);if(!p)return[];var d=Object(f.i)(Object(a.a)(),p.get()),h=l({name:n},(v=e,v._scrivitoPrivateContent instanceof s.c?{content:e,obj:e}:{content:e,widget:e})),b="Please check validations for the attribute "+n+" of the model "+c+". ";var v;return Object(r.flatten)(i.map((function(t){var e,r=Object(o.c)(t),i=Object(o.d)(t)&&(null===(e=t[0])||void 0===e?void 0:e.severity);return m(b,r,d,h).map((function(t){return{attributeName:n,message:t.message,severity:i||t.severity||"error"}}))})))}(t,d)})),!0)}));function g(t){return{message:t.message,severity:t.severity||"error"}}function m(t,e){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];try{n=e.apply(void 0,i)}catch(t){return Object(u.cb)(t),[]}return n?Object(r.isString)(n)?[{message:n}]:Array.isArray(n)&&n.every(r.isString)?n.map((function(t){return{message:t}})):j(n)?[n]:(Object(u.cb)(new u.a("A validation must return a validation result or a falsy value. "+t+"Visit https://scrivito.com/js-sdk/provideEditingConfig#validations for more information.")),[]):[]}function j(t){return!!t&&"object"==typeof t&&!!t.message&&("string"==typeof(e=t.severity)&&-1!==o.a.indexOf(e));var e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return u}));var r,i=n(0),o=0;function a(){return r||(r=new i.g,Object(i.R)(c)),r.promise}function u(){return o+=1,t=!1,function(){if(t)throw new i.j("Unregister must not be called twice");t=!0,0==(o-=1)&&Object(i.R)(c)};var t}function c(){r&&0===o&&(r.resolve(),r=void 0)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(1),i=n(5),o=n(4),a=n(2),u=n(6),c=n(0),s=n(49),f=function(){return(f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},p=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},l=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function d(t,e){for(var n=[],d=2;d<arguments.length;d++)n[d-2]=arguments[d];var b=Object(s.b)();if(Object(i.e)("navigateTo"),null!==t){var v;g.apply(void 0,l([t,e],n));var y=null;if(e){var O=e.hash,w=e.params,_=p(e,["hash","params"]);m(t,_),v=f(f({},_),w),y=O||null}var S=function(){return Object(r.isFunction)(t)?t():t};Object(o.g)(S).then((function(t){j(t);var e=Object(u.h)(t);if(e instanceof a.c||e instanceof a.b)return Object(o.g)((function(){return h(e,v,y)})).then((function(t){if(!t)throw new c.a("The link provided to navigateTo has no destination.");return Object(s.a)(t,b)}))})).catch((function(t){Object(s.c)(b)&&Object(c.cb)(t)}))}else Object(c.R)((function(){return g.apply(void 0,l([t,e],n))}))}function h(t,e,n){return t instanceof a.b?function(t,e,n){if(t.isExternal())return{url:t.url()};var i=n||t.hash(),o=e&&!Object(r.isEmpty)(e)?e:t.queryParameters(),u=t.obj(),c=u instanceof a.c?u.id():t.objId();return c?{objId:c,query:o,hash:i}:void 0}(t,e,n):{objId:t.id(),query:e,hash:n}}var b=c.ab.union([a.m,a.i]),v=c.ab.union([c.ab.Function,b]),y=c.ab.dict(c.ab.String,c.ab.maybe(c.ab.union([c.ab.String,c.ab.list(c.ab.String),c.ab.Nil]))),g=Object(c.u)("navigateTo",[["target",v],["options",c.ab.maybe(c.ab.struct({hash:c.ab.maybe(c.ab.String),params:c.ab.maybe(y)},{strict:!1}))]],{docPermalink:"js-sdk/navigateTo"}),m=Object(c.u)("navigateTo",[["target",v],["options",c.ab.maybe(y)]],{docPermalink:"js-sdk/navigateTo"}),j=Object(c.u)("navigateTo",[["target",b]],{docPermalink:"js-sdk/navigateTo"})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(22),i=n(15),o=n(0),a=n(6);function u(t){return function(t){var e=t.objClass(),n=Object(r.c)(e,"titleForContent");if("function"==typeof n)try{return n(Object(a.i)(Object(i.a)(),t))}catch(t){Object(o.cb)(t)}}(t)||(e=t.objClass(),Object(r.c)(e,"title")||Object(o.Y)(e));var e}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var r,i=n(0);function o(t){r=t}function a(){if(r)return r;throw new i.m('Constraints validation callback is not configured. Forgot to call Scrivito.configure with the "constraintsCallback" option?')}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=[];function i(t){r.push(t)}function o(){return r}},function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return d}));var r=n(4),i=n(2),o=n(23),a=n(5),u=n(18),c=n(17),s=n(26),f=0;function p(){return++f}function l(t){return f===t}function d(t,e){return void 0===e&&(e=p()),Object(a.e)("basicNavigateTo"),Object(r.g)((function(){return t.url?{type:"remote",url:t.url}:function(t){var e=t.objId,n=t.query,r=t.hash,o=i.c.get(e);if(!o)return{type:"local",resource:Object(c.b)({path:e,query:n,hash:r})};if(Object(s.a)(o)){var a=o.get("blob",["binary"]);return a?{type:"remote",url:a.url()}:{type:"none"}}return{type:"local",resource:Object(c.b)({obj:o,query:n,hash:r})}}(t)})).then((function(t){var n,r;l(e)&&("remote"===t.type?Object(o.a)(t.url):"local"===t.type&&(n=t.resource,r=u.a(),n===r?u.f(n):u.e(n)))}))}},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return s}));var r=n(4),i=n(0),o=n(5),a={};function u(t,e){a[t]=e}function c(t){delete a[t]}function s(t){return a[t]?function(t){return new r.b({state:f(t),stream:new i.o((function(e){var n=function(){var n=a[t];e.next(n?function(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,o=e.height;return{x:n+window.pageXOffset,y:r+window.pageYOffset,width:i,height:o}}(n):null)};n();var r=window.setInterval(n,1e3);return function(){return window.clearInterval(r)}}))})}(t).get():null}function f(t){return o.f.subState("elementBoundaries").subState(t.toString())}},function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return l}));var r,i,o=n(1),a=n(54),u=n(0),c=n(2),s=n(8),f=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function p(t){if(i){var e={};t&&(e._validObjClasses=t);var n=i(e);if(n)return{filters:n}}else if(r)return{filters:r}}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s.b){try{D.apply(void 0,f([t],e))}catch(t){throw new u.a(h(t.message))}t.filters&&(d(r=t.filters)?(i=r,r=void 0):(r=t.filters,i=void 0));var o=t.baseFilter;if(o){var c=o.query;c&&s.b.configureContentBrowser(Object(a.a)({baseQuery:c}))}}}function d(t){return"function"==typeof t}function h(t){return t.replace(/key 'filters.\d/,"key 'filters")}var b=u.ab.union([u.ab.String,u.ab.list(u.ab.String)]),v=u.ab.enums.of(Object(o.intersection)(c.k,["contains","containsPrefix","equals","startsWith","isGreaterThan","isLessThan"])),y=u.ab.union([u.ab.String,u.ab.Date,u.ab.Nil,u.ab.Number,u.ab.list(u.ab.union([u.ab.String,u.ab.Nil])),u.ab.list(u.ab.union([u.ab.Date,u.ab.Nil])),u.ab.list(u.ab.union([u.ab.Number,u.ab.Nil]))],"SearchValue"),g=u.ab.struct({title:u.ab.maybe(u.ab.String)}),m=g.extend({field:u.ab.maybe(b),operator:u.ab.maybe(v),expanded:u.ab.maybe(u.ab.Boolean)}),j=g.extend({value:u.ab.maybe(y),query:u.ab.maybe(c.l),selected:u.ab.maybe(u.ab.Boolean)}),O=m.extend({type:u.ab.enums.of(["radioButton"]),options:u.ab.dict(u.ab.String,j)},"RadioFilterDefinition"),w=g.extend({value:u.ab.maybe(y),selected:u.ab.maybe(u.ab.Boolean)}),_=m.extend({type:u.ab.enums.of(["checkbox"]),options:u.ab.dict(u.ab.String,w)},"CheckboxFilterDefinition"),S=u.ab.declare("TreeFilterDefinition");S.define(g.extend({type:u.ab.maybe(u.ab.enums.of(["tree"])),icon:u.ab.maybe(u.ab.String),query:u.ab.maybe(c.l),expanded:u.ab.maybe(u.ab.Boolean),value:u.ab.maybe(y),field:u.ab.maybe(b),operator:u.ab.maybe(v),selected:u.ab.maybe(u.ab.Boolean),options:u.ab.maybe(u.ab.dict(u.ab.String,S))}));var C={tree:S,radioButton:O,checkbox:_},k=u.ab.union([C.tree,C.checkbox,C.radioButton]);k.dispatch=function(t){return C[t.type||"tree"]};var P=u.ab.dict(u.ab.String,k),I=u.ab.union([u.ab.Function,P]);I.dispatch=function(t){return u.ab.Function.is(t)?I.meta.types[0]:I.meta.types[1]};var A=u.ab.struct({query:c.l}),E=u.ab.struct({filters:u.ab.maybe(I),baseFilter:u.ab.maybe(A)},"Configuration"),D=Object(u.u)("configureContentBrowser",[["configuration",E]],{docPermalink:"js-sdk/configureContentBrowser"})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1),i=n(2);function o(t){if(!t)return t;switch(typeof t){case"string":case"number":case"boolean":return t;case"object":return t._scrivitoPrivateContent instanceof i.d?o(t._scrivitoPrivateContent.params()):Object(r.isDate)(t)?t:Array.isArray(t)?(e=[],t.forEach((function(t){var n=o(t);void 0!==n&&e.push(n)})),e):function(t){var e={};return Object.keys(t).forEach((function(n){var r=o(t[n]);void 0!==r&&(e[n]=r)})),e}(t)}var e}},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return h}));var r=n(1),i=n(4),o=n(2),a=n(20),u=n(22),c=n(35),s=n(6),f=n(15);function p(t,e){var n,i=Object(u.c)(t,"initialContent");if(i){var o=i[e];if(Object(r.isFunction)(o))return o();if(n=o,Array.isArray(n)&&n.every(l)){var a=Object(f.a)();return o.map((function(t){var e=t._scrivitoPrivateContent.copy();return Object(s.i)(a,e)}))}return o}}function l(t){return t._scrivitoPrivateContent&&t._scrivitoPrivateContent instanceof o.e}function d(t){return Object(i.g)((function(){return o.c.get(t)})).then((function(t){t&&b(t)}))}function h(t,e){return Object(i.g)((function(){return o.c.get(t)})).then((function(n){if(n)return Object(a.a)().finishReplicatingObj(Object(o.r)(),t).then((function(){var t=n.widget(e);t&&b(t)}))}))}function b(t){var e=t.objClass(),n=Object(c.a)(t);if(n){var i={};Object.keys(n.attributes).forEach((function(o){var a=n.attributes[o],u=t.get(o,a);if(Object(r.isEmpty)(u)){var c=p(e,o);c&&(i[o]=c)}}));var o=Object(s.g)(i,n,e);t.update(o)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(5);function i(){var t=new MutationObserver(a);return t.observe(document.head,{attributes:!0,attributeFilter:["title"],characterData:!0,childList:!0,subtree:!0}),function(){return t.disconnect()}}function o(){return u().get()||""}function a(){u().set(document.title)}function u(){return r.f.subState("documentTitle")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(13),i=n(11);function o(t){return r(t).absoluteTo(Object(i.e)().href).toString()}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n(5),i=n(0),o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n){return Object(i.R)((function(){return c((function(r){r[t]={content:e,parentElementId:n}}))})),function(){return Object(i.R)((function(){return c((function(e){delete e[t]}))}))}}function u(){var t=s();return Object.keys(t).map((function(e){var n=parseInt(e,10);return o({elementId:n},t[n])}))}function c(t){var e=o({},s());t(e),f().set(e)}function s(){return f().get()||{}}function f(){return r.f.subState("contentZoneRegistry")}},function(t,e){t.exports=o},function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return s}));var r=n(1),i=n(5),o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},a=0,u={};function c(t){var e=(++a).toString();u[e]=t;var n=f(),r=n.get()||[];n.set(o(r,[e]))}function s(t){var e=t.type,n=t.tag,i=f().get();if(i){var o=Object(r.find)(i,(function(t){return u[t]&&u[t].canEdit({type:e,tag:n})}));if(o)return{id:o,editorClass:u[o]}}}function f(){return i.f.subState("editors")}},function(t,e){t.exports=a},function(t,e){t.exports=u},function(t,e){t.exports=c},,function(t,e,n){"use strict";n.r(e),n.d(e,"Binary",(function(){return p.f})),n.d(e,"FutureBinary",(function(){return p.h})),n.d(e,"ObjFacetValue",(function(){return g.a})),n.d(e,"load",(function(){return N.g})),n.d(e,"ArgumentError",(function(){return o.a})),n.d(e,"ScrivitoError",(function(){return o.m})),n.d(e,"configure",(function(){return G})),n.d(e,"configureContentBrowser",(function(){return dt.a})),n.d(e,"currentPage",(function(){return ht.a})),n.d(e,"currentPageParams",(function(){return ht.b})),n.d(e,"currentSiteId",(function(){return g.d})),n.d(e,"extendMenu",(function(){return gt})),n.d(e,"extractText",(function(){return Et})),n.d(e,"updateMenuExtensions",(function(){return vt.c})),n.d(e,"renderPage",(function(){return Bt})),n.d(e,"preload",(function(){return Vt})),n.d(e,"finishLoading",(function(){return Qt.a})),n.d(e,"openDialog",(function(){return Jt})),n.d(e,"canWrite",(function(){return Yt})),n.d(e,"isInPlaceEditingActive",(function(){return st.d})),n.d(e,"isEditorLoggedIn",(function(){return Xt})),n.d(e,"navigateTo",(function(){return Kt.a})),n.d(e,"provideEditingConfig",(function(){return $t.e})),n.d(e,"updateContent",(function(){return te})),n.d(e,"urlFor",(function(){return w})),n.d(e,"useHistory",(function(){return nt.g})),n.d(e,"setVisitorIdToken",(function(){return x})),n.d(e,"unstable_selectSiteId",(function(){return R.d})),n.d(e,"validationResultsFor",(function(){return ee.b})),n.d(e,"BackgroundImageTag",(function(){return ne.a})),n.d(e,"ChildListTag",(function(){return ne.b})),n.d(e,"ContentTag",(function(){return ne.c})),n.d(e,"CurrentPage",(function(){return ne.d})),n.d(e,"ImageTag",(function(){return ne.e})),n.d(e,"InPlaceEditingOff",(function(){return ne.f})),n.d(e,"LinkTag",(function(){return ne.g})),n.d(e,"NotFoundErrorPage",(function(){return ne.h})),n.d(e,"RestoreInPlaceEditing",(function(){return ne.i})),n.d(e,"WidgetTag",(function(){return ne.j})),n.d(e,"connect",(function(){return ne.l})),n.d(e,"provideComponent",(function(){return ne.m})),n.d(e,"registerComponent",(function(){return ne.n})),n.d(e,"Link",(function(){return ue})),n.d(e,"Obj",(function(){return ce})),n.d(e,"ObjSearch",(function(){return se})),n.d(e,"Widget",(function(){return fe})),n.d(e,"createObjClass",(function(){return pe})),n.d(e,"createWidgetClass",(function(){return le})),n.d(e,"getClass",(function(){return de})),n.d(e,"provideObjClass",(function(){return he})),n.d(e,"provideWidgetClass",(function(){return be})),n.d(e,"_internal",(function(){return r}));var r={};n.r(r),n.d(r,"alwaysShowOptionMarkers",(function(){return ne.k})),n.d(r,"isFetchingActive",(function(){return d.f})),n.d(r,"enableForceVerification",(function(){return ie})),n.d(r,"currentPublicAuthorizationState",(function(){return oe}));var i,o=n(0);function a(){if(!i)throw new o.j;return i}function u(t){if(i)throw new o.j;i=t,n.p=i+"/"}function c(){i=void 0,n.p="https://example.org/scrivito-internal-error/"}var s=n(13),f=n(9),p=n(2),l=n(19),d=n(10);function h(){return"https://assets.scrivito.com/sjs/"+Object(o.G)()}function b(t,e){Object(o.N)(t+"/scrivito_editing.css",e),n.e(0).then(n.bind(null,71)).then((function(t){return(0,t.initializeEditors)()}))}var v,y=n(17),g=n(6),m=n(33),j=n(7),O=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function w(t,e){for(var n,r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];Object(j.g)("Scrivito.urlFor"),P.apply(void 0,O([t,e],i)),e&&(n=e.query,r=e.hasOwnProperty("hash")?e.hash:e.fragment);var a=Object(g.h)(t);return Object(m.b)(a,{origin:v,query:n,hash:r})}var _,S,C=o.ab.union([p.m,p.i,p.g]),k=o.ab.struct({query:o.ab.maybe(o.ab.String),hash:o.ab.maybe(o.ab.String),fragment:o.ab.maybe(o.ab.String)}),P=Object(o.u)("urlFor",[["target",C],["options",o.ab.maybe(k)]],{docPermalink:"js-sdk/urlFor"}),I=n(8),A=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},E="js-sdk/setVisitorIdToken";function D(t){if(!I.b&&t)return function(){_=new d.a;var t=setTimeout((function(){throw new o.m("Scrivito.setVisitorIdToken was not called within 30 seconds. Visit "+Object(o.B)(E)+" for more information.")}),3e4);return S=function(){return clearTimeout(t)},_}()}function x(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!I.b){if(T.apply(void 0,A([t],e)),!_)throw new o.m("Scrivito needs to be configured to use visitor authentication before Scrivito.setVisitorIdToken can be called. Visit "+Object(o.B)("js-sdk/configure")+" and "+Object(o.B)(E)+" for more information.");F(),_.setToken(t)}}function M(){return!!_}var T=Object(o.u)("setVisitorIdToken",[["idToken",o.ab.String]],{docPermalink:E});function F(){S&&(S(),S=void 0)}var R=n(21);function W(t,e,n){window.parent.location.replace(t+"/"+e+"~"+n)}var N=n(4),B=n(47),L=n(11);function q(){if((t=window.parent)!==window&&function(t){try{return t.location.host}catch(t){}}(t)!==window.location.host)return null;var t,e=Object(L.e)().href;return I.b?e:Object(o.r)(e)||null}var U=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},V=o.ab.refinement(o.ab.String,(function(t){return s(t).origin()===t}),"Origin String"),z=o.ab.struct({tenant:o.ab.String,adoptUi:o.ab.maybe(o.ab.union([o.ab.Boolean,V])),endpoint:o.ab.maybe(o.ab.String),constraintsValidation:o.ab.maybe(o.ab.Function),homepage:o.ab.maybe(o.ab.Function),origin:o.ab.maybe(V),routingBasePath:o.ab.maybe(o.ab.String),visitorAuthentication:o.ab.maybe(o.ab.Boolean),unstable:o.ab.maybe(o.ab.Object)}),H=Object(o.u)("configure",[["configuration",z]],{docPermalink:"js-sdk/configure"}),Q=new o.g;function G(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];H.apply(void 0,U([t],n)),J(t);var i=t.unstable,c=null==i?void 0:i.getSiteIdForObj;if(c&&Object(R.c)(c),t.tenant===j.b)Object(j.A)(),j.r.disableReplication();else{var s=t.tenant,f=t.endpoint||o.f;u(null!==(e=null==i?void 0:i.assetUrlBase)&&void 0!==e?e:h());var p=t.adoptUi;if(p){var l=q();if(l){var d=!0===p?"https://edit.scrivito.com":p;return W(d,s,l)}}I.b?(Z(f,s,I.b,i),b(a())):Y(f,s,t.visitorAuthentication)}X(t),K(t)}function J(t){if(!Q.isPending())throw new o.m("Scrivito.configure has already been called.");Q.resolve(t)}function Z(t,e,r,i){var a;r.configureTenant({tenant:e,endpoint:t,useRailsAuth:null==i?void 0:i.useRailsAuth}),Object(R.e)()&&(a=setTimeout((function(){Object(o.P)("Warning: No site ID was selected within 30 seconds. In the multi-site mode a site ID must be selected before Scrivito can render content. Forgot to use Scrivito.unstable_selectSiteId?")}),3e4),Object(N.g)(R.a).then((function(){clearTimeout(a)}))),function(t){n.e(0).then(n.bind(null,70)).then((function(e){var n=e.startAppAdapter,r=new MessageChannel;n(Object(f.i)(r.port1)),t.setAppAdapter(r.port2)}))}(r)}function Y(t,e,n){var r=D(n);r&&d.b.setAuthProvider(r),d.b.init(t,e)}function X(t){var e,n=t.homepage,r=t.routingBasePath,i=n?function(){return Object(g.h)(n())}:function(){return Object(p.z)(Object(l.a)())};Object(y.c)({routingBasePath:r,homepageCallback:i}),e=t.origin||void 0,v=e}function K(t){var e=t.constraintsValidation;e&&Object(B.b)(e)}function $(t){return t===window.location.origin||tt(t,"https://*.scrivito.com")?o.n.resolve(!0):Q.promise.then((function(e){var n,r,i=e.adoptUi;return!("string"!=typeof i||!tt(t,i))||(null!==(r=null===(n=e.unstable)||void 0===n?void 0:n.trustedUiOrigins)&&void 0!==r?r:[]).some((function(e){return tt(t,e)}))}))}function tt(t,e){var n=new s(t),r=new s(e);return n.protocol()===r.protocol()&&function(t,e){if("*."===e.substr(0,2)){var n=e.substr(1);return t.substr(-n.length)===n}return t===e}(n.host(),r.host())}var et={canEdit:f.a,canWrite:f.a,comparisonBase:f.a,getContentStateId:f.a,translate:f.a,getResolvedUrl:f.a,retrieveObjQuery:f.b,retrieveFacetQuery:f.b,retrieveSuggest:f.b,retrieveBinaryMetadata:f.b,retrieveBinaryUrls:f.b,retrieveObjFieldDiffs:f.b,copyBinary:f.b,uploadBinary:f.b,objReplicationMessageStream:f.c,finishSavingObj:f.b,finishReplicatingObj:f.b,insertWidget:f.b,navigateToExternalUrl:f.b,openInNewUiWindow:f.b,configureContentBrowser:f.b,openContentBrowser:f.b,openCustomDialog:f.b,setAppAdapter:f.b,configureTenant:f.b,showWidgetMenu:f.b,showWidgetlistMenu:f.b,showChildListMenu:f.b,startDrag:f.b,endDrag:f.b,dragTo:f.b,drop:f.b};var nt=n(18),rt=n(16),it=n(5),ot=n(32);function at(){var t;return Object(it.g)((function(){return Object(N.d)(ot.a).result})).filter(o.I).filter((function(e){var n=void 0===t||!function(t,e){var n=t.pageState,r=e.pageState;if(Object(rt.c)(n))return!!Object(rt.c)(r)&&(n.objId===r.objId&&t.historyState.location===e.historyState.location);return!Object(rt.c)(r)&&Object(rt.b)(n)===Object(rt.b)(r)}(t,e);return t=e,n}))}function ut(t){var e=t.pageState;if(Object(rt.c)(e)){var n=t.historyState.location;Object(N.g)((function(){if(nt.a()===n){var t=Object(p.w)(Object(l.a)(),e.objId);if(t){var r=Object(y.b)({obj:t});return s(n).path(r).toString()}}})).then((function(t){if(t){var e=nt.a();n===e&&t!==e&&nt.f(t)}}))}}var ct=n(28),st=n(12),ft=n(20);function pt(){var t=Object(L.b)();t.addEventListener("dragover",(function(t){return function(t){t.dataTransfer.dropEffect="move",t.preventDefault();var e={x:t.pageX,y:t.pageY};Object(ft.a)().dragTo(e)}(t)})),t.addEventListener("drop",(function(){Object(ft.a)().drop()}))}var lt=n(57);var dt=n(53),ht=n(31),bt=n(48),vt=n(42),yt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function gt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mt.apply(void 0,yt([t],e)),I.b&&(Object(bt.b)(t),Object(vt.c)())}var mt=Object(o.u)("extendMenu",[["menuCallback",o.ab.Function]],{docPermalink:"js-sdk/extendMenu"}),jt=function(){function t(t){this.maxLength=t,this.currentLength=0,this.extracts=[]}return t.prototype.isMaxLengthReached=function(){return this.currentLength>=this.maxLength},t.prototype.push=function(t){t&&(this.currentLength+=t.length+(this.extracts.length?1:0),this.extracts.push(t))},t.prototype.toString=function(){return this.extracts.join(" ").substring(0,this.maxLength).replace(/ $/,"")},t}(),Ot=n(35),wt=/\s+/g;function _t(t){return t.trim().replace(wt," ")}var St=["HEAD","SCRIPT"];function Ct(t){var e,n=t.nodeName;return St.indexOf(n)>-1?"":"#text"===n?t.textContent||"":(e=t.childNodes,Array.prototype.slice.call(e)).map((function(t){return Ct(t)})).join(" ")}var kt=new DOMParser;function Pt(t){return""===t?"":_t(Ct((e=t,kt.parseFromString(e,"text/html").documentElement)));var e}function It(t,e,n,r){if("blob:text"===n)return r.push(function(t){if(t instanceof p.e)return"";var e=t.metadata().get("text");return"string"!=typeof e?"":_t(e)}(t));var i=e.attribute(n);if(i)switch(i[0]){case"html":return r.push(Pt(t.get(n,"html")));case"string":return r.push(_t(t.get(n,"string")));case"widgetlist":return function(t,e){for(var n=0,r=t;n<r.length;n++){if(At(r[n],e),e.isMaxLengthReached())break}}(t.get(n,"widgetlist"),r)}}function At(t,e){var n=Object(Ot.a)(t);if(n)for(var r=0,i=n.extractTextAttributes;r<i.length;r++){if(It(t,n,i[r],e),e.isMaxLengthReached())break}}function Et(t,e){return Dt(t,e),function(t,e){var n=new jt(e);return At(t,n),n.toString()}(Object(g.h)(t),e&&e.length?e.length:1e9)}var Dt=Object(o.u)("extractText",[["obj",p.m],["options",o.ab.maybe(o.ab.struct({length:o.ab.maybe(o.l)}))]],{docPermalink:"js-sdk/extractText"}),xt=n(24),Mt=n(36);function Tt(t,e){return n={version:Object(o.G)(),csid:e,recording:Object(N.e)(t)},JSON.stringify(n);var n}function Ft(t){var e=function(t){var e=function(t){if("{"!==t.charAt(0))return;try{return JSON.parse(t)}catch(t){return}}(t);if(e&&function(t){return!!t.version}(e))return e}(t);e?e.version===Object(o.G)()?Object(it.j)((function(){Object(j.u)(Object(p.s)(),e.csid),Object(N.i)(e.recording)})):Object(o.P)("could not preload: dump is from version "+e.version+", this is version "+Object(o.G)()):Object(o.P)("could not preload: parsing dump failed")}var Rt=n(40),Wt=n(37),Nt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function Bt(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];Object(j.g)("Scrivito.renderPage"),qt.apply(void 0,Nt([t,e],n));var i=Object(p.s)(),o=Object(g.h)(t);return Object(j.y)(i).then((function(){var t=Object(j.k)(i);return Object(N.g)((function(){return Object(N.n)((function(){return Lt(o),Object(xt.c)(o,(function(){return Object(Mt.b)(e)}))}))})).then((function(e){return{result:e.result,preloadDump:Tt(e.usedData,t)}}))}))}function Lt(t){Object(Rt.c)((function(){return Object(Wt.b)(Object(Wt.a)(t))}))}var qt=Object(o.u)("renderPage",[["page",p.m],["render",o.ab.Function]],{docPermalink:"js-sdk/renderPage"}),Ut=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function Vt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Ht.apply(void 0,Ut([t],e)),o.n.resolve().then((function(){var e=!1;return M()?{dumpLoaded:e}:(I.b||(Ft(t),e=!0),zt().then((function(){return{dumpLoaded:e}})))}))}function zt(){return Object(N.g)((function(){Object(ht.a)()}))}var Ht=Object(o.u)("preload",[["preloadDump",o.ab.String]],{docPermalink:"js-sdk/preload"}),Qt=n(44),Gt=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};function Jt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Zt.apply(void 0,Gt([t],e)),I.b&&I.b.openCustomDialog(t)}var Zt=Object(o.u)("openDialog",[["name",o.ab.String]],{docPermalink:"js-sdk/openDialog"});function Yt(){return I.b&&I.b.canWrite(Object(p.s)())||!1}function Xt(){return!!I.b}var Kt=n(45),$t=n(22);function te(){Object(j.z)(Object(p.s)()).then((function(t){t&&Object(o.cb)(new o.m("Scrivito.updateContent did not completely update the preload dump to the currently published content because of too many intermediate publishes."))}))}var ee=n(43),ne=n(14),re=n(25);function ie(){d.b.enableForceVerification()}function oe(){return d.b.currentPublicAuthorizationState()}var ae=Object(re.a)(),ue=ae.Link,ce=ae.Obj,se=ae.ObjSearch,fe=ae.Widget,pe=ae.createObjClass,le=ae.createWidgetClass,de=ae.getClass,he=ae.provideObjClass,be=ae.provideWidgetClass;!function(){c();var t,e,n,r=window.parent,i=r!==window&&Object(st.a)();if(Object(g.f)("default"),i){var a=(e=r,n=Object(f.e)(e,Object(f.j)(window)).then((function(t){var e=t.port,n=t.origin;return $(n).then((function(t){if(!t)throw new o.m("Refusing to connect to Scrivito UI at unknown origin "+n+".");return e}))})),Object(f.f)(et,Object(f.h)(Object(f.d)(n.then(f.i)))));Object(I.a)(a),Object(d.i)(a),Object(p.C)(a),Object(ct.c)((function(t){return a.getResolvedUrl(t)||null})),Object(ct.d)((function(){})),Object(j.v)(a),Object(j.w)(a),Object(j.B)(j.d),Object(st.b)(),pt(),L.b().addEventListener("dragover",(function(t){var e=t.clientY,n=L.g(),r=L.h();r>0&&e<30?L.k(n,r-25):L.c()>r+L.d()&&e>L.d()-30&&L.k(n,r+25)})),(t=Object(L.b)().body).classList.add("scrivito_editing_active"),Object(st.d)()&&t.setAttribute("data-scrivito-editing",""),Object(st.c)()&&t.setAttribute("data-scrivito-comparison",""),Object(lt.b)()}else Object(j.B)(j.c);at().subscribe(ut)}()}])}));